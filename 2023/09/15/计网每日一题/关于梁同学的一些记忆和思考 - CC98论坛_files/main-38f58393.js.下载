!function(e){function t(t){for(var a,s,i=t[0],c=t[1],l=t[2],m=0,p=[];m<i.length;m++)s=i[m],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={23:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([1270,0]),n()}({11:function(e,t){e.exports=$},1270:function(e,t,n){"use strict";n.r(t),n.d(t,"addTimerCallback",(function(){return Um}));var a={};n.r(a),n.d(a,"userLogIn",(function(){return W})),n.d(a,"userLogOff",(function(){return Y})),n.d(a,"usercenterPageLoadUnfinish",(function(){return q})),n.d(a,"userNotFound",(function(){return J})),n.d(a,"userCenterLoading",(function(){return G})),n.d(a,"userCenterLoaded",(function(){return Q})),n.d(a,"userCenterSolveError",(function(){return K})),n.d(a,"usercenterPageLoadFinish",(function(){return X})),n.d(a,"changeUserInfo",(function(){return Z})),n.d(a,"changeCurrentVisitingUserPage",(function(){return ee})),n.d(a,"userCenterError",(function(){return te})),n.d(a,"changeUserFavoriteBoards",(function(){return ne})),n.d(a,"changeUserRecentTopics",(function(){return ae})),n.d(a,"changeUserRecentPosts",(function(){return re})),n.d(a,"changeUserHotPosts",(function(){return oe})),n.d(a,"changeUserFavoritePosts",(function(){return se})),n.d(a,"changeUserFansInfo",(function(){return ie})),n.d(a,"changeUserFollowingsInfo",(function(){return ce})),n.d(a,"changeUserCenterPage",(function(){return le})),n.d(a,"followUser",(function(){return ue})),n.d(a,"unfollowUser",(function(){return me})),n.d(a,"userCenterTransferWealthSuccess",(function(){return pe}));var r={};n.r(r),n.d(r,"throwError",(function(){return de})),n.d(r,"solveError",(function(){return he}));var o={};n.r(o),n.d(o,"changeMessageCount",(function(){return fe}));var s={};n.r(s),n.d(s,"LogOut",(function(){return ln})),n.d(s,"TopicDeleted",(function(){return un})),n.d(s,"Disconnected",(function(){return mn})),n.d(s,"UnauthorizedBoard",(function(){return pn})),n.d(s,"UnauthorizedTopic",(function(){return dn})),n.d(s,"UnauthorizedOperation",(function(){return hn})),n.d(s,"NotFoundBoard",(function(){return fn})),n.d(s,"NotFoundTopic",(function(){return gn})),n.d(s,"CannotPost",(function(){return bn})),n.d(s,"NotFoundUser",(function(){return vn})),n.d(s,"ServerError",(function(){return yn})),n.d(s,"ContentNeeded",(function(){return En})),n.d(s,"OperationForbidden",(function(){return In})),n.d(s,"PageNotFound",(function(){return Cn})),n.d(s,"TooFrequentSearch",(function(){return wn}));var i=n(2),c=(n(549),n(551),n(0)),l=n.n(c),u=n(7),m=n(514),p=n.n(m),d=n(200),h=n(151),f=n(524),g="USER_LOG_ON",b="USER_LOG_OFF",v="CHANGE_USERINFO",y="CHANGE_VISITING_USER",E="CHANGE_USER_FAVORITE_BOARDS",I="CHANGE_USER_FAVORITE_POSTS",C="CHANGE_USER_FANS_INFO",w="CHANGE_USER_FOLLOWINGS_INFO",N="CHANGE_USER_RECENT_TOPICS",O="CHANGE_USER_RECENT_POSTS",j="CHANGE_USER_HOT_POSTS",T="CHNAGE_USER_CENTER_PAGE",S="USER_NOT_FOUND",k="USER_CENTER_LOADING",x="USER_CENTER_LOADED",P="USER_CENTER_FETCH_ERROR",U="USER_CENTER_SOLVE_ERROR",M="USER_CENTER_PAGE_LOAD_UNFINISH",_="USER_CENTER_PAGE_LOAD_FINISH",R="USER_CENTER_FOLLOW_USER",D="USER_CENTER_UNFOLLOW_USER",L="USER_CENTER_TRANSFER_WEALTH_SUCCESS",F="THROW_ERROR",B="SOLVE_ERROR",A="CHANGE_MESSAGE_COUNT";function z(e,t){return t||function(){return{type:e}}}var V,H,W=z(g),Y=z(b),q=z(M),J=z(S),G=z(k),Q=z(x),K=z(U),X=z(_,(function(e){return{type:_,payload:{totalPage:e}}})),Z=z(v,(function(e){return{type:v,payload:{newInfo:e}}})),ee=z(y,(function(e,t){return void 0===e&&(e="exact"),{type:y,payload:{page:e,id:t}}})),te=z(P,(function(e){return{type:P,payload:{message:e}}})),ne=z(E,(function(e){return{type:E,payload:{boardsInfo:e}}})),ae=z(N,(function(e){return{type:N,payload:{posts:e}}})),re=z(O,(function(e){return{type:O,payload:e}})),oe=z(j,(function(e){return{type:j,payload:e}})),se=z(I,(function(e){return{type:I,payload:{posts:e}}})),ie=z(C,(function(e){return{type:C,payload:{fansInfo:e}}})),ce=z(w,(function(e){return{type:w,payload:{followingsInfo:e}}})),le=z(T,(function(e){return{type:T,payload:{page:e}}})),ue=z(R,(function(e){return{type:R,payload:{userId:e}}})),me=z(D,(function(e){return{type:D,payload:{userId:e}}})),pe=z(L,(function(e){return{type:L,payload:{userNames:e}}})),de=z(F,(function(e){return{type:F,payload:{message:e}}})),he=z(B),fe=z(A,(function(e){return{type:A,payload:{message:e}}})),ge=function(){this.isError=!1,this.errorMessage=""},be=n(257),ve=n(11),ye=function(){this.isInQuote=!1,this.islastQuote=!1,this.imageCount=0},Ee=function(){function e(e,t){this._engine=e,this._options=t}return Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._engine.data},enumerable:!1,configurable:!0}),e}(),Ie=function(){this.autoDetectUrl=!0,this.allowExternalUrl=!0,this.allowImage=!0,this.allowExternalImage=!0,this.allowToolbox=!1,this.allowMediaContent=!0,this.allowAutoPlay=!0,this.allowEmotion=!0,this.compatibility=V.Recommended,this.allowMarkDown=!0,this.maxImageCount=1/0};!function(e){e[e.Transitional=0]="Transitional",e[e.Recommended=1]="Recommended",e[e.EnforceMorden=2]="EnforceMorden"}(V||(V={})),function(e){e[e.String=0]="String",e[e.ItemSeperator=1]="ItemSeperator",e[e.NameValueSeperator=2]="NameValueSeperator"}(H||(H={}));var Ce,we=function(){function e(e,t){this.type=e,this.value=t}return e.stringValue=function(t){return new e(H.String,t)},e.itemSeperator=new e(H.ItemSeperator,null),e.nameValueSeperator=new e(H.NameValueSeperator,null),e}();!function(e){e[e.Text=0]="Text",e[e.Tag=1]="Tag"}(Ce||(Ce={}));var Ne,Oe=function(){function e(e){this._parent=e}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),e}(),je=function(e){function t(t,n){var a=e.call(this,n)||this;return a._text=t,a}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return Ce.Text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!1,configurable:!0}),t.prototype.clone=function(e){return new t(this._text,e)},t}(Oe),Te=function(e){function t(t,n){var a=e.call(this,n)||this;return a._isClosed=!1,a._subSegments=[],a._tagData=t,a}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return Ce.Tag},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClosed",{get:function(){return this._isClosed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagData",{get:function(){return this._tagData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subSegments",{get:function(){return this._subSegments},enumerable:!1,configurable:!0}),t.forceClose=function(e,n){if(e.type===Ce.Text)n._subSegments.push(e.clone(n));else{var a=e;if(a.isClosed)n._subSegments.push(e.clone(n));else{console.warn("标签 %s 没有正确关闭，已经被转换为纯文字。",a.tagData.tagName),n._subSegments.push(new je(a.tagData.startTagString,e.parent));for(var r=0,o=a._subSegments;r<o.length;r++){var s=o[r];t.forceClose(s,n)}}}},t.prototype.close=function(){var e=this._subSegments;this._subSegments=[];for(var n=0,a=e;n<a.length;n++){var r=a[n];t.forceClose(r,this)}this._isClosed=!0},t.prototype.clone=function(e){var n=new t(this._tagData,e);n._content=this._content,n._isClosed=this._isClosed;for(var a=0,r=this._subSegments;a<r.length;a++){var o=r[a];n._subSegments.push(o.clone(n))}return n},t.prototype.getContentText=function(){for(var e=[],t=0,n=this._subSegments;t<n.length;t++){var a=n[t];a.type===Ce.Text?e.push(a.text):e.push(a.getFullText())}return e.join("")},t.prototype.getFullText=function(){return this.tagData.startTagString+this.getContentText()+this.tagData.endTagString},t}(Oe),Se=function(){function e(e,t){if(!t)throw new Error("参数不能为空。");this._originalString=e,this._parameters=t,this._namedParameters={};for(var n=0,a=t;n<a.length;n++){var r=a[n];r.name&&(this._namedParameters[r.name]=r.value)}}return Object.defineProperty(e.prototype,"orignalString",{get:function(){return this._originalString},enumerable:!1,configurable:!0}),e.parse=function(t){if(!t)return null;var n=function(e){var t=0;function n(n){function a(n){var a=e[t],r=e.indexOf(n,t+1);r<0&&(console.error("UBB: 解析标签字符串 %s 时无法找到位置 %d 处 %s 对应的结束字符串。",e,t,a),r=e.length);var o=t+1;return t=r+1,e.substring(o,r)}for(;;){if(t>=e.length)return null;var r=e[t];if(!/\s/i.test(r)){if(","===r)return t++,we.itemSeperator;if("="===r)return t++,we.nameValueSeperator;if('"'===r||"'"===r)return we.stringValue(a(r));var o=t,s=n===H.ItemSeperator?/[=,]/i:/,/i,i=e.substring(t+1).match(s);if(i){var c=i.index+t+1;return t=c,we.stringValue(e.substring(o,c))}return t=e.length,we.stringValue(e.substring(o))}t++}}var a=[],r=H.ItemSeperator;for(;;){var o=n(r);if(!o)break;a.push(o),r=o.type}return a}(t);if(0===n.length)return null;var a=function(e){var n=[];if(!e||0===e.length)return console.error("UBB: 无法将标签字符串 %s 解析为参数的集合。",t),n;for(var a=null,r=null,o=H.ItemSeperator,s=0,i=e;s<i.length;s++){var c=i[s];switch(c.type){case H.ItemSeperator:n.push(new ke(a,r)),a=null,r=null,o=H.ItemSeperator;break;case H.NameValueSeperator:if(o!==H.String)throw new Error("名称值分隔符只能出现在值之后。");a=r,r=null,o=H.NameValueSeperator;break;default:if(o===H.String)throw new Error("不能连续出现多个值。");r=c.value,o=H.String}}n.push(new ke(a,r)),n[0].name||(n[0]=new ke(n[0].value,null));return n}(n);return new e(t,a)},Object.defineProperty(e.prototype,"tagName",{get:function(){return this._parameters[0].name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTagString",{get:function(){return"[".concat(this.orignalString,"]")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTagString",{get:function(){return"[/".concat(this.tagName,"]")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mainValue",{get:function(){return this._parameters[0].value},enumerable:!1,configurable:!0}),e.prototype.value=function(e){if("number"==typeof e)return this._parameters[e].value;if("string"==typeof e)return this._namedParameters[e];throw new Error("参数必须是字符串或者数字。")},e.prototype.name=function(e){return this._parameters[e].name},Object.defineProperty(e.prototype,"parameterCount",{get:function(){return this._parameters.length},enumerable:!1,configurable:!0}),e.prototype.parameter=function(e){return this._parameters[e]},e}(),ke=function(){function e(e,t){this._name=e,this._value=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),e}();!function(e){e[e.Recursive=0]="Recursive",e[e.Text=1]="Text",e[e.Empty=2]="Empty"}(Ne||(Ne={}));var xe,Pe=function(){},Ue=function(){function e(){}return e.prototype.getTagMode=function(e){return Ne.Recursive},e.renderTagAsString=function(e,t){return[e.startTagString,t,e.endTagString]},e}(),Me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.exec=function(e,t){return this.execCore(e.getContentText(),e.tagData,t)},t}(Ue),_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.exec=function(e,t){for(var n=[],a=0,r=e.subSegments;a<r.length;a++){var o=r[a];n.push(t.engine.execSegment(o,t))}return this.execCore(n,e.tagData,t)},t}(Ue),Re=function(){function e(){this._namedTagHandlerList={},this._unnamedTagHanlderList=[],this._textHandlers=[]}return Object.defineProperty(e.prototype,"textHandlers",{get:function(){return this._textHandlers},enumerable:!1,configurable:!0}),e.prototype.getHandler=function(e){var t=this._namedTagHandlerList[e];if(t)return t;for(var n=0,a=this._unnamedTagHanlderList;n<a.length;n++){var r=a[n];if(r.supportedTagNames.test(e))return r}return null},e.prototype.register=function(e){this.registerInstance(new e)},e.prototype.registerInstance=function(e){if(!e||!e.supportedTagNames)throw new Error("参数 tagHandler 无效，或者未提供正确的标签名称。");"string"==typeof e.supportedTagNames?this.registerNamedCore([e.supportedTagNames],e):e.supportedTagNames instanceof Array?this.registerNamedCore(e.supportedTagNames,e):this.registerUnnamedCore(e)},e.prototype.registerText=function(e){this.registerTextInstance(new e)},e.prototype.registerTextInstance=function(e){if(!e)throw new Error("参数 textHandler 无效。");this._textHandlers.push(e)},e.prototype.registerNamedCore=function(e,t){for(var n=0,a=e;n<a.length;n++){var r=a[n];r in this._namedTagHandlerList?console.error("标签 %s 的处理程序已经被注册。",r):this._namedTagHandlerList[r]=t}},e.prototype.registerUnnamedCore=function(e){this._unnamedTagHanlderList.push(e)},e}(),De=function(){function e(){this._handlers=new Re,this._data=new ye}return Object.defineProperty(e.prototype,"handlers",{get:function(){return this._handlers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),e.prototype.getHandler=function(e){return this._handlers.getHandler(e)},e.prototype.exec=function(e,t){var n=new Ee(this,t);return this.execCore(e,n)},e.tryHandleEndTag=function(e,t){for(var n=t;n&&n.tagData;){if(n.tagData.tagName===e)return n.close(),n.parent;n=n.parent}return console.warn("UBB: 找不到结束标签 %s 的开始标签，该标签将被作为一般文字处理。",e),t.subSegments.push(new je("[/".concat(e,"]"),t)),t},e.prototype.buildSegmentsCore=function(t,n){for(var a={lastIndex:0,exec:function(e){var t=this.lastIndex,n=e.indexOf("[",t);if(-1===n)return null;var a=e.indexOf("]",n);return-1===a?null:(this.lastIndex=a+1,[e.slice(t,n),e.slice(n+1,a)])}};;){var r=a.lastIndex,o=a.exec(t);if(!o){var s=t.substring(r);return void(s&&n.subSegments.push(new je(s,n)))}var i=o[0],c=o[1];i&&n.subSegments.push(new je(i,n));var l=c.match(/^\/(.+)$/i);if(l){var u=l[1];n=e.tryHandleEndTag(u,n)}else try{var m=Se.parse(c),p=this._handlers.getHandler(m.tagName);if(!p){console.warn("UBB: 标签字符串 %s 中给定的标签名 %s 没有有效的处理程序，将被视为一般文字",c,m.tagName),n.subSegments.push(new je(m.startTagString,n));continue}switch(p.getTagMode(m)){case Ne.Recursive:var d=new Te(m,n);n.subSegments.push(d),n=d;break;case Ne.Text:var h=t.indexOf(m.endTagString,a.lastIndex);if(-1===h)console.warn("UBB: 找不到标签字符串 %s 对应的结束标签，该内容将被视为一般文字。",m.startTagString),n.subSegments.push(new je(m.startTagString,n));else{var f=t.substring(a.lastIndex,h),g=new Te(m,n);n.subSegments.push(g),n=g;var b=new je(f,g);g.subSegments.push(b),g.close(),a.lastIndex=h+m.endTagString.length}break;case Ne.Empty:var v=new Te(m,n);n.subSegments.push(v),v.close(),t.startsWith(m.endTagString,a.lastIndex)&&(a.lastIndex+=m.endTagString.length);break;default:throw new Error("UBB: 标签 ".concat(m.tagName," 的处理程序发生错误"))}}catch(y){console.warn("UBB: 标签字符串 %s 解析失败，将被视为普通文字。",c),n.subSegments.push(new je("[".concat(c,"]"),n))}}},e.prototype.execCore=function(e,t){var n=new Te(null,null);this.buildSegmentsCore(e,n),n.close();for(var a=[],r=0,o=n.subSegments;r<o.length;r++){var s=o[r];a.push(this.execSegment(s,t))}return a},e.prototype.execTextCore=function(e,t){for(var n=0,a=this.handlers.textHandlers;n<a.length;n++){var r=a[n],o=e.match(r.supportedContent);if(o){var s=e.substr(0,o.index),i=e.substr(o.index+o[0].length),c=[];return s&&c.push(this.execTextCore(s,t)),c.push(r.exec(o,t)),i&&c.push(this.execTextCore(i,t)),c}}return e},e.prototype.execText=function(e,t){return this.execTextCore(e,t)},e.prototype.execSegment=function(e,t){if(e.type===Ce.Text){var n=e.text;return this.execText(n,t)}var a=e,r=this.getHandler(a.tagData.tagName);return r?r.exec(a,t):(console.warn("没有找到标签 %s 的处理程序，将被视为一般文字。",a.tagData.tagName),a.getFullText())},e}(),Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"noubb"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return n.options.compatibility!==V.Transitional?c.createElement("code",null,e):c.createElement("span",null,e)},t}(Me),Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"b"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return c.createElement("span",{style:{fontWeight:"bold"}},e)},t}(_e),Be=n(345),Ae=n.n(Be),ze=n(238),Ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"img"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a=e,r=t.value("title"),o=parseInt(t.value("img")),s=n.options,i=s.allowImage,l=s.allowExternalImage,u=s.allowToolbox;return l||proxyLoc(ze(a)).hostname.includes("cc98.org")||(i=!1),!i||n.data.imageCount>=n.options.maxImageCount?c.createElement("p",null,"签名档禁止使用外链图片"):(n.data.imageCount+=1,n.options.compatibility===V.EnforceMorden?1===o?c.createElement(He,{imageUri:a,title:r,isShowed:!1,allowToolbox:u}):c.createElement("figure",null,c.createElement(He,{imageUri:a,title:r,isShowed:!0,allowToolbox:u}),c.createElement("figcaption",null,r)):1===o?c.createElement(He,{imageUri:a,title:r,isShowed:!1,allowToolbox:u}):c.createElement(He,{imageUri:a,title:r,isShowed:!0,allowToolbox:u}))},t}(Me),He=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleIsShowed=function(){n.setState((function(e){return{isShowed:!e.isShowed}}))},n.toggleToolbox=function(e){n.setState((function(){return{isToolboxOn:e}}))},n.state={isShowed:n.props.isShowed,isToolboxOn:!1,neverShowToolbox:!1,rotate:0},n}return Object(i.c)(t,e),t.prototype.rotateImage=function(e){this.setState((function(t){return{rotate:t.rotate+e}}))},t.prototype.render=function(){var e=this,t={height:300,once:!0,offset:100};if(this.state.isShowed){if(!0===this.props.allowToolbox&&!1===this.state.neverShowToolbox){var n=null;return n=this.state.isToolboxOn?c.createElement("div",{className:"ubb-image-toolbox"},c.createElement("button",{onClick:function(){return e.rotateImage(90)}},c.createElement("i",{className:"fa fa-rotate-right"})),c.createElement("button",{onClick:function(){return e.rotateImage(-90)}},c.createElement("i",{className:"fa fa-rotate-left"})),c.createElement("button",{onClick:function(){return window.open(e.props.imageUri)}},c.createElement("i",{className:"fa fa-search-plus"})),c.createElement("button",{onClick:this.toggleIsShowed},c.createElement("i",{className:"fa fa-eye-slash"})),c.createElement("button",{onClick:function(){return e.setState({neverShowToolbox:!0})}},c.createElement("i",{className:"fa fa-close"}))):null,c.createElement("div",{onMouseLeave:function(){return e.toggleToolbox(!1)},onMouseEnter:function(){return e.toggleToolbox(!0)}},c.createElement("div",{className:"visibleImage",onClick:this.toggleIsShowed}),n,c.createElement(Ae.a,Object(i.a)({},t),c.createElement("img",{style:{maxWidth:"100%",transform:"rotate(".concat(this.state.rotate,"deg)")},src:this.props.imageUri,alt:this.props.title})))}return c.createElement(Ae.a,Object(i.a)({},t),c.createElement("img",{style:{maxWidth:"100%"},src:this.props.imageUri,alt:this.props.title}))}return c.createElement("div",{className:"hiddenImage",onClick:this.toggleIsShowed},"点击查看图片")},t}(c.Component),$e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"i"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return c.createElement("i",null,e)},t}(_e),We=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"size"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a=parseInt(t.value("size"));if(isNaN(a)||a<=0)return e;a=a>7?3.5:a/2;var r={fontSize:"".concat(a/=1.5,"rem")};return c.createElement("span",{style:r},e)},t}(_e),Ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return["quote","quotex"]},enumerable:!1,configurable:!0}),t.prototype.exec=function(t,n){var a=this;if(n.data.isInQuote)return e.prototype.exec.call(this,t,n);n.data.isInQuote=!0;var r,o,s=function(e){if(e.type===Ce.Tag){var t=e.tagData.tagName;return-1!==a.supportedTagNames.indexOf(t)}return!1},i=[t],l=t;do{r=!1;for(var u=l.subSegments,m=0,p=u;m<p.length;m++){var d=p[m];if(s(d))l=u.splice(u.indexOf(d),1)[0],i.push(l),r=!0}}while(r);if(i.length>1){i.reverse(),i[0].subSegments.splice(1,0,new je("\n",i[0]));for(var h=1;h<i.length;h++)if((o=i[h].subSegments)[0]&&o[0].type===Ce.Tag&&o[0].subSegments[0]&&o[0].subSegments[0].type===Ce.Text&&0===o[0].subSegments[0].text.indexOf("以下是引用")&&o.slice(1,o.length).every((function(e){return e.type===Ce.Text&&!e.text.match(/\S/)}))){var f=i[h].subSegments.shift().clone(i[h-1]);i[h-1].subSegments.unshift(f),i[h-1].subSegments.splice(1,0,new je("\n",i[h-1])),i.splice(h,1),h--}}var g=i.map((function(e,t){return t===i.length-1?n.data.islastQuote=!0:n.data.islastQuote=!1,n.engine.execSegment(e,n)}));return n.data.isInQuote=!1,c.createElement(qe,{quoteItems:g})},t.prototype.execCore=function(e,t,n){var a={position:"relative",boxSizing:"border-box",width:"100%",padding:"10px 0 10px 0",borderBottom:"1px solid rgb(204,204,204)",overflowY:"hidden"};return n.data.islastQuote&&(a.borderBottom=null),c.createElement("div",{style:a},e)},t}(_e),qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isShowed:t.props.quoteItems.length<=2},t}return Object(i.c)(t,e),t.prototype.showButtonClick=function(){this.setState({isShowed:!0})},t.prototype.render=function(){var e=c.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"14px 0",borderBottom:"1px solid rgb(204,204,204)"}},c.createElement("button",{style:{width:"auto",marginTop:0,alignSelf:"center"},className:"hiddenImage",type:"button",onClick:this.showButtonClick.bind(this)},"展开剩余引用")),t=this.state.isShowed,n=this.props.quoteItems,a=t?n:n.slice(n.length-2);return c.createElement("div",{style:{backgroundColor:"#F5FAFF",border:"1px solid rgb(204,204,204)",padding:"0 17px 0 17px",maxHeight:"800px",overflowY:"auto"}},!t&&e,a)},t}(c.PureComponent),Je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"color"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a={color:t.value("color")};return c.createElement("span",{style:a},e)},t}(_e),Ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"url"},enumerable:!1,configurable:!0}),t.isSafe=function(e){return-1===[" ","javascript:","data:"].indexOf(proxyLoc(e).protocol)},t.prototype.execCore=function(e,n,a){var r=ze(n.value("url")||e,{});return t.isSafe(r)?!1===a.options.allowExternalUrl&&"www.cc98.org"!==proxyLoc(r).host&&"cc98.zju.edu.cn"!==proxyLoc(r).host&&""!==proxyLoc(r).host?e:c.createElement("a",{href:proxyLoc(r).href,target:"_blank",className:"urlStyle"},e):e},t}(_e),Qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"u"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return n.options.compatibility===V.EnforceMorden?c.createElement("span",{style:{textDecoration:"underline"}},e):c.createElement("u",null,e)},t}(_e),Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"del"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return c.createElement("span",{style:{textDecoration:"line-through"}},e)},t}(_e),Xe=n(392),Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return["mp3","audio"]},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){if(!1===n.options.allowMediaContent)return e;var a=t.value("title");return c.createElement(et,{src:e,title:a})},t}(Me),et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){try{this.ap=new Xe({element:this.div,autoplay:!1,preload:"metadata",music:{url:encodeURI(this.props.src),title:this.props.title?this.props.title:encodeURI(this.props.src),author:"",pic:"/static/images/audio_cover.png"}}),this.div.getElementsByClassName("aplayer-author")[0].innerHTML=""}catch(e){}},t.prototype.componentWillUnmount=function(){this.ap&&this.ap.destroy()},t.prototype.render=function(){var e=this;return c.createElement("div",{className:"aplayer",style:{whiteSpace:"normal",width:"30rem"},ref:function(t){return e.div=t}})},t}(c.Component),tt=n(764),nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"video"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return!1===n.options.allowMediaContent?e:c.createElement(at,{src:e})},t}(Me),at=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dp=null,t.state={height:"28.8984375rem"},t.initPlayer=function(e){try{t.dp=new tt({element:t.div,autoplay:!1,preload:"metadata",video:{url:encodeURI(t.props.src),type:e}})}catch(n){}t.dp&&(t.dp.on("abort",(function(e){return null})),t.dp.on("fullscreen",(function(e){return t.setState({height:"auto"})})),t.dp.on("fullscreen_cancel",(function(e){return t.setState({height:"28.8984375rem"})})),t.dp.on("webfullscreen",(function(e){return t.setState({height:"100%"})})),t.dp.on("webfullscreen_cancel",(function(e){return t.setState({height:"28.8984375rem"})})),t.div.getElementsByClassName("dplayer-menu")[0].innerHTML='<div class="dplayer-menu-item"><a target="_blank" href="https://github.com/MoePlayer/DPlayer">关于 DPlayer 播放器</a></div>')},t}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){var e=this;if(this.props.src.match(/\.m3u8$/))try{new Hls,this.initPlayer("hls")}catch(n){var t=document.createElement("script");t.src="/static/content/hls.min.js",document.getElementsByTagName("head")[0].appendChild(t),t.onload=function(){e.initPlayer("hls")}}else this.initPlayer()},t.prototype.componentWillUnmount=function(){this.dp&&(this.dp.destroy(),this.div.innerHTML="")},t.prototype.render=function(){var e=this;return c.createElement("div",{style:{display:"flex"}},c.createElement("div",{className:"dplayer",style:{whiteSpace:"normal",height:this.state.height},ref:function(t){return e.div=t}}))},t}(c.Component),rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"cursor"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a={cursor:t.value("cursor")};return c.createElement("span",{style:a},e)},t}(_e),ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"english"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return c.createElement("span",{style:{fontFamily:"Arial"}},e)},t}(_e),st=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"user"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a=e;return c.createElement("a",{href:"/user/name".concat(encodeURI(a)),style:{cursor:"pointer"}},a)},t}(Me),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"code"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){for(var a=e.split("\n");!a[0]&&a.length>0;)a.shift();for(;!a[a.length-1]&&a.length>0;)a.pop();var r=a.map((function(e,t){return c.createElement("li",null,e)}));return c.createElement("div",{className:"ubb-code"},c.createElement("ol",null,r))},t}(Me),ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"font"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a={fontFamily:t.value("font")};return c.createElement("span",{style:a},e)},t}(_e),lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"align"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a={textAlign:t.value("align")};return c.createElement("span",{style:a},c.createElement("div",null,e))},t}(_e),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"upload"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a,r=e,o=t.value(0),s=n.options.allowToolbox;switch(1===t.parameterCount&&(a=0),2===t.parameterCount&&(a=parseInt(t.value(1))),o){case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"webp":return n.options.allowImage?n.options.compatibility===V.EnforceMorden?1===a?c.createElement(He,{imageUri:r,title:"upload图片",isShowed:!1,allowToolbox:s}):c.createElement("figure",null,c.createElement(He,{imageUri:r,title:"upload图片",isShowed:!0,allowToolbox:s}),c.createElement("figcaption",null,"upload图片")):1===a?c.createElement(He,{imageUri:r,title:"upload图片",isShowed:!1,allowToolbox:s}):c.createElement(He,{imageUri:r,title:"upload图片",isShowed:!0,allowToolbox:s}):c.createElement("a",{href:r},r);default:return c.createElement("a",{className:"download-file",href:r},"点击下载文件")}},t}(Me),mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"left"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return c.createElement("span",{style:{textAlign:"left"}},c.createElement("div",null,e))},t}(_e),pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"center"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return c.createElement("span",{style:{textAlign:"center"}},c.createElement("div",null,e))},t}(_e),dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"right"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return c.createElement("span",{style:{textAlign:"right"}},c.createElement("div",null,e))},t}(_e),ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"table"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return c.createElement("table",{className:"UBBTableTag"},e)},t}(_e),ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"td"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a=1,r=1;return 2===t.parameterCount&&(a=parseInt(t.value(0)),r=parseInt(t.value(1))),c.createElement("td",{rowSpan:a,colSpan:r},e)},t}(_e),gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"th"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a=1,r=1;return 2===t.parameterCount&&(a=parseInt(t.value(0)),r=parseInt(t.value(1))),c.createElement("th",{rowSpan:a,colSpan:r},e)},t}(_e),bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"tr"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){return c.createElement("tr",null,e)},t}(_e),vt=n(346),yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"topic"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a,r=e;t.value(0);1===t.parameterCount&&(a=parseInt(t.value(0))),2===t.parameterCount&&(a=parseInt(t.value(1)));var o="/topic/".concat(a);return c.createElement(vt.a,{to:o},r)},t}(_e),Et=n(394),It=n(415),Ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"md"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a=e;return n.options.allowMarkDown?c.createElement(wt,{content:a}):c.createElement("div",null,a)},t}(Me),wt=function(e){function t(t,n){var a=e.call(this,t,n)||this,r=Math.floor(1e6*Math.random());return a.state={divid:"Markdown".concat(r)},a}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props.content.replace(/\n>[\s\S]*?\n\n/g,(function(e){return e.replace(/\n[^\n](?!>)/g,(function(e){return e.replace(/\n(?!>)/,"\n>")}))}));if(">"===e[0]){var t=e.indexOf("\n\n");if(-1===t)e=e.replace(/\n[^\n](?!>)/g,(function(e){return e.replace(/\n(?!>)/,"\n>")}));else{var n=e.substr(0,t);e=n.replace(/\n[^\n](?!>)/g,(function(e){return e.replace(/\n(?!>)/,"\n>")}))+e.substr(t+1,e.length)}}return e=e.replace(/发言：\*\*\n/g,"发言：**\n\n"),c.createElement("div",{id:this.state.divid,style:{maxWidth:"80%",overflow:"hidden"}},Et().use(It).processSync(e).contents)},t}(c.Component),Nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"pm"},enumerable:!1,configurable:!0}),t.prototype.execCore=function(e,t,n){var a=t.value(0),r="/message/message?name=".concat(a);return c.createElement(vt.a,{to:r},e)},t}(_e),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"bili"},enumerable:!1,configurable:!0}),t.prototype.getBiliPage=function(e){for(var t=e.split("?")[1],n=t?t.split("&"):"",a=0;a<n.length;a++){var r=n[a].split("=");if("p"==r[0])return r[1]}return"1"},t.prototype.execCore=function(e,t,n){if(!1===n.options.allowMediaContent)return e;var a=parseInt(t.value("bili"))||1,r="",o=/^\d+$/.test(e),s=/^BV[A-Za-z0-9]+/.test(e),l=/(https?:\/\/)?www.bilibili.com\/video\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/.test(e);if(o)r="https://player.bilibili.com/player.html?aid=".concat(e,"&page=").concat(a,"&autoplay=0&poster=1");else if(s)r="https://player.bilibili.com/player.html?bvid=".concat(e,"&page=").concat(a,"&autoplay=0&poster=1");else{if(!l)return e;var u=/^(https?:\/\/)?www\.bilibili\.com\/video\/av[0-9]+/.test(e),m=/^(https?:\/\/)?www\.bilibili\.com\/video\/BV[0-9A-Za-z]+/.test(e),p=this.getBiliPage(e);if(u){var d=e.split("bilibili.com/video/av")[1].split("?")[0].split("/")[0];r="https://player.bilibili.com/player.html?aid=".concat(d,"&page=").concat(p,"&autoplay=0&poster=1")}else{if(!m)return e;var h=e.split("bilibili.com/video/")[1].split("?")[0].split("/")[0];r="https://player.bilibili.com/player.html?bvid=".concat(h,"&page=").concat(p,"&autoplay=0&poster=1")}}return c.createElement("div",null,c.createElement("iframe",Object(i.a)({},{border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true"},{src:r,allowfullscreen:"allowfullscreen",style:{border:"none"},width:"640",height:"480",scrolling:"no"})))},t}(Me),jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return"line"},enumerable:!1,configurable:!0}),t.prototype.getTagMode=function(e){return Ne.Empty},t.prototype.execCore=function(e,t,n){return c.createElement("hr",null)},t}(_e),Tt=jt,St=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return/em\d{2}/i},enumerable:!1,configurable:!0}),t.prototype.getTagMode=function(e){return Ne.Empty},t.prototype.execCore=function(e,t,n){var a=t.tagName.match(/\d{2}/).toString(),r="/static/images/em/em".concat(a,".gif");return n.options.allowEmotion?c.createElement("div",{style:{display:"inline"}},c.createElement("img",{src:r,alt:""}),e):c.createElement("div",{style:{display:"inline"}},e)},t}(_e),kt=St,xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return/ac\d{2}/i},enumerable:!1,configurable:!0}),t.prototype.getTagMode=function(e){return Ne.Empty},t.prototype.execCore=function(e,t,n){var a=t.tagName.replace(/ac/gi,""),r="/static/images/ac/".concat(a,".png");return n.options.allowEmotion?c.createElement("div",{style:{display:"inline"}},c.createElement("img",{src:r,alt:""}),e):c.createElement("div",{style:{display:"inline"}},e)},t}(_e),Pt=xt,Ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return/[acf]:/i},enumerable:!1,configurable:!0}),t.prototype.getTagMode=function(e){return Ne.Empty},t.prototype.getAnimalUrl=function(e){return"/static/images/mahjong/animal2017/".concat(e,".png")},t.prototype.getCartoonUrl=function(e){switch(e){case"018":case"049":case"096":return"/static/images/mahjong/carton2017/".concat(e,".gif");default:return"/static/images/mahjong/carton2017/".concat(e,".png")}},t.prototype.getFaceUrl=function(e){switch(e){case"004":case"009":case"056":case"061":case"062":case"087":case"115":case"120":case"137":case"168":case"169":case"175":case"206":return"/static/images/mahjong/face2017/".concat(e,".gif");default:return"/static/images/mahjong/face2017/".concat(e,".png")}},t.prototype.execCore=function(e,t,n){var a=t.tagName,r=a.match(/[acf]/gi)[0],o=a.replace(r+":",""),s="";switch(r){case"a":s=this.getAnimalUrl(o);break;case"c":s=this.getCartoonUrl(o);break;case"f":s=this.getFaceUrl(o)}return c.createElement("div",{style:{display:"inline"}},c.createElement("img",{src:s,alt:""}),e)},t}(_e),Mt=Ut,_t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return/tb\d{2}/i},enumerable:!1,configurable:!0}),t.prototype.getTagMode=function(e){return Ne.Empty},t.prototype.execCore=function(e,t,n){var a=t.tagName.match(/\d{2}/).toString(),r="/static/images/tb/tb".concat(a,".png");return c.createElement("div",{style:{display:"inline"}},c.createElement("img",{src:r,alt:""}),e)},t}(_e),Rt=_t,Dt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pattern=/(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/i,t}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedContent",{get:function(){return this._pattern},enumerable:!1,configurable:!0}),t.prototype.exec=function(e,t){var n=e[0];return t.options.autoDetectUrl?c.createElement("a",{href:n,target:"_blank",className:"urlStyle"},n):n},t}(Pe),Lt=Dt,Ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pattern=/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]\.(com|org|cn|net|cc|xyz|top|club|shop|xin|wang|vip|ink|link|tv|work|me|info|mobi|online|site|tech|ren|pro|ltd|fun|kim|red|group|store|biz|name|wiki|game|help|co|so|hk|tel|asia|lol|studio|design|live|lawyer|software|band|press|space|website|date|trade|party|win|video|news|pw|photo|pub|click|loan|bid|moe)/i,t}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedContent",{get:function(){return this._pattern},enumerable:!1,configurable:!0}),t.prototype.exec=function(e,t){var n=e[0];return t.options.autoDetectUrl?c.createElement("a",{href:"http://".concat(n),target:"_blank",className:"urlStyle"},n):n},t}(Pe),Bt=Ft;!function(e){e[e.Info=0]="Info",e[e.Success=1]="Success",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(xe||(xe={}));var At=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e;switch(this.props.messageType){case xe.Success:e={backgroundColor:"#F5FAFF",border:"1px solid rgb(204,204,204)",padding:"10px 17px",color:"darkgreen",margin:"6px 0"};break;case xe.Info:e={backgroundColor:"#F5FAFF",border:"1px solid rgb(204,204,204)",padding:"10px 17px",color:"darkblue",margin:"6px 0"};break;default:e={backgroundColor:"#F5FAFF",border:"1px solid rgb(204,204,204)",padding:"10px 17px",color:"red",margin:"6px 0"}}return c.createElement("div",null,c.createElement("div",{style:e},this.props.message))},t}(c.Component),zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.getTagMode=function(e){return Ne.Empty},t.prototype.execCore=function(e,t,n){if(!this.messageSettings)throw new Error("没有为标签 ".concat(t.tagName," 配置必要的消息信息。"));var a=parseInt(t.mainValue);if(isNaN(a)&&(a=0),a>=this.messageSettings.length||a<0)throw new Error("标签 ".concat(t.tagName," 配置的消息参数 ").concat(a," 无效，该标签最多支持 ").concat(this.messageSettings.length," 种消息模式。"));var r=this.messageSettings[a];return c.createElement(At,{message:r.message,messageType:r.messageType})},t}(_e),Vt=zt,Ht=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.supportedTagNames="needreply",t.messageSettings=[{message:"该内容需要回复后才能浏览",messageType:xe.Warning}],t}return Object(i.c)(t,e),t}(Vt),$t=Ht,Wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return/ms\d{2}/i},enumerable:!1,configurable:!0}),t.prototype.getTagMode=function(e){return Ne.Empty},t.prototype.execCore=function(e,t,n){var a=t.tagName.replace(/ms/gi,""),r="/static/images/ms/ms".concat(a,".png");return n.options.allowEmotion?c.createElement("div",{style:{display:"inline"}},c.createElement("img",{src:r,alt:""}),e):c.createElement("div",{style:{display:"inline"}},e)},t}(_e),Yt=Wt,qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"supportedTagNames",{get:function(){return/CC98\d{2}/i},enumerable:!1,configurable:!0}),t.prototype.getTagMode=function(e){return Ne.Empty},t.prototype.execCore=function(e,t,n){var a=t.tagName.replace(/CC98/gi,""),r="/static/images/CC98/CC98".concat(a,".gif");return Number(a)>14&&Number(a)<31&&(r="/static/images/CC98/CC98".concat(a,".png")),Number(a)>35&&(r="/static/images/CC98/CC98".concat(a,".png")),n.options.allowEmotion?c.createElement("div",{style:{display:"inline"}},c.createElement("img",{src:r,alt:""}),e):c.createElement("div",{style:{display:"inline"}},e)},t}(_e),Jt=qt,Gt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.supportedTagNames="posteronly",t.messageSettings=[{message:"该主题启用了“仅发帖用户可见”功能。只有发帖者可以看到其他人的发言。",messageType:xe.Warning},{message:"该主题启用了“仅发帖用户可见”功能，您是发帖者因此可以看到其他人的发言。",messageType:xe.Info},{message:"该主题启用了“仅发帖用户可见”功能，您可以看到发帖者的发言。",messageType:xe.Info},{message:"该主题启用了“仅发帖用户可见”功能，但您可以看到自己的发言。",messageType:xe.Info}],t}return Object(i.c)(t,e),t}(Vt),Qt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.supportedTagNames="allowviewer",t.messageSettings=[{message:"该主题启用了“仅特定用户可见”功能。您不在该内容的可见用户列表中。",messageType:xe.Warning},{message:"该主题启用了“仅发帖用户可见”功能，您在该内容的可见用户列表中。",messageType:xe.Info},{message:"该主题启用了“仅发帖用户可见”功能，但您始终可以看到自己的发言。",messageType:xe.Info}],t}return Object(i.c)(t,e),t}(Vt);var Kt,Xt,Zt,en,tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props.isSignature,t=this.props.engine||e?function(){var e=new De;return e.handlers.register(Fe),e.handlers.register(Ve),e.handlers.register($e),e.handlers.register(We),e.handlers.register(Je),e.handlers.register(Ge),e.handlers.register(Qe),e.handlers.register(Ke),e.handlers.register(Ze),e.handlers.register(ct),e.handlers.register(lt),e.handlers.register(mt),e.handlers.register(pt),e.handlers.register(dt),e.handlers.register(yt),e.handlers.register(Nt),e.handlers.register(Le),e.handlers.registerText(Lt),e.handlers.registerText(Bt),e}():function(){var e=new De;return e.handlers.register(Fe),e.handlers.register(Ve),e.handlers.register($e),e.handlers.register(We),e.handlers.register(Ye),e.handlers.register(Je),e.handlers.register(Ge),e.handlers.register(Qe),e.handlers.register(Ke),e.handlers.register(Ze),e.handlers.register(nt),e.handlers.register(rt),e.handlers.register(ot),e.handlers.register(st),e.handlers.register(it),e.handlers.register(ct),e.handlers.register(lt),e.handlers.register(ut),e.handlers.register(mt),e.handlers.register(pt),e.handlers.register(dt),e.handlers.register(ht),e.handlers.register(ft),e.handlers.register(gt),e.handlers.register(bt),e.handlers.register(yt),e.handlers.register(Ct),e.handlers.register(Tt),e.handlers.register(Nt),e.handlers.register(Le),e.handlers.register(Ot),e.handlers.register($t),e.handlers.register(Gt),e.handlers.register(Qt),e.handlers.register(kt),e.handlers.register(Pt),e.handlers.register(Mt),e.handlers.register(Yt),e.handlers.register(Jt),e.handlers.register(Rt),e.handlers.registerText(Lt),e.handlers.registerText(Bt),e}(),n=this.props.options||new Ie,a=this.props.code,r=t.exec(String(a),n),o={whiteSpace:"pre-wrap",width:"100%"};return n.compatibility===V.Transitional?c.createElement("blockquote",{style:o},r):c.createElement("article",{style:o},r)},t}(c.PureComponent),nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){var e=this.props.title||"CC98论坛";document.title=e},t.prototype.componentWillReceiveProps=function(e){if(e.title!==this.props.title){var t=e.title||"CC98论坛";document.title=t}},t.prototype.render=function(){return this.props.children?c.Children.only(this.props.children):null},t}(c.Component),an=nn,rn=n(1282),on=n(516),sn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.text,n=e.url,a=e.active;return c.createElement("li",{className:"page-item"},c.createElement(vt.a,{className:"page-link".concat(a?" active":""),to:n},t))},t}(c.PureComponent),cn=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.handleInput=function(e){var t=parseInt(e.target.value,10);isNaN(t)||t<1||t>a.props.totalPage||a.setState({nextPage:t})},a.state={nextPage:a.props.page},a}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.page,n=e.url,a=e.totalPage,r=[],o=Math.max(1,t-3),s=Math.min(a,t+3);if(s-o!=6){var i=6-(s-t),l=6-(t-o);o=Math.max(1,t-i),s=Math.min(a,t+l)}for(var u=o;u<=s;u++)r.push(u);var m=1!==r[0],p=r[r.length-1]!==a,d=1!==o,h=s!==a,f=a>20;return c.createElement("div",{className:"pagination"},c.createElement("ul",{className:"page-nav"},m&&c.createElement(sn,{text:"1",url:"".concat(n,"1#1")}),d&&c.createElement(sn,{text:"‹",url:"".concat(n).concat(t-1,"#1")}),r.map((function(e){return c.createElement(sn,{key:e,text:"".concat(e),url:"".concat(n).concat(e,"#1"),active:t===e})})),h&&c.createElement(sn,{text:"›",url:"".concat(n).concat(t+1,"#1")}),p&&c.createElement(sn,{text:"".concat(a),url:"".concat(n).concat(a,"#1")})),f&&c.createElement("div",{className:"page-goto"},c.createElement("div",null,c.createElement("input",{onChange:this.handleInput,placeholder:"跳转到"})),c.createElement("div",null,c.createElement(vt.a,{to:"".concat(n).concat(this.state.nextPage,"#1")}," Go "))))},t}(c.Component),ln=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"您未登录 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/401.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"您当前未登录"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/logon"},"点我登录")))},un=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"帖子被删除了 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/404.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"帖子被删除"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")))},mn=function(){return c.createElement("div",null,c.createElement(an,{title:"网络中断 - CC98论坛"}),c.createElement("div",null,"网络连接中断"))},pn=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"您没有权限进入这个版面 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/401.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"您没有权限进入这个版面或未登陆"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/logon"},"点我登录")))},dn=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"您没有权限进入这个主题 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/401.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"您没有权限进入这个主题"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")))},hn=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"您没有权限执行这个操作 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/401.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"您没有权限进行这个操作"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")))},fn=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"版面不存在 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/404.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"版面不存在"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")))},gn=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"帖子不存在 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/404.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"帖子不存在"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")))},bn=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"您还不能发帖 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/403.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"你无法在本版发帖，可能的原因有：权限不足、未达到发帖门槛、版面已锁定、账号受到处罚等。"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")))},vn=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"用户不存在 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/404.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"用户不存在"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")))},yn=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"服务器发送错误 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/500.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"服务器发送错误"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")))},En=function(){return c.createElement("div",null,c.createElement(an,{title:"请输入内容 - CC98论坛"}),c.createElement("div",{className:"errorText"},"402需要输入内容"))},In=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"操作失败或被拒绝 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/403.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"操作失败或被拒绝"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")))},Cn=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"页面不存在 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/404.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"页面不存在"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")))},wn=function(){return c.createElement("div",{className:"errorState"},c.createElement(an,{title:"操作失败或被拒绝 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{className:"errorIcon",src:"/static/images/403.png"})),c.createElement("div",{className:"errorTitle"},"糟糕！好像出错了"),c.createElement("div",{className:"errorText"},"可能的原因有："),c.createElement("div",{className:"errorText"},"1. 你没有权限进行该操作；"),c.createElement("div",{className:"errorText"},"2. 你的请求过快。出于服务器性能考虑，目前设定为10秒内最多搜索一次。"),c.createElement("div",{className:"row returnIndexBtn"},c.createElement(vt.a,{to:"/"},"返回首页")))},Nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props.data;return""==e?c.createElement("div",null):c.createElement("div",{className:"announcement"},c.createElement("div",{className:"mainPageTitle1"},c.createElement("div",{className:"mainPageTitleRow",style:{width:"100%"}},c.createElement("i",{className:"fa fa-volume-up"}),c.createElement("div",{style:{flexGrow:1},className:"mainPageTitleText"},"全站公告"))),c.createElement("div",{className:"announcementContent"},c.createElement(tn,{code:e})))},t}(c.Component),On=function(e){function t(t){var n=e.call(this,t)||this;return n.state={index:0},n.handleMouseEnter=n.handleMouseEnter.bind(n),n.convertButton=n.convertButton.bind(n),n}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){return t=e.data.length,this.setState({index:Math.floor(Math.random()*t)}),[2]}))}))},t.prototype.handleMouseEnter=function(e){this.setState({index:e})},t.prototype.convertButton=function(e,t,n){var a=this,r=e?"recommendedReadingButtonSelected":"recommendedReadingButton";return c.createElement("div",{key:t,className:r,onMouseEnter:function(){a.handleMouseEnter(t)}})},t.prototype.render=function(){var e=this.props.data,t=e.length,n=this.state.index,a=new Array(t);a.fill(0),a[n]=1;var r=a.map(this.convertButton),o=t?e[n].imageUrl:"",s=t?e[n].url:"",i=t?e[n].title:"",l=t?e[n].content:"";return c.createElement("div",{className:"recommendedReading"},c.createElement("div",{className:"mainPageTitle2"},c.createElement("div",{className:"mainPageTitleRow"},c.createElement("i",{className:"fa fa-volume-up"}),c.createElement("div",{className:"mainPageTitleText"},"推荐阅读"))),c.createElement("div",{className:"recommendedReadingContent"},c.createElement("div",{className:"recommendedReadingImage"},c.createElement("img",{src:o})),c.createElement("div",{className:"column",style:{flexGrow:1}},c.createElement("div",{className:"recommendedReadingTitle"},c.createElement("a",{href:s,target:"_blank"},i)),c.createElement("div",{className:"recommendedReadingAbstract"},l),c.createElement("div",{className:"recommendedReadingButtons"},r))))},t}(c.Component),jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.convertMainPageTopic=function(e,t){if(!e.id)return c.createElement("div",null,e.title);var n="/board/".concat(e.boardId),a="/topic/".concat(e.id,"/1");return c.createElement("div",{key:e.id,className:"mainPageListRow"},c.createElement("div",{className:"mainPageListBoardName"}," ",c.createElement("a",{href:n,target:"_blank"},"[",e.boardName,"]")),c.createElement("div",{className:"mainPageListTitle"},c.createElement("a",{href:a,target:"_blank"},e.title)))},t.prototype.render=function(){var e=this.props.data;if(0===e.length){var t=pa("mainPageHotTopic");e=t||[{title:"数据库正在计算新的十大数据，请前辈等会再来~",id:0,boardName:"错误提示",boardId:0}]}return c.createElement("div",{className:"mainPageList"},c.createElement("div",{className:"mainPageTitle1"},c.createElement("div",{className:"mainPageTitleRow"},c.createElement("i",{className:"fa fa-volume-up"}),c.createElement("div",{className:"mainPageTitleText"},"热门话题")),c.createElement("div",{className:"mainPageTitleRow"},c.createElement("div",{className:"mainPageTitleText"},c.createElement("a",{href:"/topic/hot-weekly",target:"_blank"},"本周")),c.createElement("div",{className:"mainPageTitleText"},c.createElement("a",{href:"/topic/hot-monthly",target:"_blank"},"本月")),c.createElement("div",{className:"mainPageTitleText"},c.createElement("a",{href:"/topic/hot-history",target:"_blank"},"历史上的今天")))),c.createElement("div",{className:"mainPageListContent1"},e.map(this.convertMainPageTopic)))},t}(c.Component),Tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.convertMainPageTopic=function(e,t){var n="/topic/".concat(e.id,"/1");return c.createElement("div",{key:e.id,className:"mainPageListRow"},c.createElement("div",{className:"mainPageListTitle"},c.createElement("a",{href:n,target:"_blank"},e.title)))},t.prototype.render=function(){var e=this.props.mores.map((function(e,t){return c.createElement("div",{key:t,className:"mainPageTitleText"},c.createElement("a",{href:e.url,target:"_blank"},e.name))})),t=this.props.style;return"black"===t?c.createElement("div",{className:"mainPageList"},c.createElement("div",{className:"mainPageTitle2"},c.createElement("div",{className:"mainPageTitleRow"},c.createElement("i",{className:"fa fa-volume-up"}),c.createElement("div",{className:"mainPageTitleText"},this.props.name)),c.createElement("div",{className:"mainPageTitleRow"},e)),c.createElement("div",{className:"mainPageListContent2"},this.props.data.map(this.convertMainPageTopic))):"blue"===t?c.createElement("div",{className:"mainPageList"},c.createElement("div",{className:"mainPageTitle1"},c.createElement("div",{className:"mainPageTitleRow"},c.createElement("i",{className:"fa fa-volume-up"}),c.createElement("div",{className:"mainPageTitleText"},this.props.name)),c.createElement("div",{className:"mainPageTitleRow"},e)),c.createElement("div",{className:"mainPageListContent1"},this.props.data.map(this.convertMainPageTopic))):void 0},t}(c.Component),Sn=function(e,t,n,a){this.imageUrl=e,this.title=t,this.url=n,this.content=a},kn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.convertRecommendedFunction=function(e,t){return c.createElement("div",{key:t,className:"recommendedFunctionRow"},c.createElement("div",{className:"recommendedFunctionImage"},c.createElement("img",{src:e.imageUrl})),c.createElement("div",{className:"recommendedFunctionTitle"},c.createElement("a",{href:e.url,target:"_blank"},e.title)))},t.prototype.render=function(){return c.createElement("div",{className:"recommendedFunction"},c.createElement("div",{className:"mainPageTitle1"},c.createElement("div",{className:"mainPageTitleRow"},c.createElement("i",{className:"fa fa-volume-up"}),c.createElement("div",{className:"mainPageTitleText"},"推荐功能"))),c.createElement("div",{className:"recommendedFunctionContent"},this.props.data.map(this.convertRecommendedFunction)))},t}(c.Component),xn=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.c)(t,e),t.prototype.convertSchoolNews=function(e){return c.createElement("div",{className:"schoolNewsRow"},c.createElement("div",{className:"schoolNewsTitle"},c.createElement("a",{href:e.url,target:"_blank"},e.title)))},t.prototype.render=function(){return c.createElement("div",{className:"schoolNews"},c.createElement("div",{className:"mainPageTitle2"},c.createElement("div",{className:"mainPageTitleRow"},c.createElement("i",{className:"fa fa-volume-up"}),c.createElement("div",{className:"mainPageTitleText"},"校园新闻"))),c.createElement("div",{className:"schoolNewsContent"},this.props.data.map(this.convertSchoolNews)))}}(c.Component),function(e){function t(t){var n=e.call(this,t)||this,a=ia("mainAds");return a||(a=new Array),n.state={ads:a,index:0},n.changeIndex=n.changeIndex.bind(n),n.handleMouseEnter=n.handleMouseEnter.bind(n),n.convertButton=n.convertButton.bind(n),n}return Object(i.c)(t,e),t.prototype.getAds=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return(e=ia("mainAds"))?[2,e]:[3,1];case 1:return e=new Array,[4,ga("/config/global/advertisement")];case 2:return[4,a.sent().json()];case 3:for(t=a.sent(),n=0;n<t.length;n++)e[n]=new Sn(t[n].imageUrl,t[n].title,t[n].url,t[n].content);return sa("mainAds",e),[2,e]}}))}))},t.prototype.componentWillMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,this.getAds()];case 1:return e=n.sent(),t=e.length,this.setState({ads:e,index:Math.floor(Math.random()*t)}),[2]}}))}))},t.prototype.componentDidMount=function(){var e=this;this.timer=setInterval((function(){e.changeIndex(e.state.index)}),2e4)},t.prototype.componentWillUnmount=function(){clearInterval(this.timer)},t.prototype.changeIndex=function(e){var t=e+1;t>=this.state.ads.length&&(t=0),this.setState({index:t})},t.prototype.handleMouseEnter=function(e){this.setState({index:e})},t.prototype.convertButton=function(e,t,n){var a=this,r=e?"adButtonSelected":"adButton";return c.createElement("div",{key:t,className:r,onMouseEnter:function(){a.handleMouseEnter(t)}})},t.prototype.render=function(){var e=this.state.ads,t=this.state.index,n=e.length,a=new Array(n);a.fill(0),a[t]=1;var r=a.map(this.convertButton),o=e.length?e[t].url:"",s=e.length?e[t].imageUrl:"";return c.createElement("div",{style:{position:"relative",width:"18.75rem",height:"6.25rem"}},c.createElement("div",null,c.createElement("a",{href:o,target:"_blank"},c.createElement("img",{src:s,style:{width:"18.75rem",height:"6.25rem"}}))),c.createElement("div",{className:"adButtons",style:{position:"absolute",left:"50%",marginLeft:"-8rem",bottom:"0.25rem"}},r))},t}(c.Component)),Pn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props.data;return c.createElement("div",{className:"mainPageCount"},c.createElement("div",{className:"mainPageTitle1"},c.createElement("div",{className:"mainPageTitleRow"},c.createElement("i",{className:"fa fa-volume-up"}),c.createElement("div",{className:"mainPageTitleText"},"论坛统计"))),c.createElement("div",{className:"mainPageCountContent"},c.createElement("div",{className:"mainPageCountRow"},c.createElement("div",{className:"mainPageCountTitle"},"今日帖数"),c.createElement("div",{className:"mainPageCountTitle"},e.todayCount||0)),c.createElement("div",{className:"mainPageCountRow"},c.createElement("div",{className:"mainPageCountTitle"},"今日主题数"),c.createElement("div",{className:"mainPageCountTitle"},e.todayTopicCount||0)),c.createElement("div",{className:"mainPageCountRow"},c.createElement("div",{className:"mainPageCountTitle"},"论坛总主题数"),c.createElement("div",{className:"mainPageCountTitle"},e.topicCount||0)),c.createElement("div",{className:"mainPageCountRow"},c.createElement("div",{className:"mainPageCountTitle"},"论坛总回复数"),c.createElement("div",{className:"mainPageCountTitle"},e.postCount||0)),c.createElement("div",{className:"mainPageCountRow"},c.createElement("div",{className:"mainPageCountTitle"},"在线用户数"),c.createElement("div",{className:"mainPageCountTitle"},e.onlineUserCount||0)),c.createElement("div",{className:"mainPageCountRow"},c.createElement("div",{className:"mainPageCountTitle"},"总用户数"),c.createElement("div",{className:"mainPageCountTitle"},e.userCount||0)),c.createElement("div",{className:"mainPageCountRow"},c.createElement("div",{className:"mainPageCountTitle"},"欢迎新用户"),c.createElement("div",{className:"mainPageCountTitle"},c.createElement(vt.a,{to:"/user/name/".concat(encodeURIComponent(e.lastUserName))},e.lastUserName)))))},t}(c.Component),Un=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",null)}}(c.Component),function(e,t,n,a,r,o,s){this.todayCount=e,this.todayTopicCount=t,this.topicCount=n,this.postCount=a,this.onlineUserCount=r,this.userCount=o,this.lastUserName=s}),Mn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"2rem"}},c.createElement("div",{className:"mainPageTitle2"},c.createElement("div",{className:"mainPageTitleRow"},c.createElement("i",{className:"fa fa-volume-up"}),c.createElement("div",{className:"mainPageTitleText"},this.props.title))),c.createElement("div",{style:{marginTop:"1rem",marginBottom:"1rem"}},c.createElement("img",{style:{width:"100%"},src:this.props.src})))},t}(c.Component),_n=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:{academics:[],announcement:"",emotion:[],fleaMarket:[],fullTimeJob:[],hotTopic:[],lastUserName:"",partTimeJob:[],postCount:0,recommendationFunction:[],recommendationReading:[],schoolEvent:[],schoolNews:[],study:[],todayCount:0,topicCount:0,userCount:0}},n}return Object(i.c)(t,e),t.prototype.getData=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return(e=pa("mainPageData"))?[3,3]:[4,ga("/config/index")];case 1:return[4,n.sent().json()];case 2:return e=n.sent(),(t=e.hotTopic)&&t.length&&(la("mainPageData",e,60),la("mainPageHotTopic",t)),[2,e];case 3:return[2,e]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,this.getData()];case 1:return e=t.sent(),this.setState({data:e}),[2]}}))}))},t.prototype.render=function(){var e=this.state.data,t=new Array({name:"学习",url:"/board/68"},{name:"外语",url:"/board/304"},{name:"考研",url:"/board/263"},{name:"出国",url:"/board/102"}),n=new Array({name:"缘分",url:"/board/152"},{name:"小屋",url:"/board/114"},{name:"感性",url:"/board/81"}),a=new Array({name:"数码",url:"/board/562"},{name:"日用",url:"/board/80"},{name:"服饰",url:"/board/563"}),r=new Array({name:"更多",url:"/board/235"}),o=new Array({name:"更多",url:"/board/459"}),s=new Un(e.todayCount,e.todayTopicCount,e.topicCount,e.postCount,e.onlineUserCount,e.userCount,e.lastUserName);return c.createElement("div",{className:"mainPage"},c.createElement(an,{title:"CC98论坛"}),c.createElement("div",{className:"leftPart"},c.createElement(Nn,{data:e.announcement}),c.createElement(On,{data:e.recommendationReading}),c.createElement("div",{className:"row",style:{justifyContent:"space-between"}},c.createElement(jn,{data:e.hotTopic}),c.createElement(Tn,{data:e.schoolEvent,name:"校园活动",fetchUrl:"/topic/school-event",style:"blue",mores:[]})),c.createElement("div",{className:"row",style:{justifyContent:"space-between"}},c.createElement(Tn,{data:e.academics,name:"学术通知",fetchUrl:"/topic/academics",style:"black",mores:[]}),c.createElement(Tn,{data:e.study,name:"学习园地",fetchUrl:"/topic/study",style:"black",mores:t})),c.createElement("div",{className:"row",style:{justifyContent:"space-between"}},c.createElement(Tn,{data:e.emotion,name:"感性·情感",fetchUrl:"/topic/emotion",style:"blue",mores:n}),c.createElement(Tn,{data:e.fleaMarket,name:"跳蚤市场",fetchUrl:"/topic/flea-market",style:"blue",mores:a})),c.createElement("div",{className:"row",style:{justifyContent:"space-between"}},c.createElement(Tn,{data:e.fullTimeJob,name:"求职广场",fetchUrl:"/topic/full-time-job",style:"black",mores:r}),c.createElement(Tn,{data:e.partTimeJob,name:"实习兼职",fetchUrl:"/topic/part-time-job",style:"black",mores:o}))),c.createElement("div",{className:"rightPart"},c.createElement(kn,{data:e.recommendationFunction}),c.createElement(xn,null),c.createElement(Pn,{data:s}),c.createElement(Mn,{title:"CC98小程序",src:"/static/images/xiaochengxu.png"}),c.createElement(Mn,{title:"98淘书小程序",src:"/static/images/taoshu.jpg"}),c.createElement(Mn,{title:"CC98公众号",src:"/static/images/gongzhonghao.jpg"})))},t}(c.Component),Rn=n(14),Dn=n.n(Rn),Ln=n(124),Fn=n(258),Bn=n(25),An=n(88),zn=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"match",{get:function(){return this.props.match},enumerable:!1,configurable:!0}),t}(c.Component),Vn=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.showModal=function(){return Object(i.b)(a,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,ko(this.match.params.boardId,0,5)];case 1:return e=t.sent(),this.setState({visible:!0,tpList:e}),[2]}}))}))},a.handleOk=function(e){a.setState({visible:!1})},a.handleCancel=function(e){a.setState({visible:!1})},a.cancelTp=function(e){return Object(i.b)(a,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,xr(e.userId,this.match.params.boardId)];case 1:return"ok"!==(t=a.sent())?[3,3]:[4,ko(this.match.params.boardId,0,5)];case 2:return n=a.sent(),this.setState({tpList:n}),[3,4];case 3:alert("操作失败,原因："+t),a.label=4;case 4:return[2]}}))}))},a.state={boardId:null,boardInfo:{bigPaper:"",masters:[],name:""},page:1,fetchState:"ok",visible:!1,tpList:[],loading:!1,hasMore:!0,isMaster:!1},a}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){var e=qr(this.state.boardInfo.boardMasters);this.setState({isMaster:e})},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,Wr(e.match.params.boardId)];case 1:return t=n.sent(),this.setState({boardInfo:t,boardId:this.match.params.boardId}),[2]}}))}))},t.prototype.componentWillMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,Wr(this.match.params.boardId)];case 1:return e=t.sent(),this.setState({boardInfo:e,boardId:this.match.params.boardId,fetchState:e}),[2]}}))}))},t.prototype.render=function(){var e=this;switch(this.state.fetchState){case"ok":return c.createElement("div",null);case"not found":return c.createElement(gn,null);case"unauthorized":return c.createElement(pn,null);case"server error":return c.createElement(yn,null)}var t="/board/".concat(this.match.params.boardId,"/record/");return c.createElement("div",{id:"listRoot"},c.createElement(an,{title:"".concat(this.state.boardInfo.name," - CC98论坛")}),c.createElement(Hn,{boardId:this.match.params.boardId,boardInfo:this.state.boardInfo}),c.createElement($n,{key:this.state.page,boardId:this.match.params.boardId,boardInfo:this.state.boardInfo}),c.createElement(Yn,{boardInfo:this.state.boardInfo,adsUrl:null}),c.createElement(rn.a,null,c.createElement(on.a,{exact:!0,path:"/board/:boardid/tags/:tag1Id/:tag2Id/:page?",component:Qn}),c.createElement(on.a,{exact:!0,path:"/board/:boardId/tag/tag1/:tagId/:page?",component:Gn}),c.createElement(on.a,{exact:!0,path:"/board/:boardId/tag/tag2/:tagId/:page?",component:Gn}),c.createElement(on.a,{exact:!0,path:"/board/:boardId/best/:page?",component:Xn}),c.createElement(on.a,{exact:!0,path:"/board/:boardId/save/:page?",component:Zn}),c.createElement(on.a,{exact:!0,path:"/board/:boardId/record/:page?",component:Kn}),c.createElement(on.a,{exact:!0,path:"/board/:boardId/:page?",component:Jn})),c.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"flex-end"}},c.createElement(vt.a,{to:t},c.createElement(Bn.a,{type:"primary"},"查看版面事件")),c.createElement(Bn.a,{style:{marginLeft:"2rem"},type:"primary",onClick:this.showModal},"小黑屋")),c.createElement(Ln.a,{title:"小黑屋",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,width:this.state.isMaster?"60rem":"45rem"},c.createElement(Fn.a,{dataSource:this.state.tpList,pagination:{onChange:function(t){return Object(i.b)(e,void 0,void 0,(function(){var e,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return e=5*(t-1),[4,ko(this.match.params.boardId,e,5)];case 1:return n=r.sent(),a=this.state.tpList.concat(n),this.setState({tpList:a}),[2]}}))}))},pageSize:5},renderItem:function(t){return c.createElement(Fn.a.Item,{key:t.userId},c.createElement(Fn.a.Item.Meta,{title:c.createElement("a",{href:"https://cc98.org/user/".concat(t.userId)},t.userName),description:c.createElement("div",null,c.createElement("span",null,"天数:",t.days),c.createElement("span",{style:{marginLeft:"2rem",marginRight:"2rem"}},"到期时间:",Rn(t.expiredTime).format("YYYY-MM-DD HH:mm:ss")),c.createElement(Bn.a,{onClick:e.cancelTp.bind(e,t),type:"primary",style:{display:e.state.isMaster?"":"none"}},"解除tp"))}),c.createElement("div",null,"操作人:",t.operatorUserName))}},this.state.loading&&this.state.hasMore&&c.createElement("div",{className:"demo-loading-container"},c.createElement(An.a,null)))))},t}(zn),Hn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e="/board/".concat(this.props.boardId);return c.createElement("div",{className:"row",style:{alignItems:"baseline",width:"100% ",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem",marginLeft:"0.5rem"},to:"/boardlist"},"版面列表"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem"},to:e},this.props.boardInfo.name))},t}(c.Component),$n=function(e){function t(t,n){var a=e.call(this,t,n)||this;a.changeBigPaper=function(){return Object(i.b)(a,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e="/board/".concat(this.props.boardId,"/big-paper"),[4,ha()];case 1:return t=r.sent(),(n=new Headers).append("Authorization",t),n.append("Content-Type","application/json"),[4,ga(e,{method:"PUT",headers:n,body:JSON.stringify({content:this.state.curDesc})})];case 2:if(200!==r.sent().status)throw new Error;return this.setState({info:"修改成功"}),[3,4];case 3:return a=r.sent(),this.setState({info:"修改失败 ".concat(a.message)}),[3,4];case 4:return[2]}}))}))},a.state={isFollow:br(a.props.boardId),isExtend:!1,isEditing:!1,curDesc:t.boardInfo.bigPaper,info:""};br(a.props.boardId);return a.follow=a.follow.bind(a),a.unfollow=a.unfollow.bind(a),a.generateMasters=a.generateMasters.bind(a),a}return Object(i.c)(t,e),t.prototype.follow=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return[4,vr(this.props.boardId)];case 1:return e.sent(),this.setState({isFollow:!0}),[2]}}))}))},t.prototype.unfollow=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return[4,Er(this.props.boardId)];case 1:return e.sent(),this.setState({isFollow:!1}),[2]}}))}))},t.prototype.generateMasters=function(e){var t=e.toString(),n=encodeURIComponent(e.toString()),a="/user/name/".concat(n);return c.createElement("div",{style:{marginRight:"10px",fontSize:"0.75rem"}},c.createElement("a",{style:{color:this.state.isExtend?"#fff":"#000"},href:a},t))},t.prototype.componentWillReceiveProps=function(e){this.setState({isFollow:br(e.boardInfo.isFollow)})},t.prototype.onError=function(e){e.preventDefault(),e.target.src="/static/images/_CC98.png"},t.prototype.render=function(){var e=this,t="/board/".concat(this.props.boardId),n=("boardImg_".concat(this.props.boardId),"/static/images/_".concat(this.props.boardInfo.name,".png")),a=qr(this.props.boardInfo.boardMasters),r=c.createElement("div",{className:"row",style:{width:"100%"}},this.props.boardInfo.name);return this.props.boardInfo&&this.props.boardInfo.name.length>8&&(r=c.createElement("div",{className:"row",style:{width:"100%",fontSize:"14px"}},this.props.boardInfo.name)),this.state.isExtend?c.createElement("div",{className:"row",style:{width:"100%",overflow:"hidden",maxHeight:"50rem",transition:"max-height 1.5s"}},c.createElement("div",{className:"boardMessage"},c.createElement("div",{className:"row",style:{height:"4rem",marginTop:"1.25rem"}},c.createElement("img",{style:{marginLeft:"1.25rem"},onError:this.onError,src:n}),c.createElement("div",{className:"boardMessageDetails"},c.createElement("div",{className:"row",style:{width:"100%"}},this.props.boardInfo.name),c.createElement("div",{className:"row",style:{width:"100%",alignItems:"center"}},c.createElement("div",{style:{fontSize:"0.75rem",width:"4.5rem"}},this.props.boardInfo.todayCount,"/",this.props.boardInfo.topicCount),c.createElement("div",{className:"boardFollow",onClick:this.state.isFollow?this.unfollow:this.follow},this.state.isFollow?"取关":"关注"," ")))),c.createElement("div",{className:"boardDescription"},c.createElement("div",null,this.props.boardInfo.description)),c.createElement("div",{className:"boardMasters"},c.createElement("div",null,"版主"),c.createElement("div",null,this.props.boardInfo.boardMasters.map(this.generateMasters)))),c.createElement("div",{className:"bigPaper",style:{display:"block"}},c.createElement("button",{className:"fa fa-angle-double-up",style:{float:"right",backgroundColor:"#fff",cursor:"pointer",border:"none"},type:"button",onClick:function(){return e.setState({isExtend:!1})}},"收起"),c.createElement("div",{className:"bigPaperTitle"},qr(this.props.boardInfo.boardMasters)?c.createElement("button",{type:"button",onClick:function(){return e.setState({isEditing:!0})}},"编辑"):null,this.state.isEditing?c.createElement("button",{type:"button",onClick:function(){e.changeBigPaper()}},"提交"):null,c.createElement("p",null,this.state.info)),this.state.isEditing?c.createElement("div",null,c.createElement("textarea",{style:{width:"50rem",height:"15rem",resize:"none"},onChange:function(t){return e.setState({curDesc:t.target.value})}},this.state.curDesc)):c.createElement("div",{style:{maxWidth:"53.25rem"}},c.createElement(tn,{code:this.props.boardInfo.bigPaper})))):c.createElement("div",{className:"row",style:{width:"100%",overflow:"hidden",maxHeight:"6rem",transition:"max-height 1s"}},c.createElement(vt.a,{to:t},c.createElement("div",{className:"boardMessage"},c.createElement("div",{className:"row",style:{height:"4rem",marginTop:"1.25rem"}},c.createElement("img",{style:{marginLeft:"1.25rem"},onError:this.onError,src:n}),c.createElement("div",{className:"boardMessageDetails"},r,c.createElement("div",{className:"row",style:{width:"100%",alignItems:"center"}},c.createElement("div",{style:{fontSize:"0.75rem",width:"4.5rem"}},this.props.boardInfo.todayCount,"/",this.props.boardInfo.topicCount),c.createElement("div",{className:"boardFollow",onClick:this.state.isFollow?this.unfollow:this.follow},this.state.isFollow?"取关":"关注"," ")))))),c.createElement("div",{className:"bigPaper",style:{display:"block"}},this.props.boardInfo.bigPaper?c.createElement("button",{className:"fa fa-angle-double-down",style:{float:"right",backgroundColor:"#fff",cursor:"pointer",border:"none"},type:"button",onClick:function(){return e.setState({isExtend:!0})}},"展开"):a?c.createElement("button",{style:{float:"right"},type:"button",onClick:function(){return e.setState({isEditing:!0,isExtend:!0})}},"编辑"):null,c.createElement("div",null,c.createElement("div",null,"版面简介：",this.props.boardInfo.description)),c.createElement("div",null,c.createElement("div",{style:{display:"flex",marginTop:".5rem",fontSize:"0.75rem"}},"版主：",this.props.boardInfo.boardMasters.map(this.generateMasters)))))},t}(zn),Wn=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.c)(t,e),t.prototype.generateTagButton=function(e){var t="/board/".concat(this.props.boardid,"/tag/tag1/").concat(e.id);return c.createElement("div",null,c.createElement(vt.a,{to:t},c.createElement("button",{className:"chooseTag"},e.name,c.createElement("span",{className:"tagNumber"}))))},t.prototype.generateTag2Button=function(e){var t="/board/".concat(this.props.boardid,"/tag/tag2/").concat(e.id);return c.createElement("div",null,c.createElement(vt.a,{to:t},c.createElement("button",{className:"chooseTag"},e.name,c.createElement("span",{className:"tagNumber"}))))},t.prototype.render=function(){var e=null,t=null,n="/board/".concat(this.props.boardid);return this.props.tag&&this.props.tag.length>=1&&(e=c.createElement("div",{style:{maxWidth:"35rem",lineHeight:"3rem",display:"flex",flexDirection:"row",justifyContent:"flex-start",width:"100%",marginLeft:"0.3125rem",marginRight:"0.3125rem",borderTop:"dashed #EAEAEA thin",marginBottom:"0.5rem"}},c.createElement("div",{className:"row",style:{display:"flex",flexWrap:"wrap",maxWidth:"35rem"}},c.createElement("div",null,c.createElement("button",{className:"chooseTag"},c.createElement(vt.a,{to:n},"全部"))),this.props.tag[0].tags.map(this.generateTagButton.bind(this))))),this.props.tag&&2===this.props.tag.length&&(t=c.createElement("div",{style:{maxWidth:"35rem",lineHeight:"3rem",display:"flex",flexDirection:"row",justifyContent:"flex-start",width:"100%",marginLeft:"0.3125rem",marginRight:"0.3125rem",borderTop:"dashed #EAEAEA thin",marginBottom:"0.5rem"}},c.createElement("div",{className:"row",style:{display:"flex",flexWrap:"wrap",maxWidth:"35rem"}},c.createElement("div",null,c.createElement("button",{className:"chooseTag"},c.createElement(vt.a,{to:n},"全部"))),this.props.tag[1].tags.map(this.generateTag2Button.bind(this))))),c.createElement("div",{className:"row",style:{width:"100%",marginLeft:"0.3125rem",marginRight:"0.3125rem",marginTop:"0.9375rem",marginBottom:"1rem",justifyContent:"space-between",alignItems:"flex-end"}},c.createElement("div",null,e,t),c.createElement(cn,{page:this.props.page,url:this.props.url,totalPage:this.props.totalPage}))},t}(c.Component),Yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.clickListener=function(){var e=!1,t=!0,n=!1;ua()&&(e=!0),ua()&&!ua().isVerified&&(t=!1),ua()&&0!==ua().lockState&&(n=!0),e?t?n&&alert("您的账号被全站禁言！"):alert("您的帐号未认证，无法发言，请先前往https://account.cc98.org 认证激活。"):alert("请登陆！")},t.prototype.render=function(){var e=null,t=!1,n=!1,a=!0,r=null;ua()?(t=!0,ua().isVerified?n=!0:(n=!1,r=c.createElement("div",{style:{marginLeft:"1rem",color:"red"}},"您的帐号未认证，无法发言，请先前往"," ",c.createElement("a",{href:"https://account.cc98.org"},"https://account.cc98.org")," ","认证激活。")),0!==ua().lockState?(a=!0,r=c.createElement("div",{style:{marginLeft:"1rem",color:"red"}},"您被全站禁言。")):a=!1):r=c.createElement("div",{style:{marginLeft:"1rem",color:"red"}},"您还未登录，不能发帖，请先登录");var o="/editor/postTopic/".concat(this.props.boardInfo.id);return e=this.props.boardInfo.canVote?c.createElement("div",null,c.createElement(vt.a,{className:"button bgcolor",to:o},"发主题"),c.createElement(vt.a,{style:{marginLeft:"2rem"},className:"button bgcolor",to:"/editor/postVoteTopic/".concat(this.props.boardInfo.id)},"发投票")):c.createElement(vt.a,{className:"button bgcolor",to:o},"发主题"),!a&&t&&n||(e=c.createElement("div",{style:{display:"flex",alignItems:"center"}},r)),c.createElement("div",{className:"row",style:{width:"100%",height:"6.25rem",alignItems:"flex-end",justifyContent:"space-between",marginTop:"1rem"}},e,c.createElement("div",{style:{height:"6.25rem"}}," ",c.createElement(xn,null)))},t}(c.Component),qn=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.state={data:[]},a}return Object(i.c)(t,e),t.prototype.convertTopicToElement=function(e){return c.createElement(ea,Object(i.a)({key:e.id},e))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,lr(this.props.boardId)];case 1:return e=t.sent(),this.setState({data:e}),[2]}}))}))},t.prototype.render=function(){return c.createElement("div",null,this.state.data.map(this.convertTopicToElement))},t}(c.Component),Jn=(function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:[]},n}Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,ur(this.props.boardId,this.props.curPage)];case 1:return e=t.sent(),this.setState({data:e}),[2]}}))}))},t.prototype.convertTopicToElement=function(e){return c.createElement(ea,Object(i.a)({key:e.id},e))},t.prototype.render=function(){return c.createElement("div",null,this.state.data.map(this.convertTopicToElement))}}(c.Component),function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.tpList=function(){},a.state={items:[],totalPage:0,boardInfo:{masters:[],topicCount:1},fetchState:"ok",tags:[]},a}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:return(e=this.match.params.page)||(e=1),[4,Wr(this.match.params.boardId)];case 1:return t=o.sent(),[4,Pa(e,this.match.params.boardId,t.topicCount)];case 2:return n=o.sent(),a=this.getTotalListPage(t.topicCount),[4,Jr(this.match.params.boardId)];case 3:return r=o.sent(),this.setState({items:n,totalPage:a,boardInfo:t,fetchState:n,tags:r}),[2]}}))}))},t.prototype.convertTopicToElement=function(e){return c.createElement(ea,Object(i.a)({key:e.id},e))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return n=e.match.params.page,t=n?parseInt(n):1,[4,Wr(this.match.params.boardId)];case 1:return a=s.sent(),r=this.getTotalListPage(a.topicCount),[4,Pa(t,e.match.params.boardId,a.topicCount)];case 2:return o=s.sent(),this.setState({items:o,totalPage:r}),[2]}}))}))},t.prototype.getTotalListPage=function(e){return er(e)},t.prototype.getCheckValue=function(){var e=[];return ve(".opTitleCheckboxValue").each((function(){var t,n;ve(this).is(":checked")&&e.push("id="+(t=ve(this).attr("id"),n=t.lastIndexOf("_"),t.substring(n+1,t.length)))})),e.join("&")},t.prototype.lockUI=function(){ve("#deleteUI").css("display","none"),ve("#lockUI").css("display",""),ve(".opTitleCheckbox").css("display","flex")},t.prototype.deleteUI=function(){ve("#lockUI").css("display","none"),ve("#deleteUI").css("display",""),ve(".opTitleCheckbox").css("display","flex")},t.prototype.manageUI=function(){ve("#manageUI").css("display","")},t.prototype.lock=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return e=ve("#opDays").val(),"自定义"==(t=ve("#opReason").val())&&(t=ve("#hideReason").val()),n=this.getCheckValue(),[4,To(e,t,n)];case 1:return 200==a.sent()&&(proxyLoc(document.location).href="/board/".concat(this.match.params.boardId)),[2]}}))}))},t.prototype.delete=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return"自定义"==(e=ve("#opReason").val())&&(e=ve("#hideReason1").val()),t=this.getCheckValue(),[4,So(e,t)];case 1:return 200==n.sent()&&(proxyLoc(document.location).href="/board/".concat(this.match.params.boardId)),[2]}}))}))},t.prototype.changeReason=function(){"自定义"==ve("#opReason").val()?ve("#hideReason").css("display",""):ve("#hideReason").css("display","none")},t.prototype.changeDeleteReason=function(){"自定义"==ve("#opReason").val()?ve("#hideReason1").css("display",""):ve("#hideReason1").css("display","none")},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1,t=null;1!==parseInt(this.match.params.page)&&this.match.params.page||(t=c.createElement("div",null,c.createElement(qn,{boardId:this.match.params.boardId})));var n=(this.state.items||[]).map(this.convertTopicToElement),a="/board/".concat(this.match.params.boardId,"/best/"),r="/board/".concat(this.match.params.boardId,"/save/"),o="/board/".concat(this.match.params.boardId,"/"),s=c.createElement("div",null,c.createElement(be.a,null,"处理理由"),c.createElement("select",{id:"opReason",onChange:this.changeReason.bind(this),className:"react-bootstrap-select"},c.createElement("option",{className:"react-bootstrap-option",value:"重复发帖"},"重复发帖"),c.createElement("option",{className:"react-bootstrap-option",value:"管理要求"},"管理要求"),c.createElement("option",{className:"react-bootstrap-option",value:"已解决"},"已解决"),c.createElement("option",{className:"react-bootstrap-option",value:"内容不符"},"内容不符"),c.createElement("option",{className:"react-bootstrap-option",value:"违反版规"},"违反版规"),c.createElement("option",{className:"react-bootstrap-option",value:"自定义"},"自定义")),c.createElement("input",{id:"hideReason",className:"react-bootstrap-text",style:{display:"none"}})),i=c.createElement("div",null,c.createElement(be.a,null,"处理理由"),c.createElement("select",{id:"opReason",onChange:this.changeDeleteReason.bind(this),className:"react-bootstrap-select"},c.createElement("option",{className:"react-bootstrap-option",value:"重复发帖"},"重复发帖"),c.createElement("option",{className:"react-bootstrap-option",value:"管理要求"},"管理要求"),c.createElement("option",{className:"react-bootstrap-option",value:"已解决"},"已解决"),c.createElement("option",{className:"react-bootstrap-option",value:"内容不符"},"内容不符"),c.createElement("option",{className:"react-bootstrap-option",value:"违反版规"},"违反版规"),c.createElement("option",{className:"react-bootstrap-option",value:"自定义"},"自定义")),c.createElement("input",{id:"hideReason1",className:"react-bootstrap-text",style:{display:"none"}})),l=c.createElement("div",null," ",c.createElement(be.a,null,"下沉天数"),c.createElement("select",{id:"opDays",className:"react-bootstrap-select"},c.createElement("option",{value:"7"},"7"),c.createElement("option",{value:"30"},"30"),c.createElement("option",{value:"98"},"98"),c.createElement("option",{value:"1000"},"1000"))),u=c.createElement("div",{id:"lockUI",style:{display:"none"}},s,l,c.createElement("button",{type:"button",id:"mutlilock-btn",onClick:this.lock.bind(this),className:"react-bootstrap-button"},"确认"),c.createElement("div",{id:"mutlioptip"})),m=c.createElement("div",{id:"deleteUI",style:{display:"none"}},i,c.createElement("button",{type:"button",id:"mutlidelete-btn",onClick:this.delete.bind(this),className:"react-bootstrap-button"},"确认"),c.createElement("div",{id:"mutliopdtip"})),p=c.createElement("div",{id:"manageUI",style:{display:"none"}},c.createElement("div",{onClick:this.lockUI.bind(this),className:"react-bootstrap-button"},"批量锁沉"),c.createElement("div",{onClick:this.deleteUI.bind(this),className:"react-bootstrap-button"},"批量删除"),u,m),d=null;return qr(this.state.boardInfo.boardMasters)&&(d=c.createElement(Bn.a,{type:"primary",onClick:this.manageUI.bind(this)},"批量管理")),c.createElement("div",{className:"listContent "},c.createElement(Wn,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:o,tag:this.state.tags}),c.createElement("div",{className:"column tagColumn"},c.createElement("div",{className:"row board-topBar"},c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:o},"全部")),c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:a},"精华")),c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:r},"保存"))),c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{style:{marginRight:"14rem"}},c.createElement("span",null,"作者")),c.createElement("div",{style:{marginRight:"8rem"}},c.createElement("span",null,"最后回复")))),t,c.createElement("div",null,n)),c.createElement("div",{className:"row",style:{marginTop:"0.5rem"}},c.createElement("div",{className:"listContentBottom",style:{flexGrow:1}},c.createElement(cn,{page:e,totalPage:this.state.totalPage,url:o})),d),p)},t}(zn)),Gn=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.state={items:[],totalPage:0,boardInfo:{masters:[],topicCount:1},fetchState:"ok",tags:[],layer:1},a}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return(e=this.match.params.page)||(e=1),[4,Wr(this.match.params.boardId)];case 1:return t=s.sent(),[4,Jr(this.match.params.boardId)];case 2:return n=s.sent(),a=so(this.match.params.tagId,n),[4,ao(this.match.params.tagId,this.match.params.boardId,a,e)];case 3:return r=s.sent(),o=this.getTotalListPage(r.count),this.setState({items:r.topics,totalPage:o,boardInfo:t,fetchState:r,tags:n,layer:a}),[2]}}))}))},t.prototype.convertTopicToElement=function(e){return c.createElement(ea,Object(i.a)({key:e.id},e))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c;return Object(i.d)(this,(function(i){switch(i.label){case 0:return n=e.match.params.page,t=n?parseInt(n):1,[4,Wr(e.match.params.boardId)];case 1:return a=i.sent(),[4,Jr(e.match.params.boardId)];case 2:return r=i.sent(),o=so(e.match.params.tagId,r),[4,ao(e.match.params.tagId,e.match.params.boardId,o,t)];case 3:return s=i.sent(),c=this.getTotalListPage(s.count),this.setState({items:s.topics,totalPage:c,boardInfo:a,fetchState:s,tags:r,layer:o}),[2]}}))}))},t.prototype.getTotalListPage=function(e){return er(e)},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1;1!==parseInt(this.match.params.page)&&this.match.params.page||c.createElement("div",null,c.createElement(qn,{boardId:this.match.params.boardId}));var t=(this.state.items||[]).map(this.convertTopicToElement),n="/board/".concat(this.match.params.boardId,"/tag/tag").concat(this.state.layer,"/").concat(this.match.params.tagId,"/"),a="/board/".concat(this.match.params.boardId,"/"),r="/board/".concat(this.match.params.boardId,"/best/"),o="/board/".concat(this.match.params.boardId,"/save/");"/board/".concat(this.match.params.boardId,"/record/");return c.createElement("div",{className:"listContent "},c.createElement(Wn,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:n,tag:this.state.tags}),c.createElement("div",{className:"column tagColumn"},c.createElement("div",{className:"row board-topBar"},c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:a}," 全部")),c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:r},"精华")),c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:o},"保存"))),c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{style:{marginRight:"14rem"}},c.createElement("span",null,"作者")),c.createElement("div",{style:{marginRight:"8rem"}},c.createElement("span",null,"最后回复")))),c.createElement("div",null,t)),c.createElement("div",{className:"listContentBottom"},c.createElement(cn,{page:e,totalPage:this.state.totalPage,url:n})))},t}(zn),Qn=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.state={items:[],totalPage:0,boardInfo:{masters:[],topicCount:1},fetchState:"ok",tags:[]},a}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:return(e=this.match.params.page)||(e=1),[4,Wr(this.match.params.boardId)];case 1:return t=o.sent(),[4,ro(this.match.params.tag1Id,this.match.params.tag2Id,this.match.params.boardId,e)];case 2:return n=o.sent(),[4,Jr(this.match.params.boardId)];case 3:return a=o.sent(),r=this.getTotalListPage(n.count),this.setState({items:n.topics,totalPage:r,boardInfo:t,fetchState:n,tags:a}),[2]}}))}))},t.prototype.convertTopicToElement=function(e){return c.createElement(ea,Object(i.a)({key:e.id},e))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return n=e.match.params.page,t=n?parseInt(n):1,[4,Wr(e.match.params.boardId)];case 1:return a=i.sent(),[4,Jr(e.match.params.boardId)];case 2:return r=i.sent(),[4,ro(e.match.params.tag1Id,e.match.params.tag2Id,e.match.params.boardId,t)];case 3:return o=i.sent(),s=this.getTotalListPage(o.count),this.setState({items:o.topics,totalPage:s,boardInfo:a,fetchState:o,tags:r}),[2]}}))}))},t.prototype.getTotalListPage=function(e){return er(e)},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1;1!==parseInt(this.match.params.page)&&this.match.params.page||c.createElement("div",null,c.createElement(qn,{boardId:this.match.params.boardId}));var t=(this.state.items||[]).map(this.convertTopicToElement),n="/board/".concat(this.match.params.boardId,"/tags/tag1/").concat(this.match.params.tag1Id,"/tag2/").concat(this.match.params.tag2Id,"/"),a="/board/".concat(this.match.params.boardId,"/"),r="/board/".concat(this.match.params.boardId,"/best/"),o="/board/".concat(this.match.params.boardId,"/save/");"/board/".concat(this.match.params.boardId,"/record/");return c.createElement("div",{className:"listContent "},c.createElement(Wn,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:n,tag:this.state.tags}),c.createElement("div",{className:"column tagColumn"},c.createElement("div",{className:"row board-topBar"},c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:a}," 全部")),c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:r},"精华")),c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:o},"保存"))),c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{style:{marginRight:"14rem"}},c.createElement("span",null,"作者")),c.createElement("div",{style:{marginRight:"8rem"}},c.createElement("span",null,"最后回复")))),c.createElement("div",null,t)),c.createElement("div",{className:"listContentBottom"},c.createElement(cn,{page:e,totalPage:this.state.totalPage,url:n})))},t}(zn),Kn=function(e){function t(t){var n=e.call(this,t)||this;return n.state={boardId:135,totalPage:1,curPage:1,tags:null,data:[]},n}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return(t=e.match.params.page)||(t=1),[4,Oo(n=this.match.params.boardId,20*(t-1),20)];case 1:return a=i.sent(),r=parseInt(((a.count-.5)/20+1).toString()),o=a.boardEvents,[4,Jr(this.match.params.boardId)];case 2:return s=i.sent(),this.setState({boardId:n,totalPage:r,curPage:t,tags:s,data:o}),[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return e=this.match.params.boardId,(t=this.match.params.page)||(t=1),[4,Oo(e,20*(t-1),20)];case 1:return n=s.sent(),a=parseInt(((n.count-.5)/20+1).toString()),r=n.boardEvents,[4,Jr(this.match.params.boardId)];case 2:return o=s.sent(),this.setState({boardId:e,totalPage:a,curPage:t,tags:o,data:r}),[2]}}))}))},t.prototype.convertRecordToElement=function(e){return c.createElement(ta,{id:e.id,topicId:e.topicId,boardId:e.boardId,targetUserName:e.targetUserName,operatorUserName:e.operatorUserName,content:e.content,time:e.time,ip:e.ip,isDeleted:e.isDeleted})},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1,t=this.state.data.map(this.convertRecordToElement),n="/board/".concat(this.match.params.boardId,"/record/");return c.createElement("div",{className:"listContent "},c.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},c.createElement(cn,{page:e,totalPage:this.state.totalPage,url:n})),c.createElement("div",{className:"column tagColumn"},c.createElement("div",{className:"row board-topBar"},c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{className:"listContentTag",style:{alignItems:"center",width:"5rem",textAlign:"center"}},c.createElement("span",null,"对象")),c.createElement("div",{className:"listContentTag",style:{alignItems:"center",width:"46rem",textAlign:"center"}},c.createElement("span",null,"内容")),c.createElement("div",{className:"listContentTag",style:{alignItems:"center",width:"6rem",textAlign:"center"}},c.createElement("span",null,"时间")),c.createElement("div",{className:"listContentTag",style:{alignItems:"center",width:"11rem",textAlign:"center"}},c.createElement("span",null,"操作人")))),c.createElement("div",null,t)),c.createElement(cn,{page:e,totalPage:this.state.totalPage,url:n}))},t}(zn),Xn=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.state={items:[],totalPage:0,tags:[]},a}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return(e=this.match.params.page)||(e=1),[4,ur(e,this.match.params.boardId)];case 1:return t=r.sent(),[4,Jr(this.match.params.boardId)];case 2:return n=r.sent(),a=t.totalPage,this.setState({items:t.boardtopics,totalPage:a,tags:n}),[2]}}))}))},t.prototype.convertTopicToElement=function(e){return c.createElement(ea,Object(i.a)({key:e.id},e))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return t=e.match.params.page,[4,ur(t?parseInt(t):1,e.match.params.boardId)];case 1:return n=r.sent(),a=n.totalPage,this.setState({items:n.boardtopics,totalPage:a}),[2]}}))}))},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1,t=null;1!==parseInt(this.match.params.page)&&this.match.params.page||(t=c.createElement("div",null,c.createElement(qn,{boardId:this.match.params.boardId})));var n=(this.state.items||[]).map(this.convertTopicToElement),a="/board/".concat(this.match.params.boardId,"/best/"),r="/board/".concat(this.match.params.boardId,"/save/"),o="/board/".concat(this.match.params.boardId,"/"),s="/board/".concat(this.match.params.boardId,"/record/");return c.createElement("div",{className:"listContent "},c.createElement(Wn,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:a,tag:this.state.tags}),c.createElement("div",{className:"column tagColumn"},c.createElement("div",{className:"row board-topBar"},c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:o},"全部")),c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:a},"精华")),c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:r},"保存"))),c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{style:{marginRight:"14rem"}},c.createElement("span",null,"作者")),c.createElement("div",{style:{marginRight:"8rem"}},c.createElement("span",null,"最后回复")))),t,c.createElement("div",null,n)),c.createElement("div",{className:"listContentBottom"},c.createElement(cn,{page:e,totalPage:this.state.totalPage,url:a}),c.createElement(vt.a,{to:s},c.createElement("div",{className:"boardRecordBtn"},"查看版面事件"))))},t}(zn),Zn=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.state={items:[],totalPage:0,tags:[]},a}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return(e=this.match.params.page)||(e=1),[4,mr(e,this.match.params.boardId)];case 1:return t=r.sent(),n=t.totalPage,[4,Jr(this.match.params.boardId)];case 2:return a=r.sent(),this.setState({items:t.boardtopics,totalPage:n,tags:a}),[2]}}))}))},t.prototype.convertTopicToElement=function(e){return c.createElement(ea,Object(i.a)({key:e.id},e))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return t=e.match.params.page,[4,mr(t?parseInt(t):1,e.match.params.boardId)];case 1:return n=a.sent(),this.setState({items:n.boardtopics}),[2]}}))}))},t.prototype.render=function(){var e=this.match.params.page?parseInt(this.match.params.page):1,t=null;1!==parseInt(this.match.params.page)&&this.match.params.page||(t=c.createElement("div",null,c.createElement(qn,{boardId:this.match.params.boardId})));var n=(this.state.items||[]).map(this.convertTopicToElement),a="/board/".concat(this.match.params.boardId,"/best/"),r="/board/".concat(this.match.params.boardId,"/save/"),o="/board/".concat(this.match.params.boardId,"/"),s="/board/".concat(this.match.params.boardId,"/record/");return c.createElement("div",{className:"listContent "},c.createElement(Wn,{page:e,totalPage:this.state.totalPage,boardid:this.match.params.boardId,url:r,tag:this.state.tags}),c.createElement("div",{className:"column tagColumn"},c.createElement("div",{className:"row board-topBar"},c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:o},"全部")),c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:a},"精华")),c.createElement("div",{className:"listContentTag"},c.createElement(vt.a,{to:r},"保存"))),c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{style:{marginRight:"14rem"}},c.createElement("span",null,"作者")),c.createElement("div",{style:{marginRight:"8rem"}},c.createElement("span",null,"最后回复")))),t,c.createElement("div",null,n)),c.createElement("div",{className:"listContentBottom"},c.createElement(cn,{page:e,totalPage:this.state.totalPage,url:r}),c.createElement(vt.a,{to:s},c.createElement("div",{className:"boardRecordBtn"},"查看版面事件"))))},t}(zn),ea=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.state={pager:[],tag1:"",tag2:""},a}return Object(i.c)(t,e),t.prototype.componentWillMount=function(){if("number"==typeof this.props.replyCount){var e=this.props.replyCount+1,t=e%10==0?e/10:(e-e%10)/10+1,n=[];if(1===t);else if(t<=7)for(var a=1;a<=t;a++)n.push(a);else n.push(1,2,3,4,-1,t-2,t-1,t);"#title".concat(this.props.id);this.setState({pager:n})}},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return"number"==typeof this.props.replyCount&&(e="#title".concat(this.props.id),null!=this.props.highlightInfo&&(1==this.props.highlightInfo.isBold&&ve(e).css("font-weight","bold"),1==this.props.highlightInfo.isItalic&&ve(e).css("font-style","italic"),null!=this.props.highlightInfo.color&&ve(e).css("color",this.props.highlightInfo.color))),[4,no(this.props.tag1)];case 1:return t=r.sent(),[4,no(this.props.tag2)];case 2:return n=r.sent(),a={tag1:t||"",tag2:n||""},this.setState(a),[2]}}))}))},t.prototype.generateListPager=function(e){var t="/topic/".concat(this.props.id,"/").concat(e);return-1!=e?c.createElement("div",{style:{marginRight:"0.3rem"}},c.createElement(vt.a,{style:{color:"#79b8ca"},to:t},e)):c.createElement("div",{style:{marginRight:"0.3rem"}},"...")},t.prototype.render=function(){if("number"==typeof this.props.replyCount){var e=void 0;e=0===this.props.topState?"changeColor":"changeTopColor";var t="topic".concat(this.props.id),n="/topic/".concat(this.props.id),a="title".concat(this.props.id),r=void 0,o=void 0;o=ua()?ua().name:"",0===this.props.topState&&(r=c.createElement("div",{style:{width:"1rem",justifyContent:"flex-start"}},c.createElement("i",{style:{color:"#B0B0B0"},className:"fa fa-envelope fa-lg"}))),o===this.props.userName&&(r=c.createElement("div",{style:{width:"1rem",justifyContent:"flex-start"}},c.createElement("i",{style:{color:"#FFC90E"},className:"fa fa-envelope fa-lg"}))),this.props.replyCount>100&&0===this.props.topState&&(r=c.createElement("div",{style:{width:"1rem",justifyContent:"flex-start"}},c.createElement("i",{style:{color:"red"},className:"fa fa-envelope-open fa-lg"}))),1===this.props.state&&(r=c.createElement("div",{style:{width:"1rem",justifyContent:"flex-start"}},c.createElement("i",{style:{color:"#B0B0B0"},className:"fa fa-lock fa-lg"})));var s=this.props.hitCount;this.props.hitCount>1e5?s=((this.props.hitCount-this.props.hitCount%1e4)/1e4).toString()+"万":this.props.hitCount>1e4&&(s=(this.props.hitCount/1e4).toFixed(1).toString()+"万"),1===this.props.bestState&&(r=c.createElement("div",{style:{width:"1rem",justifyContent:"flex-start"}},c.createElement("i",{style:{color:"#FF1493"},className:"fa fa-star fa-lg"}))),2===this.props.topState?r=c.createElement("div",{style:{width:"1rem",justifyContent:"flex-start"}},c.createElement("i",{style:{color:"orange"},className:"fa fa-chevron-circle-up fa-lg"})):4===this.props.topState&&(r=c.createElement("div",{style:{width:"1rem",justifyContent:"flex-start"}},c.createElement("i",{style:{color:"red"},className:"fa fa-arrow-circle-up fa-lg"})));var i="#000",l="normal",u="normal";this.props.highlightInfo&&(this.props.highlightInfo.isBold&&(l="bold"),this.props.highlightInfo.isItalic&&(u="italic"),this.props.highlightInfo.color&&(i=this.props.highlightInfo.color));var m=null;if(0===this.props.topState){var p="topic_".concat(this.props.id);m=c.createElement("div",{className:"opTitleCheckbox",style:{alignContent:"center",display:"none"}},c.createElement("input",{id:p,className:"opTitleCheckboxValue",type:"checkbox"}))}var d="";return this.state.tag2&&!this.props.topState&&(d="[".concat(this.state.tag2,"]").concat(d)),this.state.tag1&&!this.props.topState&&(d="[".concat(this.state.tag1,"]").concat(d)),this.props.isVote&&(d="[投票]".concat(d)),c.createElement("div",{style:{display:"flex"},id:e},m,c.createElement(vt.a,{to:n},c.createElement("div",{className:"rofw topicInList",id:t},c.createElement("div",{className:"listTitleAndPager"},c.createElement("div",{className:"row listTitleAndIcon"},r,c.createElement("div",{className:"listTitle",id:a,style:{marginLeft:"1rem",color:i,fontWeight:l,fontStyle:u}},c.createElement("span",{className:"listTitleTag",style:{}},d),this.props.title)),c.createElement("div",{style:{display:"flex",fontSize:"0.75rem",marginLeft:"1rem",width:"auto"}},this.state.pager.map(this.generateListPager.bind(this)))),c.createElement("div",{className:"row",style:{width:"28rem",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between",fontSize:"0.75rem",marginBottom:"-4px"}},c.createElement("div",{style:{width:"7.5rem",textAlign:"left"}}," ",c.createElement("span",null,this.props.userName||"匿名")),c.createElement("div",{className:"row topicIcon"},c.createElement("div",{id:"disliked",style:{display:"flex",width:"4.5rem"}},c.createElement("i",{className:"fa fa-eye fa-lg"}),c.createElement("span",{className:"timeProp tagSize"},s)),c.createElement("div",{id:"commentsAmount",style:{display:"flex",width:"3.5rem"}},c.createElement("i",{className:"fa fa-commenting-o fa-lg"}),c.createElement("span",{className:"timeProp tagSize"},this.props.replyCount))),c.createElement("div",{className:"lastReply"},c.createElement("span",null,this.props.lastPostUser,"/",Rn(this.props.lastPostTime).format("YY-MM-DD HH:mm")))))))}return this.props,null},t}(c.Component),ta=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.ipOver=a.ipOver.bind(a),a.ipOut=a.ipOut.bind(a),a}return Object(i.c)(t,e),t.prototype.ipOver=function(){"*"!==this.props.ip&&(this.props.ip,ve("#ip_".concat(this.props.id)).removeClass("displaynone"))},t.prototype.ipOut=function(){ve("#ip_".concat(this.props.id)).addClass("displaynone")},t.prototype.render=function(){var e;return e=this.props.targetUserName?c.createElement("a",{href:"/user/name/".concat(this.props.targetUserName),target:"_blank"},this.props.targetUserName):this.props.targetUserName||182==this.props.boardId?"匿名用户":"不适用",c.createElement("div",{className:"boardRecord",id:"changeColor"},c.createElement("div",{className:"boardRecord-1"},e),c.createElement("div",{className:"boardRecord-2"},c.createElement("a",{href:"/topic/".concat(this.props.topicId),target:"_blank"},this.props.content)),c.createElement("div",{className:"boardRecord-3"},Rn(this.props.time).format("YY-MM-DD HH:mm")),c.createElement("div",{className:"boardRecord-4",onMouseOver:this.ipOver,onMouseOut:this.ipOut},c.createElement("a",{href:"/user/name/".concat(this.props.operatorUserName),target:"_blank"},this.props.operatorUserName)),c.createElement("div",{className:"boardRecord-ip displaynone",id:"ip_".concat(this.props.id)},this.props.ip))},t}(c.Component);function na(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){return t=Zt.db.transaction("userInfo","readwrite"),n=t.objectStore("userInfo"),a=n.put({userInfo:e,addTime:Date.now()}),[2,new Promise((function(e,t){a.onsuccess=function(t){return e()},a.onerror=function(e){return t()}}))]}))}))}function aa(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){if(t=Zt.db.transaction("userInfo","readonly"),n=t.objectStore("userInfo"),"number"==typeof e)a=n.get(e);else{if("string"!=typeof e)return[2,{id:null}];a=n.index("name").get(e)}return[2,new Promise((function(e,t){a.onsuccess=function(t){a.result&&a.result.addTime+36e5>Date.now()?e(a.result.userInfo):e(void 0)},a.onerror=function(e){return t()}}))]}))}))}function ra(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){return t=Zt.db.transaction("userInfo","readonly"),n=t.objectStore("userInfo"),[2,Promise.all(e.map((function(e){var t;if("number"==typeof e)t=n.get(e);else{if("string"!=typeof e)return{id:null};t=n.index("name").get(e)}return new Promise((function(e,n){t.onsuccess=function(n){t.result&&t.result.addTime+36e5>Date.now()?e(t.result.userInfo):e(void 0)},t.onerror=function(e){return n()}}))})))]}))}))}function oa(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){return t=Zt.db.transaction("userInfo","readwrite"),n=t.objectStore("userInfo"),a=n.delete(e),[2,new Promise((function(e,t){a.onsuccess=function(){return e()},a.onerror=function(){return t()}}))]}))}))}function sa(e,t){var n;"object"==typeof t?(n=JSON.stringify(t),n="obj-".concat(n)):n="str-".concat(t),sessionStorage.setItem(e,n)}function ia(e){var t=sessionStorage.getItem(e);if(t)return 0===t.indexOf("obj-")?(t=t.slice(4),JSON.parse(t)):0===t.indexOf("str-")?t.slice(4):void 0}function ca(e){"all"!=e?sessionStorage.removeItem(e):sessionStorage.clear()}function la(e,t,n){void 0===n&&(n=0);try{var a=t;if("object"==typeof a?(a=JSON.stringify(a),a="obj-".concat(a)):a="str-".concat(a),localStorage.setItem(e,a),0!==n){var r=(new Date).getTime()+1e3*n;localStorage.setItem("".concat(e,"_expirationTime"),r.toString().slice(0,r.toString().length-3))}else localStorage.removeItem("".concat(e,"_expirationTime"))}catch(o){!function(){var e=pa("refresh_token"),t=localStorage.getItem("refresh_token_expirationTime"),n=pa("temporaryContent"),a=pa("noticeSetting"),r=localStorage.getItem("userInfo"),o=localStorage.getItem("version");localStorage.clear(),console.info("localStorage cleared"),localStorage.setItem("version",o),e&&(la("refresh_token",e),localStorage.setItem("refresh_token_expirationTime",t),localStorage.setItem("userInfo",r));n&&la("temporaryContent",n);a&&la("noticeSetting",a)}(),la(e,t,n)}}function ua(){return pa("userInfo")}function ma(){return pa("accessToken")}function pa(e){var t=localStorage.getItem(e),n=localStorage.getItem("".concat(e,"_expirationTime"));if(n&&(new Date).getTime()>1e3*Number.parseInt(n))return void localStorage.removeItem(e);if(t){if(0===t.indexOf("obj-")){t=t.slice(4);var a=JSON.parse(t);if("userInfo"===e){var r=a;if(1===r.lockState||2===r.lockState)return localStorage.clear(),proxyLoc(window.location).href="https://www.cc98.org/logon",a}return a}return 0===t.indexOf("str-")?t.slice(4):void 0}}function da(e){"all"!=e?localStorage.removeItem(e):localStorage.clear()}function ha(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return(e=pa("refresh_token"))?(t=ma())?[2,t]:(n=Kt.config.openIdUrl+"/connect/token",a={client_id:"9a1fd200-8687-44b1-4c20-08d50a96e5cd",client_secret:"8b53f727-08e2-4509-8857-e34bf92b27f2",grant_type:"refresh_token",refresh_token:e},(r=new Headers).append("Content-Type","application/x-www-form-urlencoded"),[4,fetch(n,{method:"POST",headers:r,body:Object.keys(a).map((function(e){return"".concat(e,"=").concat(a[e])})).join("&")})]):[2,null];case 1:return[4,s.sent().json()];case 2:return(o=s.sent()).access_token?(la("accessToken",t="Bearer "+encodeURIComponent(o.access_token),o.expires_in),[2,t]):(da("userInfo"),da("accessToken"),da("refresh_token"),Wo.dispatch(Y()),Ho.push("/logon"),[2])}}))}))}function fa(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,ha()];case 1:return e=n.sent(),(t=new Headers).append("Authorization",e),[2,t]}}))}))}function ga(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:return n=Kt.config.apiUrl,a=new URL(e,n).toString(),t?[4,fetch(a,t)]:[3,2];case 1:return r=o.sent(),[3,4];case 2:return[4,fetch(a)];case 3:r=o.sent(),o.label=4;case 4:return[2,r]}}))}))}(Xt=Kt||(Kt={})).loadConfig=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,fetch("/static/config.json")];case 1:if(!(e=a.sent()).ok)throw new Error("系统无法读取配置文件，网站无法正常运行");return[4,e.json()];case 2:Xt.config=a.sent(),a.label=3;case 3:return a.trys.push([3,6,,7]),[4,fetch("/static/config.Production.json")];case 4:return[4,a.sent().json()];case 5:return t=a.sent(),Xt.config=Object(i.a)(Object(i.a)({},Xt.config),t),[3,7];case 6:return a.sent(),[3,7];case 7:return n=new CustomEvent("configload",{detail:Xt.config}),window.dispatchEvent(n),[2]}}))}))},(en=Zt||(Zt={})).start=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){return(e=indexedDB.open("cc98",1)).onupgradeneeded=function(t){e.result.objectStoreNames.contains("userInfo")||e.result.createObjectStore("userInfo",{keyPath:"userInfo.id"}).createIndex("name","userInfo.name",{unique:!0})},en.db?[2]:[2,new Promise((function(t,n){e.onsuccess=function(n){en.db=e.result,t()},e.onerror=function(e){return n(e)}}))]}))}))};var ba=!!window.indexedDB&&-1===navigator.userAgent.indexOf("MSIE");function va(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,7,,8]),ba?[4,aa(e)]:[3,2];case 1:return(t=r.sent())?[2,t]:[3,3];case 2:if(t=pa("number"==typeof e?"userId_".concat(e):"userName_".concat(e)))return[2,t];r.label=3;case 3:return n="number"==typeof e?"/user/".concat(e):"/user/name/".concat(encodeURIComponent(e)),[4,fa()];case 4:return a=r.sent(),[4,ga(n,{headers:a})];case 5:return[4,r.sent().json()];case 6:return t=r.sent(),ba?na(t):(la("userId_".concat(t.id),t,3600),la("userName_".concat(t.name),t,3600)),[2,t];case 7:return r.sent(),[3,8];case 8:return[2]}}))}))}function ya(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,8,,9]),t=void 0,ba?[4,ra(e)]:[3,2];case 1:return t=s.sent().map((function(t,n){return t||e[n]})),[3,3];case 2:t=e.map((function(e){return pa("number"==typeof e?"userId_".concat(e):"userName_".concat(e))||e})),s.label=3;case 3:return n=t.filter((function(e){return"number"==typeof e||"string"==typeof e})),a=[],0===n.length?[3,7]:(r=e.some((function(e){return"number"==typeof e}))?"/user?id=".concat(n.join("&id=")):"/user/name?name=".concat(n.map(encodeURIComponent).join("&name=")),[4,fa()]);case 4:return o=s.sent(),[4,ga(r,{headers:o})];case 5:return[4,s.sent().json()];case 6:a=s.sent(),s.label=7;case 7:return[2,t.map((function(e){if("number"!=typeof e&&"string"!=typeof e)return e;var t=a.shift();return t?(ba?na(t):(la("userId_".concat(t.id),t,3600),la("userName_".concat(t.name),t,3600)),t):void 0}))];case 8:return s.sent(),[3,9];case 9:return[2]}}))}))}for(var Ea=[{id:758,name:"似水流年"},{id:182,name:"心灵之约"},{id:184,name:"论坛指南"},{id:68,name:"学习天地"},{id:581,name:"科研学术"},{id:102,name:"留学交流"},{id:304,name:"外语学习"},{id:263,name:"考研一族"},{id:105,name:"编程技术"},{id:749,name:"社科杂谈"},{id:100,name:"校园信息"},{id:198,name:"新生宝典"},{id:777,name:"维权空间"},{id:357,name:"时政讨论"},{id:459,name:"实习兼职"},{id:515,name:"住房信息"},{id:235,name:"求职广场"},{id:782,name:"投资理财"},{id:180,name:"数码世界"},{id:30,name:"动漫讨论"},{id:760,name:"文学交流"},{id:759,name:"曲苑杂坛"},{id:26,name:"读书时光"},{id:164,name:"影视综艺"},{id:25,name:"天籁之音"},{id:312,name:"怪力乱神"},{id:91,name:"游戏广场"},{id:115,name:"休闲娱乐"},{id:744,name:"NexusHD"},{id:80,name:"日用交易"},{id:562,name:"数码交易"},{id:563,name:"服饰美肤"},{id:569,name:"代理专区"},{id:764,name:"每日优惠"},{id:114,name:"郁闷小屋"},{id:81,name:"感性空间"},{id:152,name:"缘分天空"},{id:144,name:"一路走来"},{id:135,name:"开怀一笑"},{id:15,name:"体育运动"},{id:147,name:"行者无疆"},{id:226,name:"电脑医院"},{id:258,name:"宠物情缘"},{id:551,name:"绿色心情"},{id:173,name:"光影留痕"},{id:353,name:"真我风采"},{id:229,name:"美食天地"},{id:101,name:"个性生活"},{id:261,name:"健康贴士"},{id:783,name:"艺术园地"},{id:315,name:"98网事"},{id:624,name:"计算机通识答疑"},{id:412,name:"精品课程C语言答疑中心"},{id:408,name:"陈建海老师答疑"},{id:47,name:"陈越老师答疑"},{id:49,name:"方红光老师答疑"},{id:20,name:"冯晓霞老师答疑"},{id:140,name:"古红英老师答疑"},{id:50,name:"徐镜春老师答疑"},{id:41,name:"楼学庆老师答疑"},{id:52,name:"陆汉权老师答疑"},{id:21,name:"何善蒙老师答疑"},{id:205,name:"张引老师的答疑版"},{id:151,name:"孙建伶老师答疑"},{id:7,name:"王何宇老师答疑"},{id:36,name:"王云武老师答疑"},{id:83,name:"魏宝刚老师答疑"},{id:149,name:"李岩老师答疑"},{id:42,name:"杨起帆老师答疑"},{id:23,name:"肖少拥老师答疑"},{id:183,name:"陆魁军老师答疑"},{id:292,name:"高晴老师答疑"},{id:204,name:"冯雁老师答疑"},{id:207,name:"郑扣根老师答疑"},{id:208,name:"翁恺老师答疑"},{id:224,name:"钱抱清老师答疑"},{id:311,name:"杨义群老师答疑"},{id:323,name:"白洪欢老师答疑"},{id:325,name:"贾厚玉老师答疑"},{id:375,name:"张重辉老师答疑"},{id:383,name:"张彤彧老师答疑"},{id:423,name:"方宁老师答疑版"},{id:427,name:"季江民老师答疑版块"},{id:432,name:"陈平老师答疑"},{id:440,name:"丁展平老师答疑"},{id:442,name:"谈艺论戏"},{id:448,name:"张军老师答疑"},{id:451,name:"胡兰青老师答疑"},{id:454,name:"董亚波老师答疑"},{id:457,name:"史治国老师答疑"},{id:494,name:"方富民老师答疑"},{id:501,name:"朱晔老师答疑"},{id:513,name:"邢卫老师答疑"},{id:514,name:"周波老师答疑"},{id:535,name:"面向对象程序设计答疑中心"},{id:540,name:"陆维敏老师答疑"},{id:546,name:"苏振华老师答疑"},{id:548,name:"姜晓红老师答疑"},{id:559,name:"吴江琴老师答疑"},{id:568,name:"杨万喜老师答疑"},{id:574,name:"胡敏老师答疑"},{id:578,name:"蒋文华老师答疑"},{id:579,name:"陈华钧老师答疑"},{id:588,name:"吕萍老师答疑"},{id:589,name:"黄正谦老师答疑"},{id:590,name:"王强老师答疑"},{id:595,name:"陈志坚老师答疑"},{id:575,name:"顾宗华老师答疑版"},{id:599,name:"彭笑刚老师答疑"},{id:600,name:"楼辉老师答疑"},{id:601,name:"沈钦仙老师答疑"},{id:602,name:"孙凌云老师答疑"},{id:603,name:"孟涛老师答疑"},{id:615,name:"孟炳泉老师答疑"},{id:626,name:"杨颖老师答疑"},{id:629,name:"陈实老师答疑"},{id:631,name:"管理学课程交流"},{id:632,name:"陈纯老师答疑"},{id:633,name:"近现代中国的人物研究答疑版"},{id:634,name:"董平老师答疑"},{id:635,name:"戴俊飞老师答疑版"},{id:640,name:"刘海风老师答疑"},{id:710,name:"沈语冰老师答疑"},{id:714,name:"王跃明老师答疑"},{id:723,name:"李浩然老师答疑"},{id:724,name:"胡吉明老师答疑"},{id:726,name:"董玮老师答疑"},{id:727,name:"王毅老师答疑"},{id:728,name:"陈文智老师答疑"},{id:733,name:"陈奇老师答疑版"},{id:745,name:"刘新国老师答疑"},{id:751,name:"李啸风物理化学答疑"},{id:752,name:"雷勇老师答疑"},{id:761,name:"高在峰老师课程交流"},{id:778,name:"彭笑刚大学化学答疑"},{id:248,name:"计算机学院"},{id:294,name:"竺可桢学院"},{id:307,name:"人文学院"},{id:145,name:"传媒学院"},{id:352,name:"经济学院"},{id:362,name:"教育杏坛"},{id:193,name:"生仪大家庭"},{id:158,name:"E电园"},{id:67,name:"管理学院"},{id:285,name:"碧水青禾"},{id:241,name:"医学院"},{id:246,name:"外国语学院"},{id:319,name:"光华法学院"},{id:320,name:"生命科学学院"},{id:321,name:"生工食品学院"},{id:341,name:"药学院"},{id:377,name:"动科天地CAS"},{id:344,name:"环资经纬"},{id:351,name:"天下为公"},{id:469,name:"航空航天学院"},{id:623,name:"海洋学院"},{id:58,name:"信电ISEE"},{id:214,name:"不败光电"},{id:371,name:"控制天下"},{id:754,name:"我是工程师"},{id:255,name:"格物致理"},{id:57,name:"数学之韵"},{id:284,name:"建工学院"},{id:775,name:"地球科学学院"},{id:774,name:"心理系"},{id:773,name:"化学系"},{id:772,name:"能源工程学院"},{id:771,name:"机械工程学院"},{id:770,name:"化工学院"},{id:769,name:"高分子系"},{id:768,name:"材料学院"},{id:767,name:"海宁国际"},{id:766,name:"艺韵古欢"},{id:765,name:"马克思主义学院"},{id:784,name:"哲学院(筹)"},{id:785,name:"文学院(筹)"},{id:786,name:"历史学院(筹)"},{id:437,name:"社团百花园"},{id:330,name:"学生社团联合会"},{id:254,name:"学生旅游协会"},{id:329,name:"程序设计竞赛"},{id:216,name:"梦想天堂"},{id:206,name:"DFM街舞社"},{id:195,name:"法学研究会"},{id:194,name:"梵音剧社"},{id:176,name:"Fantasy动漫社"},{id:165,name:"绿之源协会"},{id:310,name:"心理学会"},{id:334,name:"红十字会学生分会"},{id:347,name:"学生三农协会"},{id:369,name:"学生空手道协会"},{id:355,name:"辩论队与求是辩论社"},{id:361,name:"学生无极棋社"},{id:393,name:"爱心社"},{id:431,name:"学生校友联络协会"},{id:436,name:"杨式太极拳协会"},{id:519,name:"机器人协会"},{id:520,name:"心系西部协会"},{id:446,name:"桥牌协会"},{id:576,name:"黑白剧社"},{id:434,name:"亦心·民韵舞社"},{id:213,name:"墨语茗音"},{id:618,name:"成长互助训练营GCC"},{id:628,name:"E志者协会"},{id:303,name:"国防协会"},{id:713,name:"未企俱乐部"},{id:287,name:"SCDA"},{id:736,name:"研创CIE"},{id:264,name:"浙大广电"},{id:781,name:"心理帮帮团"},{id:467,name:"三湘四水（湖南）"},{id:468,name:"津门故里（天津）"},{id:471,name:"齐鲁青未了（山东）"},{id:472,name:"蓉汇贯川（四川）"},{id:475,name:"三秦大地（陕西）"},{id:481,name:"江南西道（江西）"},{id:482,name:"一皖情深（安徽）"},{id:480,name:"八闽来风（福建）"},{id:483,name:"燕赵飞歌（河北）"},{id:484,name:"吴韵汉风（江苏）"},{id:485,name:"辽地永宁（辽宁）"},{id:486,name:"新上海滩（上海）"},{id:489,name:"黑土风情（黑龙江）"},{id:491,name:"白山松水（吉林）"},{id:492,name:"巴渝人家（重庆）"},{id:493,name:"天山南北（新疆）"},{id:498,name:"晋善晋美（山西）"},{id:502,name:"塞上风光（内蒙古）"},{id:503,name:"彩云之南（云南）"},{id:504,name:"荆楚纵横（湖北）"},{id:505,name:"邦锦梅朵（西藏）"},{id:506,name:"粤来客栈（广东）"},{id:507,name:"鼎豫中原（河南）"},{id:511,name:"丝路花雨（甘肃）"},{id:779,name:"塞上江南（宁夏）"},{id:780,name:"西域之冲（青海）"},{id:550,name:"皇城根儿（北京）"},{id:596,name:"八桂飘香（广西）"},{id:625,name:"黔山秀水（贵州）"},{id:642,name:"椰风海韵（海南）"},{id:474,name:"八婺风情（金华）"},{id:476,name:"秀山丽水（丽水）"},{id:477,name:"山水明州（宁波）"},{id:478,name:"太湖之州（湖州）"},{id:479,name:"金瓯白鹿城（温州）"},{id:488,name:"四省通衢（衢州）"},{id:490,name:"古越绍兴（绍兴）"},{id:495,name:"千岛海韵（舟山）"},{id:496,name:"山海台州（台州）"},{id:497,name:"烟雨江南（嘉兴）"},{id:487,name:"诗画杭城（杭州）"},{id:17,name:"论坛事务"},{id:326,name:"集思广益"},{id:221,name:"版主会议厅"},{id:40,name:"站务讨论"},{id:620,name:"赞助合作"},{id:611,name:"通知通告"},{id:614,name:"莫失莫忘"},{id:286,name:"坛庆策划"},{id:245,name:"技术组工作室"},{id:753,name:"运营管理团队"},{id:747,name:"Banner申请"}],Ia=n(19),Ca=[{order:0,name:"系统默认",style:{color:"black",backgroundColor:"#ffffff"}},{order:1,name:"冬季",style:{backgroundColor:"#79b8ca",backgroundImage:"url(/static/images/header-image-thumb/winter.jpg)"}},{order:2,name:"春季（浅）",style:{backgroundColor:"#b1d396",backgroundImage:"url(/static/images/header-image-thumb/spring.jpg)"}},{order:3,name:"春季（深）",style:{backgroundColor:"#95b675",backgroundImage:"url(/static/images/header-image-thumb/spring.jpg)"}},{order:4,name:"夏季",style:{backgroundColor:"#5198d8",backgroundImage:"url(/static/images/header-image-thumb/summer.jpg)"}},{order:5,name:"秋季（橙）",style:{backgroundColor:"#F4A460",backgroundImage:"url(/static/images/header-image-thumb/autumn.jpg)"}},{order:6,name:"秋季（红）",style:{backgroundColor:"#B22222",backgroundImage:"url(/static/images/header-image-thumb/autumn.jpg)"}},{order:7,name:"双十一交友",style:{backgroundColor:"rgb(240,125,145)",backgroundImage:"url(/static/images/header-image-thumb/singleday.jpg)"}},{order:8,name:"中秋（暗）",style:{backgroundColor:"rgb(38,118,129)",backgroundImage:"url(/static/images/header-image-thumb/mid_autumn.jpg)"}},{order:9,name:"中秋（亮）",style:{backgroundColor:"rgb(52,150,159)",backgroundImage:"url(/static/images/header-image-thumb/mid_autumn.jpg)"}},{order:10,name:"小雪（暗）",style:{backgroundColor:"rgb(3, 57, 117)",backgroundImage:"url(/static/images/header-image-thumb/light_snow.jpg)"}},{order:11,name:"小雪（亮）",style:{backgroundColor:"rgb(122, 146, 194)",backgroundImage:"url(/static/images/header-image-thumb/light_snow.jpg)"}},{order:12,name:"春节（暗）",style:{backgroundColor:"rgb(205,0,0)",backgroundImage:"url(/static/images/header-image-thumb/spring_festival_dark.jpg)"}},{order:13,name:"春节（亮）",style:{backgroundColor:"rgb(214,14,36)",backgroundImage:"url(/static/images/header-image-thumb/spring_festival_light.jpg)"}},{order:14,name:"仲春",style:{backgroundColor:"rgb(70, 141, 57)",backgroundImage:"url(/static/images/header-image-thumb/zhongchun.jpg)"}},{order:15,name:"端午",style:{backgroundColor:"rgb(53, 120, 188)",backgroundImage:"url(/static/images/header-image-thumb/dragon_boat_festival.jpg)"}},{order:16,name:"清明",style:{backgroundColor:"rgb(106, 132, 113)",backgroundImage:"url(/static/images/header-image-thumb/qingming.jpg)"}},{order:17,name:"秋色之空（暗）",style:{backgroundColor:"rgb(183, 115, 65)",backgroundImage:"url(/static/images/header-image-thumb/autumn_2022.jpg)"}},{order:18,name:"秋色之空（亮）",style:{backgroundColor:"rgb(235, 142, 85)",backgroundImage:"url(/static/images/header-image-thumb/autumn_2022.jpg)"}},{order:19,name:"冬日暖雪（暗）",style:{backgroundColor:"rgb(125,85,119)",backgroundImage:"url(/static/images/header-image-thumb/winter_2022_dark.jpg)"}},{order:20,name:"冬日暖雪（亮）",style:{backgroundColor:"rgb(181, 127, 163)",backgroundImage:"url(/static/images/header-image-thumb/winter_2022.jpg)"}},{order:21,name:"春樱日和（暗）",style:{backgroundColor:"rgb(131,150,55)",backgroundImage:"url(/static/images/header-image-thumb/spring_2023.jpg)"}},{order:22,name:"春樱日和（亮）",style:{backgroundColor:"rgb(171,195,73)",backgroundImage:"url(/static/images/header-image-thumb/spring_2023.jpg)"}}],wa=[{day:"中秋（亮）",night:"中秋（暗）"},{day:"小雪（亮）",night:"小雪（暗）"},{day:"春节（亮）",night:"春节（暗）"},{day:"秋色之空（亮）",night:"秋色之空（暗）"},{day:"冬日暖雪（亮）",night:"冬日暖雪（暗）"},{day:"春樱日和（亮）",night:"春樱日和（暗）"}],Na=[],Oa=0,ja=Ca;Oa<ja.length;Oa++){var Ta=ja[Oa];Na.push(Ta.name)}var Sa=function(e){function t(t){var n=e.call(this,t)||this;return n.state=t.setting,n.handleInputChange=n.handleInputChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.resultRef=c.createRef(),n}return Object(i.c)(t,e),t.prototype.handleInputChange=function(e){var t,n=e.target,a="checkbox"===n.type?n.checked:n.value+":00",r=n.name;this.setState(((t={})[r]=a,t))},t.prototype.handleSubmit=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return e.preventDefault(),[4,this.props.onSettingChange(this.state)];case 1:return t=a.sent(),n=this.resultRef.current,clearTimeout(this.resultTimeout),t.ok?n.textContent="保存成功":n.textContent="保存失败："+t.message,n.style.display="unset",this.resultTimeout=setTimeout((function(){n.style.display="none"}),3e3),[2]}}))}))},t.prototype.render=function(){var e=wo()?[]:c.createElement("div",{title:"你当前使用的浏览器不支持切换日夜模式，因此自动切换无法工作。网站将按照你设置的固定时间进行切换。不过，你仍然可以设置这个选项，以便于在支持它的电脑和浏览器上使用这个功能。"}," ","提示"," ");return c.createElement("form",{onSubmit:this.handleSubmit},c.createElement("label",null,c.createElement("input",{className:"ant-checkbox",name:"enableDayNightSwitch",type:"checkbox",checked:this.state.enableDayNightSwitch,onChange:this.handleInputChange})," ","启用皮肤昼夜更换功能"),c.createElement("p",{className:"help-text"},"只有同时提供亮色和暗色选项的皮肤才支持昼夜更换功能。如果你选择其它皮肤，这个选项将不会产生任何效果。"),c.createElement("div",null,c.createElement("label",null,c.createElement("input",{className:"ant-checkbox",name:"syncWithBrowserDayNightMode",type:"checkbox",checked:this.state.syncWithBrowserDayNightMode,onChange:this.handleInputChange})," ","自动同步浏览器的昼夜模式 ",e)),c.createElement("p",{className:"help-text"},"你的浏览器必须支持获取昼夜模式的接口，否则这个设置将不会生效。"),c.createElement("div",null,c.createElement("label",{htmlFor:"day-start-input"},"白昼开始时刻"),c.createElement("input",{id:"day-start-input",name:"dayStartTime",type:"time",required:!0,onChange:this.handleInputChange,value:this.state.dayStartTime,style:{margin:"0px 10px"}}),c.createElement("label",{htmlFor:"night-start-input"},"夜间开始时刻"),c.createElement("input",{id:"night-start-input",name:"nightStartTime",type:"time",required:!0,onChange:this.handleInputChange,value:this.state.nightStartTime,style:{margin:"0px 10px"}})),c.createElement("p",{className:"help-text"},"当浏览器不支持获取昼夜模式的接口时，将会回退使用此设置所设定的昼夜开始时刻更换皮肤。"),c.createElement("button",{className:"ant-btn ant-btn-primary",style:{padding:"0px 10px"},type:"submit"},"保存设置"),c.createElement("span",{ref:this.resultRef,style:{marginLeft:"10px",display:"none"}}))},t}(c.Component),ka=function(e){function t(t){var n=e.call(this,t)||this;return n.handleThemeSettingChange=function(e){return Object(i.b)(n,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fa()];case 1:return(t=r.sent()).append("Content-Type","application/json"),"me/theme-setting",[4,ga("me/theme-setting",{headers:t,method:"PUT",body:JSON.stringify(e)})];case 2:if(!(n=r.sent()).ok)throw new Error(n.statusText);return a=Co(this.props.userInfo.theme,e),this.props.changeUserInfo(Object(i.a)(Object(i.a)({},this.props.userInfo),{theme:a,themeSetting:e})),Eo(a),[2,{ok:!0}];case 3:return[2,{ok:!1,message:r.sent().message}];case 4:return[2]}}))}))},n.handleSubmit=function(e){return Object(i.b)(n,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,fa()];case 1:return t=a.sent(),[4,ga("/me/theme?id=".concat(e),{headers:t,method:"PUT"})];case 2:if(!(n=a.sent()).ok)throw new Error(n.statusText);return this.props.changeUserInfo(Object(i.a)(Object(i.a)({},this.props.userInfo),{theme:e})),Eo(e),[3,4];case 3:return a.sent(),[3,4];case 4:return[2]}}))}))},n.generateButton=function(e){return c.createElement("button",{style:e.style,key:e.order,onClick:function(){return n.handleSubmit(e.order)},disabled:n.props.userInfo.theme===e.order},e.name)},n.handleThemeSettingChange=n.handleThemeSettingChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.generateButton=n.generateButton.bind(n),n}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"user-theme"},c.createElement("div",{className:"user-theme-info"},c.createElement("h2",null,"切换皮肤"),c.createElement("p",null,"当前皮肤：",Ca[this.props.userInfo.theme].name)),c.createElement("div",null,c.createElement(Sa,{setting:this.props.userInfo.themeSetting,onSettingChange:this.handleThemeSettingChange})),c.createElement("hr",null),c.createElement("div",{className:"user-theme-config"},Ca.map(this.generateButton)))},t}(c.Component);var xa=Object(Ia.b)((function(e){return{userInfo:e.userInfo.currentUserInfo}}),(function(e){return{changeUserInfo:function(t){e(Z(t))}}}))(ka);function Pa(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r,o,s,c,l,u,m;return Object(i.d)(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),a=20*(e-1),20*e-1,[4,fa()];case 1:return r=p.sent(),o=void 0,o=20*e<=n?20:1===e&&n<19?n:n-20*(e-1),s=[],[4,ga("/Board/".concat(t,"/topic?from=").concat(a,"&size=").concat(o),{headers:r})];case 2:switch((c=p.sent()).status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"]}return[4,c.json()];case 3:for(l=p.sent(),u=0;u<l.length;u++)s[u]=Object(i.a)(Object(i.a)({},l[u]),{replyCount:l[u].replyCount||0});return[2,s];case 4:return m=p.sent(),console.error(m),[3,5];case 5:return[2]}}))}))}function Ua(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,7,,8]),[4,fa()];case 1:return t=s.sent(),[4,ga("/Topic/".concat(e,"/post?from=0&size=1"),{headers:t})];case 2:return[4,s.sent().json()];case 3:return n=s.sent(),a=null,1==n[0].isAnonymous?[3,5]:[4,va(n[0].userId)];case 4:return o=s.sent(),a=Object(i.a)(Object(i.a)({},n[0]),{userInfo:o,postId:n[0].id}),[3,6];case 5:r="匿名".concat(n[0].userName.toUpperCase()),"/static/images/心灵头像.gif",o={name:r,portraitUrl:"/static/images/心灵头像.gif",id:null,privilege:"匿名用户",popularity:0,signatureCode:"",postCount:0},a=Object(i.a)(Object(i.a)({},n[0]),{userInfo:o,postId:n[0].id}),s.label=6;case 6:return[2,a];case 7:return s.sent(),[3,8];case 8:return[2]}}))}))}function Ma(e,t){for(var n in t)if(t[n]&&t[n].id===e)return t[n];return{id:e,name:"ID不存在",portraitUrl:"/static/images/default_avatar_boy.png",birthday:"1993-03-25T00:00:00",fanCount:0,followCount:0,gender:0,lastLogOnTime:"2007-12-26T02:26:00",popularity:0,prestige:0,signatureCode:"此ID已不存在，qmd无法显示"}}function _a(e,t){for(var n in t)if(t[n].name===e)return t[n];return{id:null,name:"ID不存在",portraitUrl:"/static/images/default_avatar_boy.png",birthday:"1993-03-25T00:00:00",fanCount:0,followCount:0,gender:0,lastLogOnTime:"2007-12-26T02:26:00",popularity:0,prestige:0,signatureCode:"此ID已不存在，qmd无法显示"}}function Ra(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o,s,c,l,u,m,p,d,h,f;return Object(i.d)(this,(function(g){switch(g.label){case 0:return g.trys.push([0,8,,9]),n=10*(t-1),[4,fa()];case 1:return a=g.sent(),[4,ga("/Topic/".concat(e,"/post?from=").concat(n,"&size=10"),{headers:a})];case 2:return[4,g.sent().json()];case 3:if(r=g.sent(),o=[],s=r.length,c=[],l=[],0===r.length)return[2,[]];u=0,g.label=4;case 4:if(!(u<s))return[3,7];if(r[u].content=function(e){return e.replace(/http:\/\/file\.cc98\.org/g,"https://file.cc98.org")}(r[u].content),0!=r[u].isAnonymous)return[3,6];for(m in r)c[m]=r[m].userId;return[4,ya(c)];case 5:l=g.sent(),g.label=6;case 6:return u++,[3,4];case 7:for(m=0;m<s;m++)1!=r[m].isAnonymous&&1!=r[m].isDeleted?(p=Ma(r[m].userId,l),o[m]=Object(i.a)(Object(i.a)({},r[m]),{userInfo:p,postId:r[m].id})):r[m].isAnonymous&&!r[m].isDeleted?("/static/images/心灵头像.gif",d="匿名".concat(r[m].userName.toUpperCase()),h={name:d,portraitUrl:"/static/images/心灵头像.gif",id:null,privilege:"匿名用户",popularity:0,signatureCode:null,postCount:0},o[m]=Object(i.a)(Object(i.a)({},r[m]),{userInfo:h,postId:r[m].id,isAnonymous:!0})):(h={name:"98Deleter",portraitUrl:"/static/images/deleter2.png",id:null,privilege:"匿名用户",popularity:0,signatureCode:null,postCount:0},o[m]=Object(i.a)(Object(i.a)({},r[m]),{userInfo:h,postId:r[m].id,isAnonymous:!1,isDeleted:!0,content:"该贴已被my cc98, my home"}));return[2,o];case 8:return f=g.sent(),console.error(f),[3,9];case 9:return[2]}}))}))}function Da(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fa()];case 1:return(e=n.sent()).append("Content-Type","application/json"),"1",[4,ga("/post/".concat(t,"/like"),{method:"PUT",headers:e,body:"1"})];case 2:return[2,n.sent().status];case 3:return n.sent(),[3,4];case 4:return[2]}}))}))}function La(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fa()];case 1:return(e=n.sent()).append("Content-Type","application/json"),"2",[4,ga("/post/".concat(t,"/like"),{method:"PUT",headers:e,body:"2"})];case 2:return[2,n.sent().status];case 3:return n.sent(),[3,4];case 4:return[2]}}))}))}function Fa(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c;return Object(i.d)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,10,,11]),[4,fa()];case 1:return t=l.sent(),[4,ga("/Topic/".concat(e,"/hot-post"),{headers:t})];case 2:return[4,l.sent().json()];case 3:n=l.sent(),a=[],r=n.length,o=0,l.label=4;case 4:return o<r?1==n[o].isAnonymous?[3,7]:[4,ga("/user/name/".concat(encodeURIComponent(n[o].userName)))]:[3,9];case 5:return[4,l.sent().json()];case 6:return c=l.sent(),a[o]=Object(i.a)(Object(i.a)({},n[o]),{userInfo:c,postId:n[o].id}),[3,8];case 7:"/static/images/心灵头像.gif",s="匿名".concat(n[o].userName.toUpperCase()),null,n[o].lastUpdateAuthor&&"匿名".concat(n[o].lastUpdateAuthor.toUpperCase()),c={name:s,portraitUrl:"/static/images/心灵头像.gif",id:null,privilege:"匿名用户",popularity:0,signatureCode:null,postCount:0},a[o]=Object(i.a)(Object(i.a)({},n[o]),{userInfo:c,postId:n[o].id}),l.label=8;case 8:return o++,[3,4];case 9:return[2,a];case 10:return l.sent(),[3,11];case 11:return[2]}}))}))}function Ba(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r,o,s,c,l,u,m,p,d;return Object(i.d)(this,(function(h){switch(h.label){case 0:return h.trys.push([0,6,,7]),[4,Ua(e)];case 1:return h.sent(),a=void 0,void 0,a=10*(t-1),[4,ha()];case 2:return r=h.sent(),(o=new Headers).append("Authorization",r),[4,ga("/Post/topic/user?topicid=".concat(e,"&userId=").concat(n,"&from=").concat(a,"&size=10"),{headers:o})];case 3:return[4,h.sent().json()];case 4:return s=h.sent(),c=[],l=s.length,s[0].count,[4,va(s[0].userId)];case 5:for(u=h.sent(),m=0;m<l;m++)1!=s[m].isAnonymous?c[m]=Object(i.a)(Object(i.a)({},s[m]),{userInfo:u,postId:s[m].id}):("/static/images/_心灵之约.png",p="匿名".concat(s[m].userName.toUpperCase()),d={name:p,portraitUrl:"/static/images/_心灵之约.png",id:null,privilege:"匿名用户",popularity:0,signatureCode:null,postCount:0},c[m]=Object(i.a)(Object(i.a)({},s[m]),{userInfo:d}));return[2,c];case 6:return h.sent(),[3,7];case 7:return[2]}}))}))}function Aa(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v,y,E;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(!Wa())return Wo.dispatch(de("LogOut")),[2,null];i.label=1;case 1:return i.trys.push([1,15,,16]),[4,fa()];case 2:return t=i.sent(),[4,ga("/topic/random-recommendation?size=".concat(e),{headers:t})];case 3:switch((n=i.sent()).status){case 401:Wo.dispatch(de("UnauthorizedTopic"));case 403:Wo.dispatch(de("OperationForbidden"))}return[4,n.json()];case 4:a=i.sent(),r=[],o=[],s=[],c=0,l=a,i.label=5;case 5:return c<l.length?((u=l[c]).topic.time=Ka(u.topic.time),u.topic.lastPostTime=Ka(u.topic.lastPostTime),u.topic.hitCount>1e4&&(u.topic.hitCount>1e5?(m=parseInt("".concat(u.topic.hitCount/1e4)),u.hitCount="".concat(m,"万")):(m=parseInt("".concat(u.topic.hitCount/1e3))/10,u.topic.hitCount="".concat(m,"万"))),u.topic.floorCount=u.topic.replyCount+1,u.topic.replyCount>1e4&&(u.topic.replyCount>1e5?(m=parseInt("".concat(u.topic.replyCount/1e4)),u.topic.replyCount="".concat(m,"万")):(m=parseInt("".concat(u.topic.replyCount/1e3))/10,u.topic.replyCount="".concat(m,"万"))),u.topic.tag1?(p=u.topic,[4,no(u.topic.tag1)]):[3,8]):[3,13];case 6:return p.tag1=i.sent(),u.topic.tag2?(d=u.topic,[4,no(u.topic.tag2)]):[3,8];case 7:d.tag2=i.sent(),i.label=8;case 8:return u.topic.isAnonymous?[3,10]:(h=u.topic,[4,$a(u.topic.boardId)]);case 9:return h.boardName=i.sent(),r.push(u),o.push(u.topic.userId),[3,12];case 10:return u.topic.portraitUrl="/static/images/_心灵之约.png",u.topic.userName="匿名用户",f=u.topic,[4,$a(u.topic.boardId)];case 11:f.boardName=i.sent(),s.push(u),i.label=12;case 12:return c++,[3,5];case 13:return[4,lo(o)];case 14:for(v in g=i.sent(),r)b=Ma(r[v].topic.userId,g),r[v].topic.portraitUrl=b.portraitUrl;for(v=0,y=0,E=0;v<a.length;v++)y===r.length?(a[v]=s[E],E++):a[v].id===r[y].id?(a[v]=r[y],y++):(a[v]=s[E],E++);return[2,a];case 15:return i.sent(),[3,16];case 16:return[2]}}))}))}function za(e,t){return void 0===t&&(t=!1),Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v,y,E,I,C;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(!Wa())return Wo.dispatch(de("LogOut")),[2,null];i.label=1;case 1:return i.trys.push([1,15,,16]),n=20,e>180&&(n=200-e),[4,fa()];case 2:return a=i.sent(),"",[4,ga(!0===t?"/topic/new-media?from=".concat(e,"&size=").concat(n):"/topic/new?from=".concat(e,"&size=").concat(n),{headers:a})];case 3:switch((r=i.sent()).status){case 401:Wo.dispatch(de("UnauthorizedTopic"));case 403:Wo.dispatch(de("OperationForbidden"))}return[4,r.json()];case 4:o=i.sent(),s=[],c=[],l=[],u=0,m=o,i.label=5;case 5:return u<m.length?((p=m[u]).time=Qa(p.time,!1),p.lastPostTime=Qa(p.lastPostTime,!1),p.hitCount>1e4&&(p.hitCount>1e5?(d=parseInt("".concat(p.hitCount/1e4)),p.hitCount="".concat(d,"万")):(d=parseInt("".concat(p.hitCount/1e3))/10,p.hitCount="".concat(d,"万"))),p.floorCount=p.replyCount+1,p.replyCount>1e4&&(p.replyCount>1e5?(d=parseInt("".concat(p.replyCount/1e4)),p.replyCount="".concat(d,"万")):(d=parseInt("".concat(p.replyCount/1e3))/10,p.replyCount="".concat(d,"万"))),p.tag1?(h=p,[4,no(p.tag1)]):[3,8]):[3,13];case 6:return h.tag1=i.sent(),p.tag2?(f=p,[4,no(p.tag2)]):[3,8];case 7:f.tag2=i.sent(),i.label=8;case 8:return p.isAnonymous?[3,10]:(g=p,[4,$a(p.boardId)]);case 9:return g.boardName=i.sent(),s.push(p),c.push(p.userId),[3,12];case 10:return p.portraitUrl="/static/images/_心灵之约.png",p.userName="匿名用户",b=p,[4,$a(p.boardId)];case 11:b.boardName=i.sent(),l.push(p),i.label=12;case 12:return u++,[3,5];case 13:return[4,lo(c)];case 14:for(E in v=i.sent(),s)y=Ma(s[E].userId,v),s[E].portraitUrl=y.portraitUrl;for(E=0,I=0,C=0;E<o.length;E++)I===s.length?(o[E]=l[C],C++):o[E].id===s[I].id?(o[E]=s[I],I++):(o[E]=l[C],C++);return[2,o];case 15:return i.sent(),[3,16];case 16:return[2]}}))}))}function Va(e,t,n,a){return Object(i.b)(this,void 0,void 0,(function(){var t,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v,y,E,I,C,w;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(!Wa())return Wo.dispatch(de("LogOut")),[2,null];i.label=1;case 1:return i.trys.push([1,22,,23]),t=20,n>180&&(t=200-n),[4,fa()];case 2:return a=i.sent(),r=void 0,-1!==e?[3,4]:[4,ga("/me/followee/topic?from=".concat(n,"&size=").concat(t),{headers:a})];case 3:return r=i.sent(),[3,10];case 4:return 0!==e?[3,6]:[4,ga("/me/custom-board/topic?from=".concat(n,"&size=").concat(t),{headers:a})];case 5:return r=i.sent(),[3,10];case 6:return-2!==e?[3,8]:[4,ga("/topic/me/favorite?from=".concat(n,"&size=").concat(t,"&order=1"),{headers:a})];case 7:return r=i.sent(),[3,10];case 8:return[4,ga("/board/".concat(e,"/topic?from=").concat(n,"&size=").concat(t),{headers:a})];case 9:r=i.sent(),i.label=10;case 10:switch(r.status){case 401:Wo.dispatch(de("UnauthorizedTopic"));case 403:Wo.dispatch(de("OperationForbidden"))}return[4,r.json()];case 11:o=i.sent(),s=[],c=[],l=[],u=0,m=o,i.label=12;case 12:return u<m.length?((p=m[u]).time=Qa(p.time),p.lastPostTime=Qa(p.lastPostTime),p.hitCount>1e4&&(p.hitCount>1e5?(d=parseInt("".concat(p.hitCount/1e4)),p.hitCount="".concat(d,"万")):(d=parseInt("".concat(p.hitCount/1e3))/10,p.hitCount="".concat(d,"万"))),p.floorCount=p.replyCount+1,p.replyCount>1e4&&(p.replyCount>1e5?(d=parseInt("".concat(p.replyCount/1e4)),p.replyCount="".concat(d,"万")):(d=parseInt("".concat(p.replyCount/1e3))/10,p.replyCount="".concat(d,"万"))),p.tag1?(h=p,[4,no(p.tag1)]):[3,15]):[3,20];case 13:return h.tag1=i.sent(),p.tag2?(f=p,[4,no(p.tag2)]):[3,15];case 14:f.tag2=i.sent(),i.label=15;case 15:return p.isAnonymous?[3,17]:(g=p,[4,$a(p.boardId)]);case 16:return g.boardName=i.sent(),s.push(p),c.push(p.userId),[3,19];case 17:return p.portraitUrl="/static/images/_心灵之约.png",p.userName="匿名用户",b=p,[4,$a(p.boardId)];case 18:b.boardName=i.sent(),l.push(p),i.label=19;case 19:return u++,[3,12];case 20:return[4,lo(c)];case 21:for(y in v=i.sent(),s)E=Ma(s[y].userId,v),s[y].portraitUrl=E.portraitUrl;for(I=0,C=0,w=0;I<o.length;I++)C===s.length?(o[I]=l[w],w++):o[I].id===s[C].id?(o[I]=s[C],C++):(o[I]=l[w],w++);return[2,o];case 22:return i.sent(),[3,23];case 23:return[2]}}))}))}function Ha(e){for(var t=0,n=Ea;t<n.length;t++){var a=n[t];if(e===a.id)return a.name}return"未知版面"}function $a(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c;return Object(i.d)(this,(function(i){switch(i.label){case 0:for(t=0,n=Ea;t<n.length;t++)if(a=n[t],e===a.id)return[2,a.name];return[4,ha()];case 1:r=i.sent(),(o=new Headers).append("Authorization",r),s="/board/".concat(e),i.label=2;case 2:return i.trys.push([2,5,,6]),[4,ga(s,{headers:o})];case 3:return[4,i.sent().json()];case 4:return c=i.sent(),[2,c.name];case 5:return i.sent(),[2,"未知版面"];case 6:return[2]}}))}))}function Wa(){var e=pa("refresh_token"),t=ua();return!(!e||!t)}function Ya(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o,s,c,l;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(!Wa())return Wo.dispatch(de("LogOut")),[2,null];i.label=1;case 1:return i.trys.push([1,6,,7]),[4,fa()];case 2:return n=i.sent(),[4,ga("/message/recent-contact-users?from=".concat(e,"&size=").concat(t),{headers:n})];case 3:return 401===(a=i.sent()).status&&Wo.dispatch(de("UnauthorizedTopic")),403===a.status&&Wo.dispatch(de("OperationForbidden")),404===a.status&&Wo.dispatch(de("NotFoundTopic")),500===a.status&&Wo.dispatch(de("ServerError")),[4,a.json()];case 4:for(l in r=i.sent(),o=[],r)o[l]=r[l].userId;return[4,lo(o)];case 5:for(l in s=i.sent(),c=[],r)c.push(Ma(r[l].userId,s));for(l in r)c[l].message=[],c[l].lastContent=r[l].lastContent,c[l].isRead=r[l].isRead;return[2,c];case 6:return i.sent(),[2,[]];case 7:return[2]}}))}))}function qa(e,t,n,a){return Object(i.b)(this,void 0,void 0,(function(){var a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:if(!Wa())return Wo.dispatch(de("LogOut")),[2,null];s.label=1;case 1:return s.trys.push([1,5,,6]),[4,fa()];case 2:return a=s.sent(),[4,ga("/message/user/".concat(e,"?from=").concat(t,"&size=").concat(n),{headers:a})];case 3:return 401===(r=s.sent()).status&&Wo.dispatch(de("UnauthorizedTopic")),403===r.status&&Wo.dispatch(de("OperationForbidden")),404===r.status&&Wo.dispatch(de("NotFoundTopic")),r.status,[4,r.json()];case 4:return o=s.sent(),[2,Ja(o)];case 5:return s.sent(),[3,6];case 6:return[2]}}))}))}function Ja(e){if(0!==e.length&&e){for(var t=0;t<e.length;t++)t+1==e.length?e[t].showTime=!0:Ga(e[t].time)-Ga(e[t+1].time)<6e4?e[t].showTime=!1:e[t].showTime=!0;return e}return e}function Ga(e){var t=Rn(e).format("YYYY-MM-DD HH:mm:ss");return new Date(t.replace(/-/g,"/")).getTime()}function Qa(e,t){void 0===t&&(t=!0);var n=Rn(e).format("YYYY/MM/DD HH:mm:ss"),a=new Date(n),r=a.getTime(),o=(new Date,(new Date).getTime()),s=(new Date((new Date).setHours(0,0,0,0)).getTime()+864e5-r)/1e3,i=a.getMonth()+1;i<10&&(i="0".concat(i));var c=a.getDate();c<10&&(c="0".concat(c));var l=a.getHours();l<10&&(l="0".concat(l));var u=a.getMinutes();u<10&&(u="0".concat(u));var m=a.getSeconds();if(m<10&&(m="0".concat(m)),s>259200)return p=t?"".concat(a.getFullYear(),"-").concat(i,"-").concat(c," ").concat(l,":").concat(u,":").concat(m):"".concat(a.getFullYear(),"-").concat(i,"-").concat(c," ").concat(l,":").concat(u);if(s>172800){var p=t?"".concat(l,":").concat(u,":").concat(m):"".concat(l,":").concat(u);return"前天 ".concat(p)}if(s>86400){var p=t?"".concat(l,":").concat(u,":").concat(m):"".concat(l,":").concat(u);return"昨天 ".concat(p)}if(o-r>36e5){p=t?"".concat(l,":").concat(u,":").concat(m):"".concat(l,":").concat(u);return"今天 ".concat(p)}return o-r>0?(u=parseInt((o-r)/6e4),"".concat(u,"分钟前")):p=t?"".concat(a.getFullYear(),"-").concat(i,"-").concat(c," ").concat(l,":").concat(u,":").concat(m):"".concat(a.getFullYear(),"-").concat(i,"-").concat(c," ").concat(l,":").concat(u)}function Ka(e){var t=Rn(e).format("YYYY/MM/DD HH:mm:ss"),n=new Date(t),a=n.getTime(),r=(new Date,(new Date).getTime(),new Date((new Date).setHours(0,0,0,0)).getTime(),n.getMonth()+1);r<10&&(r="0".concat(r));var o=n.getDate();return o<10&&(o="0".concat(o)),"".concat(n.getFullYear(),"-").concat(r,"-").concat(o)}function Xa(e,t){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u,m,p,d,h,f,g;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(!(t=proxyLoc(location).href.match(/id=(\d+)/)))return[3,18];if(n=parseInt(t[1]),e&&0!==e.length)return[3,8];r=void 0,f=void 0,h=1,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,ga("/user/basic/".concat(n))];case 2:return 404===(r=i.sent()).status&&Wo.dispatch(de("NotFoundUser")),500===r.status&&Wo.dispatch(de("ServerError")),[4,r.json()];case 3:return f=i.sent(),[3,5];case 4:return i.sent(),Wo.dispatch(de("Disconnected")),h=0,[3,5];case 5:return 1!==h?[3,7]:(a=f,[4,qa(f.id,0,10)]);case 6:a.message=i.sent(),f.message&&(f.lastContent=f.message[0]),f.isRead=!0,e=[f],i.label=7;case 7:return[3,17];case 8:for(u=0;u<e.length&&e[u].id!=n;u++);return 0!=u?[3,9]:(e[0].isRead=!0,[3,17]);case 9:return u<e.length?((m=e[u]).isRead=!0,e.splice(u,1),e.unshift(m),[3,17]):[3,10];case 10:r=void 0,f=void 0,h=1,i.label=11;case 11:return i.trys.push([11,14,,15]),[4,ga("/user/basic/".concat(n))];case 12:return 401===(r=i.sent()).status&&Wo.dispatch(de("UnauthorizedTopic")),403===r.status&&Wo.dispatch(de("OperationForbidden")),404===r.status&&Wo.dispatch(de("NotFoundTopic")),500===r.status&&Wo.dispatch(de("ServerError")),[4,r.json()];case 13:return f=i.sent(),[3,15];case 14:return i.sent(),Wo.dispatch(de("Disconnected")),h=0,[3,15];case 15:return 1!==h?[3,17]:(o=f,[4,qa(f.id,0,10)]);case 16:o.message=i.sent(),f.message&&(f.lastContent=f.message[0]),f.isRead=!0,e=[f].concat(e),i.label=17;case 17:return[3,35];case 18:if(!(s=proxyLoc(location).href.match(/name=(\S+)/)))return[3,35];if(s[1],c=s[1],e&&0!==e.length)return[3,26];p=void 0,d=void 0,h=1,i.label=19;case 19:return i.trys.push([19,22,,23]),[4,ga("/user/name/".concat(encodeURIComponent(c)))];case 20:switch((p=i.sent()).status){case 401:Wo.dispatch(de("LogOut"));case 403:Wo.dispatch(de("OperationForbidden"));case 404:Wo.dispatch(de("NotFoundTopic"));case 500:Wo.dispatch(de("ServerError"))}return[4,p.json()];case 21:return d=i.sent(),[3,23];case 22:return i.sent(),Wo.dispatch(de("Disconnected")),h=0,[3,23];case 23:return 1!=h?[3,25]:(f={id:d.id,name:d.name,portraitUrl:d.portraitUrl,message:[],lastContent:"",isRead:!0},l=f,[4,qa(f.id,0,10)]);case 24:l.message=i.sent(),f.message&&(f.lastContent=f.message[0]),e=[f],i.label=25;case 25:return[3,35];case 26:for(u=0;u<e.length&&e[u].name!=c;u++);return 0!=u?[3,27]:[3,35];case 27:return u<e.length?(m=e[u],e.splice(u,1),e.unshift(m),[3,35]):[3,28];case 28:p=void 0,d=void 0,h=1,i.label=29;case 29:return i.trys.push([29,32,,33]),[4,ga("/user/name/".concat(encodeURIComponent(c)))];case 30:switch((p=i.sent()).status){case 401:Wo.dispatch(de("UnauthorizedTopic"));case 403:Wo.dispatch(de("OperationForbidden"));case 404:Wo.dispatch(de("NotFoundTopic"));case 500:Wo.dispatch(de("ServerError"))}return[4,p.json()];case 31:return d=i.sent(),[3,33];case 32:return i.sent(),Wo.dispatch(de("Disconnected")),h=0,[3,33];case 33:return 1!=h?[3,35]:(f={id:d.id,name:d.name,portraitUrl:d.portraitUrl,message:[],lastContent:"",isRead:!0},g=f,[4,qa(f.id,0,10)]);case 34:g.message=i.sent(),f.message&&(f.lastContent=f.message[0]),e=[f].concat(e),i.label=35;case 35:return[2,e]}}))}))}function Za(e,t){return Object(i.b)(this,void 0,void 0,(function(){var e,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),[4,fa()];case 1:return e=a.sent(),[4,ga("/post/".concat(t,"/like"),{headers:e})];case 2:switch((n=a.sent()).status){case 401:Wo.dispatch(de("UnauthorizedTopic"));case 403:Wo.dispatch(de("OperationForbidden"));case 404:Wo.dispatch(de("NotFoundTopic"));case 500:Wo.dispatch(de("ServerError"))}return[4,n.json()];case 3:return[2,a.sent()];case 4:return a.sent(),[3,5];case 5:return[2]}}))}))}function er(e){return(e-e%20)/20+1}function tr(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,fa()];case 1:return n=r.sent(),[4,ga("/post/topic/specific-user?topicid=".concat(e,"&postid=").concat(t,"&from=0&size=1"),{headers:n})];case 2:return[4,r.sent().json()];case 3:return[2,(a=r.sent())[0].count%10==0?a[0].count/10:(a[0].count-a[0].count%10)/10+1];case 4:return r.sent(),[3,5];case 5:return[2]}}))}))}function nr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r,o,s,c,l;return Object(i.d)(this,(function(i){switch(i.label){case 0:a=10*(n-1),i.label=1;case 1:return i.trys.push([1,8,,9]),[4,fa()];case 2:return r=i.sent(),[4,ga("/post/topic/specific-user?topicid=".concat(e,"&postid=").concat(t,"&from=").concat(a,"&size=10"),{headers:r})];case 3:return[4,i.sent().json()];case 4:if(!(o=i.sent())[0]||!o[0].isAnonymous)return[3,5];for(l in"/static/images/心灵头像.gif",o)s="匿名".concat(o[l].userName.toUpperCase()),c={name:s,portraitUrl:"/static/images/心灵头像.gif",id:null,privilege:"匿名用户",popularity:0,signatureCode:null,postCount:0,fanCount:0},o[l].userInfo=c,o[l].postId=t;return[3,7];case 5:return[4,va(o[0].userId)];case 6:for(l in c=i.sent(),o)o[l].userInfo=c,o[l].postId=t;i.label=7;case 7:return[2,o];case 8:return i.sent(),[3,9];case 9:return[2]}}))}))}function ar(e,t){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,fa()];case 1:return(t=a.sent()).append("content-type","application/json"),[4,ga("/message",{method:"POST",headers:t,body:e})];case 2:return 401===(n=a.sent()).status&&Wo.dispatch(de("LogOut")),500===n.status&&Wo.dispatch(de("ServerError")),[2,n]}}))}))}function rr(){return window.innerHeight+window.pageYOffset+300>=document.documentElement.scrollHeight}function or(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),t="/file",[4,fa()];case 1:return n=s.sent(),(a=new FormData).append("files",e,e.name),a.append("contentType","multipart/form-data"),[4,ga(t,{method:"POST",headers:n,body:a})];case 2:return[4,(r=s.sent()).json()];case 3:if(o=s.sent(),200===r.status&&0!==o.length)return[2,{isSuccess:!0,content:o[0]}];throw{};case 4:return[2,{isSuccess:!1,content:s.sent().message}];case 5:return[2]}}))}))}function sr(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return localStorage.setItem("react-mde-imageurl-status","pending"),[4,or(e.target.files[0])];case 1:return(t=a.sent()).isSuccess?(n=t.content,localStorage.setItem("react-mde-imageurl-status","success"),localStorage.setItem("react-mde-imageurl",n),[2,n]):(localStorage.setItem("react-mde-imageurl-status","fail"),[2,""])}}))}))}function ir(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,6,,7]),[4,fa()];case 1:return t=r.sent(),[4,ga("/me/followee/".concat(e),{method:"PUT",headers:t})];case 2:return 200!==(n=r.sent()).status?[3,3]:[2,!0];case 3:return a=Error.bind,[4,n.text()];case 4:throw new(a.apply(Error,[void 0,r.sent()]));case 5:return[3,7];case 6:return[2,r.sent().message];case 7:return[2]}}))}))}function cr(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,fa()];case 1:return t=a.sent(),[4,ga("/me/followee/".concat(e),{method:"DELETE",headers:t})];case 2:if(200===(n=a.sent()).status)return[2,!0];throw new Error(n.statusText);case 3:return a.sent(),[2,!1];case 4:return[2]}}))}))}function lr(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s;return Object(i.d)(this,(function(c){switch(c.label){case 0:return[4,fa()];case 1:return t=c.sent(),[4,ga("/topic/toptopics?boardid=".concat(e),{headers:t})];case 2:return[4,c.sent().json()];case 3:for(n=c.sent(),a=[],r=0;r<n.length;r++)a[r]=Object(i.a)(Object(i.a)({},n[r]),{replyCount:n[r].replyCount||0});for(r=0;r<a.length-1;r++)for(o=0;o<a.length-1-r;o++)a[o].topState<=a[o+1].topState&&(s=a[o],a[o]=a[o+1],a[o+1]=s);return[2,a]}}))}))}function ur(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o,s,c,l;return Object(i.d)(this,(function(u){switch(u.label){case 0:return n=20*(e-1),a="/topic/best/board/".concat(t,"?from=").concat(n,"&size=20"),[4,fa()];case 1:return r=u.sent(),[4,ga(a,{headers:r})];case 2:return[4,u.sent().json()];case 3:for(o=u.sent(),s=[],c=0;c<o.topics.length;c++)s[c]=Object(i.a)(Object(i.a)({},o.topics[c]),{replyCount:o.topics[c].replyCount||0});return l=o.count%20==0?o.count/20:(o.count-o.count%20)/20+1,[2,{boardtopics:s,totalPage:l}]}}))}))}function mr(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o,s,c,l,u;return Object(i.d)(this,(function(m){switch(m.label){case 0:return n=20*(e-1),a="/topic/save/board/".concat(t,"?from=").concat(n,"&size=20"),[4,ha()];case 1:return r=m.sent(),(o=new Headers).append("Authorization",r),[4,ga(a,{headers:o})];case 2:return[4,m.sent().json()];case 3:for(s=m.sent(),c=[],l=0;l<s.topics.length;l++)c[l]=Object(i.a)(Object(i.a)({},s.topics[l]),{replyCount:s.topics[l].replyCount||0});return u=s.count%20==0?s.count/20:(s.count-s.count%20)/20+1,[2,{boardtopics:c,totalPage:u}]}}))}))}function pr(e,t,n,a){return Object(i.b)(this,void 0,void 0,(function(){var a,r,o,s,c,l,u,m,p,d,h,f,g,b,v,y,E,I,C,w,N,O,j;return Object(i.d)(this,(function(i){switch(i.label){case 0:return Wa()?t?[4,fa()]:[3,23]:(Wo.dispatch(de("LogOut")),[2,null]);case 1:for(o in a=i.sent(),r=t[0],t)"0"!=o&&(r="".concat(r," ").concat(t[o]));if(s=20,c=void 0,0!==e)return[3,7];i.label=2;case 2:return i.trys.push([2,5,,6]),[4,ga("/topic/search?keyword=".concat(encodeURIComponent(r),"&size=").concat(s,"&from=").concat(n),{headers:a})];case 3:switch((l=i.sent()).status){case 401:Wo.dispatch(de("UnauthorizedTopic"));case 403:Wo.dispatch(de("TooFrequentSearch"))}return[4,l.json()];case 4:return c=i.sent(),[3,6];case 5:return i.sent(),[2,-1];case 6:return[3,11];case 7:return i.trys.push([7,10,,11]),[4,ga("/topic/search/board/".concat(e,"?keyword=").concat(encodeURIComponent(r),"&size=").concat(s,"&from=").concat(n),{headers:a})];case 8:return 401===(l=i.sent()).status&&Wo.dispatch(de("LogOut")),403===l.status&&Wo.dispatch(de("OperationForbidden")),404===l.status&&Wo.dispatch(de("NotFoundTopic")),500===l.status&&Wo.dispatch(de("ServerError")),[4,l.json()];case 9:return c=i.sent(),[3,11];case 10:return i.sent(),[2,-1];case 11:if(!c||0==c.length)return[3,22];u=[],m=[],p=[],d=0,h=c,i.label=12;case 12:return d<h.length?((f=h[d]).time=Qa(f.time),f.lastPostTime=Qa(f.lastPostTime),f.hitCount>1e4&&(f.hitCount>1e5?(g=parseInt("".concat(f.hitCount/1e4)),f.hitCount="".concat(g,"万")):(g=parseInt("".concat(f.hitCount/1e3))/10,f.hitCount="".concat(g,"万"))),f.floorCount=f.replyCount+1,f.replyCount>1e4&&(f.replyCount>1e5?(g=parseInt("".concat(f.replyCount/1e4)),f.replyCount="".concat(g,"万")):(g=parseInt("".concat(f.replyCount/1e3))/10,f.replyCount="".concat(g,"万"))),f.tag1?(b=f,[4,no(f.tag1)]):[3,15]):[3,20];case 13:return b.tag1=i.sent(),f.tag2?(v=f,[4,no(f.tag2)]):[3,15];case 14:v.tag2=i.sent(),i.label=15;case 15:return f.userId?(y=f,[4,$a(f.boardId)]):[3,17];case 16:return y.boardName=i.sent(),u.push(f),m.push(f.userId),[3,19];case 17:return f.portraitUrl="/static/images/_心灵之约.png",f.userName="匿名用户",E=f,[4,$a(f.boardId)];case 18:E.boardName=i.sent(),p.push(f),i.label=19;case 19:return d++,[3,12];case 20:return[4,lo(m)];case 21:for(C in I=i.sent(),u)w=Ma(u[C].userId,I),u[C].portraitUrl=w.portraitUrl;for(N=0,O=0,j=0;N<c.length;N++)O===u.length?(c[N]=p[j],j++):c[N].id===u[O].id?(c[N]=u[O],O++):(c[N]=p[j],j++);return[2,c];case 22:return[2,0];case 23:return[2]}}))}))}function dr(e,t){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){switch(t.label){case 0:return e?[4,ga("/board/search?keyword=".concat(e))]:[3,3];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()];case 3:return[2]}}))}))}function hr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r,o,s,c;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,fa()];case 1:return(a=i.sent()).append("Content-Type","application/json"),r={operationType:0,reason:e,wealth:t},o=JSON.stringify(r),s="/post/".concat(n,"/operation"),t?[4,ga(s,{method:"POST",headers:a,body:o})]:[3,8];case 2:switch(c=i.sent(),c.status){case 400:return[3,3];case 401:return[3,5];case 404:return[3,6];case 500:return[3,7]}return[3,8];case 3:return[4,c.text()];case 4:return"reward_wealth_limited"===i.sent()?[2,"limited"]:[2,"wrong input"];case 5:return[2,"unauthorized"];case 6:return[2,"not found"];case 7:return[2,"server error"];case 8:return[2,"ok"]}}))}))}function fr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,fa()];case 1:return(a=i.sent()).append("Content-Type","application/json"),r={operationType:1,reason:e,wealth:t},o=JSON.stringify(r),s="/post/".concat(n,"/operation"),0==t?[3,3]:[4,ga(s,{method:"POST",headers:a,body:o})];case 2:switch(i.sent().status){case 400:return[2,"wrong input"];case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}i.label=3;case 3:return[2,"ok"]}}))}))}function gr(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return(e=pa("boardsInfo"))?[3,3]:("/board/all",[4,ga("/board/all")]);case 1:return[4,n.sent().json()];case 2:return la("boardsInfo",t=n.sent(),3600),[2,t];case 3:return[2,e]}}))}))}function br(e){if(!ua())return!1;var t=ua().customBoards;if(t)for(var n=0,a=t;n<a.length;n++){if(a[n]==e)return!0}return!1}function vr(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,fa()];case 1:return t=n.sent(),[4,ga("/me/custom-board/".concat(e),{method:"PUT",headers:t})];case 2:return n.sent(),[4,yr()];case 3:return n.sent(),ca("focusBoardList"),[2]}}))}))}function yr(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return pa("refresh_token")?[4,fa()]:[3,4];case 1:return[4,ga("/me",{headers:t.sent()})];case 2:return[4,t.sent().json()];case 3:e=t.sent(),Wo.dispatch(Z(e)),la("userInfo",e,2592e3),t.label=4;case 4:return[2]}}))}))}function Er(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,fa()];case 1:return t=n.sent(),[4,ga("/me/custom-board/".concat(e),{method:"DELETE",headers:t})];case 2:return n.sent(),[4,yr()];case 3:return n.sent(),ca("focusBoardList"),[2]}}))}))}function Ir(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return[4,fa()];case 1:n=s.sent(),s.label=2;case 2:return s.trys.push([2,5,,6]),[4,ga("/notification/system?from=".concat(e,"&size=").concat(t),{headers:n})];case 3:switch((a=s.sent()).status){case 401:return Wa()?(Wo.dispatch(de("UnauthorizedTopic")),[2,null]):(Wo.dispatch(de("LogOut")),[2,null]);case 403:return Wo.dispatch(de("OperationForbidden")),[2,null];case 404:return Wo.dispatch(de("NotFoundTopic")),[2,null];case 500:return Wo.dispatch(de("ServerError")),[2,null]}return[4,a.json()];case 4:return r=s.sent(),[3,6];case 5:return s.sent(),[2,[]];case 6:for(o in r)r[o].postId?r[o].floor=r[o].postBasicInfo.floor:r[o].floor=0;return[2,r]}}))}))}function Cr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v;return Object(i.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,10,,11]),n=[],[4,fa()];case 1:return a=i.sent(),[4,ga("/notification/reply?from=".concat(e,"&size=").concat(t),{headers:a})];case 2:switch((r=i.sent()).status){case 401:return Wa()?(Wo.dispatch(de("UnauthorizedTopic")),[2,[]]):(Wo.dispatch(de("LogOut")),[2,[]]);case 403:return Wo.dispatch(de("OperationForbidden")),[2,[]];case 404:return Wo.dispatch(de("NotFoundTopic")),[2,[]];case 500:return Wo.dispatch(de("ServerError")),[2,[]]}return[4,r.json()];case 3:for(o=i.sent(),s=[],c=0,l=o;c<l.length;c++)(u=l[c]).topicId&&s.push(u.topicId);return[4,uo(s)];case 4:if(m=i.sent(),!o)return[3,9];for(h in d=[],p=o)d.push(h);f=0,i.label=5;case 5:return f<d.length?(h=d[f])in p?o[g=h].topicId?(b=mo(o[g].topicId,m),o[g].topicTitle=b.title,o[g].boardId=b.boardId,v=o[g],[4,$a(o[g].boardId)]):[3,7]:[3,8]:[3,9];case 6:v.boardName=i.sent(),i.label=7;case 7:o[g].postId?(o[g].floor=o[g].postBasicInfo.floor,o[g].userId=o[g].postBasicInfo.userId,o[g].userName=o[g].postBasicInfo.userName):(o[g].floor=1,o[g].userId=-1,o[g].userName="有人"),n.push(o[g]),i.label=8;case 8:return f++,[3,5];case 9:return[2,n];case 10:return i.sent(),[3,11];case 11:return[2]}}))}))}function wr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v,y;return Object(i.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,10,,11]),n=[],[4,ha()];case 1:return a=i.sent(),(r=new Headers).append("Authorization",a),[4,ga("/notification/at?from=".concat(e,"&size=").concat(t),{headers:r})];case 2:switch((o=i.sent()).status){case 401:return Wa()?(Wo.dispatch(de("UnauthorizedTopic")),[2,[]]):(Wo.dispatch(de("LogOut")),[2,[]]);case 403:return Wo.dispatch(de("OperationForbidden")),[2,[]];case 404:return Wo.dispatch(de("NotFoundTopic")),[2,[]];case 500:return Wo.dispatch(de("ServerError")),[2,[]]}return[4,o.json()];case 3:for(s=i.sent(),c=[],l=0,u=s;l<u.length;l++)(m=u[l]).topicId&&c.push(m.topicId);return[4,uo(c)];case 4:if(p=i.sent(),!s)return[3,9];for(f in h=[],d=s)h.push(f);g=0,i.label=5;case 5:return g<h.length?(f=h[g])in d?s[b=f].topicId?(v=mo(s[b].topicId,p),s[b].topicTitle=v.title,s[b].boardId=v.boardId,y=s[b],[4,$a(s[b].boardId)]):[3,7]:[3,8]:[3,9];case 6:y.boardName=i.sent(),i.label=7;case 7:s[b].postId?(s[b].floor=s[b].postBasicInfo.floor,s[b].userId=s[b].postBasicInfo.userId,s[b].userName=s[b].postBasicInfo.userName):(s[b].floor=1,s[b].userId=-1,s[b].userName="有人"),n.push(s[b]),i.label=8;case 8:return g++,[3,5];case 9:return[2,n];case 10:return i.sent(),[3,11];case 11:return[2]}}))}))}function Nr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var e,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return e="/post/".concat(t,"/rating"),[4,fa()];case 1:return(a=s.sent()).append("Content-Type","application/json"),r={value:1,reason:n},o=JSON.stringify(r),[4,ga(e,{method:"PUT",headers:a,body:o})];case 2:switch(s.sent().status){case 400:return[2,"rateself"];case 401:return[2,"not allowed"];case 403:return[2,"already"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Or(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var e,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return e="/post/".concat(t,"/rating"),[4,fa()];case 1:return(a=s.sent()).append("Content-Type","application/json"),r={value:-1,reason:n},o=JSON.stringify(r),[4,ga(e,{method:"PUT",headers:a,body:o})];case 2:switch(s.sent().status){case 400:return[2,"rateself"];case 401:return[2,"not allowed"];case 403:return[2,"already"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function jr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,fa()];case 1:return(a=i.sent()).append("Content-Type","application/json"),r={operationType:0,prestige:t,reason:n},o="/post/".concat(e,"/operation"),s=JSON.stringify(r),t?[4,ga(o,{method:"POST",headers:a,body:s})]:[3,3];case 2:switch(i.sent().status){case 400:return[2,"wrong input"];case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}i.label=3;case 3:return[2,"ok"]}}))}))}function Tr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,fa()];case 1:return(a=i.sent()).append("Content-Type","application/json"),r={operationType:1,prestige:t,reason:n},o="/post/".concat(e,"/operation"),s=JSON.stringify(r),t?[4,ga(o,{method:"POST",headers:a,body:s})]:[3,3];case 2:switch(i.sent().status){case 400:return[2,"wrong input"];case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}i.label=3;case 3:return[2,"ok"]}}))}))}function Sr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var e,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return[4,fa()];case 1:return(e=r.sent()).append("Content-Type","application/json"),a={reason:n},[4,ga("/post/".concat(t),{method:"DELETE",headers:e,body:JSON.stringify(a)})];case 2:switch(r.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function kr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:return[4,fa()];case 1:return(a=o.sent()).append("Content-Type","application/json"),r={operationType:1,reason:t,stopPostDays:n},[4,ga("/post/".concat(e,"/operation"),{method:"POST",headers:a,body:JSON.stringify(r)})];case 2:switch(o.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function xr(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,fa()];case 1:return(n=a.sent()).append("Content-Type","application/json"),[4,ga("/board/".concat(t,"/stop-post-user/").concat(e),{method:"DELETE",headers:n})];case 2:switch(a.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Pr(e,t,n,a,r){return Object(i.b)(this,void 0,void 0,(function(){var t,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return[4,fa()];case 1:return(t=s.sent()).append("Content-Type","application/json"),o={topState:n,duration:a,reason:r},[4,ga("/topic/".concat(e,"/top"),{method:"PUT",headers:t,body:JSON.stringify(o)})];case 2:switch(s.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Ur(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var t,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return[4,fa()];case 1:return(t=r.sent()).append("Content-Type","application/json"),a={reason:n},[4,ga("/topic/".concat(e,"/top"),{method:"DELETE",headers:t,body:JSON.stringify(a)})];case 2:switch(r.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Mr(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,fa()];case 1:return[4,ga("/me/all-message-count",{headers:n.sent()})];case 2:return[4,n.sent().json()];case 3:switch(t=n.sent(),e){case 1:return[2,t.replyCount];case 2:return[2,t.atCount];case 3:return[2,t.systemCount]}return[2]}}))}))}function _r(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return[4,fa()];case 1:return(n=s.sent()).append("Content-Type","application/json"),a="/topic/".concat(e),r={reason:t},o=JSON.stringify(r),[4,ga(a,{method:"DELETE",headers:n,body:o})];case 2:switch(s.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Rr(e,t,n,a){return Object(i.b)(this,void 0,void 0,(function(){var t,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,fa()];case 1:return(t=i.sent()).append("Content-Type","application/json"),r="/topic/".concat(e,"/lock"),o={reason:n,value:a},s=JSON.stringify(o),[4,ga(r,{method:"PUT",headers:t,body:s})];case 2:switch(i.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Dr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var t,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return[4,fa()];case 1:return(t=s.sent()).append("Content-Type","application/json"),a="/topic/".concat(e,"/up"),r={reason:n},o=JSON.stringify(r),[4,ga(a,{method:"PUT",headers:t,body:o})];case 2:switch(s.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Lr(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var t,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return[4,fa()];case 1:return(t=s.sent()).append("Content-Type","application/json"),a="/topic/".concat(e,"/lock"),r={reason:n},o=JSON.stringify(r),[4,ga(a,{method:"DELETE",headers:t,body:o})];case 2:switch(s.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Fr(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return[4,fa()];case 1:return(n=s.sent()).append("Content-Type","application/json"),a="/topic/".concat(e,"/best"),r={reason:t},o=JSON.stringify(r),[4,ga(a,{method:"PUT",headers:n,body:o})];case 2:switch(s.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Br(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return[4,fa()];case 1:return(n=s.sent()).append("Content-Type","application/json"),a="/topic/".concat(e,"/best"),r={reason:t},o=JSON.stringify(r),[4,ga(a,{method:"DELETE",headers:n,body:o})];case 2:switch(s.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Ar(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return[4,fa()];case 1:return(n=s.sent()).append("Content-Type","application/json"),a="/topic/".concat(e,"/not-hot"),r={reason:t},o=JSON.stringify(r),[4,ga(a,{method:"PUT",headers:n,body:o})];case 2:switch(s.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function zr(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return[4,fa()];case 1:return(n=s.sent()).append("Content-Type","application/json"),a="/topic/".concat(e,"/not-hot"),r={reason:t},o=JSON.stringify(r),[4,ga(a,{method:"DELETE",headers:n,body:o})];case 2:switch(s.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Vr(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,fa()];case 1:return e=t.sent(),"/me/signin",[4,ga("/me/signin",{headers:e})];case 2:return[4,t.sent().json()];case 3:return[2,t.sent()]}}))}))}function Hr(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,fa()];case 1:return e=t.sent(),"/config/global",[4,ga("/config/global",{headers:e})];case 2:return[4,t.sent().json()];case 3:return[2,t.sent()]}}))}))}function $r(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,fa()];case 1:return t=a.sent(),[4,ga("/topic/".concat(e),{headers:t})];case 2:switch((n=a.sent()).status){case 401:return Wa()?(Wo.dispatch(de("UnauthorizedTopic")),[2,null]):(Wo.dispatch(de("LogOut")),[2,null]);case 403:return Wo.dispatch(de("OperationForbidden")),[2,null];case 404:return Wo.dispatch(de("NotFoundTopic")),[2,null];case 500:return Wo.dispatch(de("ServerError")),[2,null]}return[4,n.json()];case 3:return[2,a.sent()]}}))}))}function Wr(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return[4,fa()];case 1:return t=r.sent(),[4,ga("/board/".concat(e),{headers:t})];case 2:switch((n=r.sent()).status){case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,n.json()];case 3:return!1===(a=r.sent()).canEntry?[2,"unauthorized"]:[2,a]}}))}))}function Yr(e){var t=e+1;return t%10==0?t/10:(t-t%10)/10+1}function qr(e){var t=ua();if(t){var n=t.privilege,a=t.name;t.id;if("管理员"===n||"超级版主"===n)return!0;if(!e)return!1;for(var r=0;r<e.length;r++)if(a===e[r])return!0}return!1}function Jr(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,fa()];case 1:return t=n.sent(),[4,ga("/board/".concat(e,"/tag"),{headers:t})];case 2:return[4,n.sent().json()];case 3:return[2,n.sent()]}}))}))}function Gr(e,t,n,a,r,o){return Object(i.b)(this,void 0,void 0,(function(){var s,c,l,u;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,fa()];case 1:return(s=i.sent()).append("Content-Type","application/json"),c="/topic/".concat(e,"/highlight"),l={isBold:t,isItalic:n,color:a,duration:r,reason:o},u=JSON.stringify(l),[4,ga(c,{method:"PUT",headers:s,body:u})];case 2:switch(i.sent().status){case 401:return[2,"unauthorized"];case 404:return[2,"not found"];case 500:return[2,"server error"]}return[2,"ok"]}}))}))}function Qr(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,fa()];case 1:return t=n.sent(),[4,ga("/me/favorite/".concat(e),{method:"PUT",headers:t})];case 2:return n.sent(),[2,"ok"]}}))}))}function Kr(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,fa()];case 1:return t=n.sent(),[4,ga("/me/favorite/".concat(e),{method:"DELETE",headers:t})];case 2:return n.sent(),[2,"ok"]}}))}))}function Xr(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,fa()];case 1:return t=n.sent(),[4,ga("/topic/".concat(e,"/isfavorite"),{headers:t})];case 2:return[4,n.sent().json()];case 3:return[2,n.sent()]}}))}))}function Zr(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return pa("tagInfo")?[2,pa("tagInfo")]:[3,1];case 1:return[4,eo()];case 2:return[2,e.sent()]}}))}))}function eo(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return e="/config/global/alltag",[4,fa()];case 1:return t=a.sent(),[4,ga(e,{headers:t})];case 2:return[4,a.sent().json()];case 3:return la("tagInfo",n=a.sent(),3600),[2,n]}}))}))}function to(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,Zr()];case 1:for(t=i.sent(),n=0,a=t;n<a.length;n++)if((c=a[n]).name===e)return[2,c.id];return[4,eo()];case 2:for(r=i.sent(),o=0,s=r;o<s.length;o++)if((c=s[o]).name===e)return[2,c.id];return[2,!1]}}))}))}function no(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:return[4,Zr()];case 1:for(t=o.sent(),n=0,a=t;n<a.length;n++)if((r=a[n]).id===e)return[2,r.name];return[2,!1]}}))}))}function ao(e,t,n,a){return Object(i.b)(this,void 0,void 0,(function(){var r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return r=20*(a-1),o="/topic/search/board/".concat(t,"/tag?tag").concat(n,"=").concat(e,"&from=").concat(r,"&size=20"),[4,fa()];case 1:return s=i.sent(),[4,ga(o,{headers:s})];case 2:return[4,i.sent().json()];case 3:return[2,i.sent()]}}))}))}function ro(e,t,n,a){return Object(i.b)(this,void 0,void 0,(function(){var r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return r=20*(a-1),o="/topic/search/board/".concat(n,"/tag?tag1=").concat(e,"&tag2=").concat(t,"&from=").concat(r,"&size=20"),[4,fa()];case 1:return s=i.sent(),[4,ga(o,{headers:s})];case 2:return[4,i.sent().json()];case 3:return[2,i.sent()]}}))}))}function oo(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return n="userId_".concat(e),a="userName_".concat(t),da(n),da(a),[4,oa(e)];case 1:return r.sent(),[4,va(e)];case 2:return r.sent(),[2]}}))}))}function so(e,t){for(var n=0,a=t;n<a.length;n++)for(var r=a[n],o=0,s=r.tags;o<s.length;o++){if(s[o].id==e)return r.layer}return!1}function io(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return t="/topic/".concat(e,"/look-ip"),[4,fa()];case 1:return n=r.sent(),[4,ga(t,{headers:n})];case 2:return 200!==(a=r.sent()).status?[3,4]:[4,a.json()];case 3:return[2,r.sent()];case 4:return[2,[]]}}))}))}function co(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:return a="/topic/".concat(e,"/moveto/").concat(t),[4,fa()];case 1:return(r=o.sent()).append("Content-Type","application/json"),[4,ga(a,{method:"PUT",headers:r,body:JSON.stringify({reason:n})})];case 2:return 200===o.sent().status?[2,"ok"]:[2,"error"]}}))}))}function lo(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l;return Object(i.d)(this,(function(i){switch(i.label){case 0:for(t=[],n=[],l=0;l<e.length;l++)(a=pa("userId_".concat(e[l])))?n.push(a):t.push(e[l]);return 0!==t.length?[3,1]:[2,n];case 1:for(r="/user/basic",l=0;l<t.length;l++)r=0===l?"".concat(r,"?id=").concat(t[l]):"".concat(r,"&id=").concat(t[l]);i.label=2;case 2:return i.trys.push([2,5,,6]),[4,ga(r)];case 3:return[4,i.sent().json()];case 4:for(o=i.sent(),s=0,c=o;s<c.length;s++)l=c[s],n.push(l);return[2,n];case 5:return i.sent(),[2,[]];case 6:return[2]}}))}))}function uo(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return e&&0!==e.length?[4,fa()]:[2,[]];case 1:for(t=r.sent(),n="/topic/basic",a=0;a<e.length;a++)n=0===a?"".concat(n,"?id=").concat(e[a]):"".concat(n,"&id=").concat(e[a]);r.label=2;case 2:return r.trys.push([2,5,,6]),[4,ga(n,{headers:t})];case 3:return[4,r.sent().json()];case 4:return[2,r.sent()];case 5:return r.sent(),[2,[]];case 6:return[2]}}))}))}function mo(e,t){for(var n in t)if(t[n].id===e)return t[n];return{id:e,title:"未知主题（该主题已被删除或者无权限获取）",boardId:0}}function po(e){try{var t=/([\s\S]*)\[quotex?\][\s\S]*?\[\/quotex?\]([\s\S]*)/,n=/@[^ \n]{1,10}?[ ]+/g,a=/[^@ ]+/,r=void 0;do{(r=e.match(t))&&(e="".concat(e.match(t)[1]).concat(e.match(t)[2]))}while(r);if(""===e)return!1;if(e.match(n)){var o=e.match(n).length;o>10&&(o=10);for(var s=new Array,i=0;i<o;i++){var c=e.match(n)[i],l=a.exec(c)[0];s[i]=l}return s}return!1}catch(u){return e}}function ho(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return e=location.pathname,t=null,n=Wo.getState().message,[4,fa()];case 1:if(a=r.sent(),"/message/response"===e){if(0===n.replyCount)return[2,null];t="/notification/read-all-reply"}else if("/message/attme"===e){if(0===n.atCount)return[2,null];t="/notification/read-all-at"}else if("/message/system"===e){if(0===n.systemCount)return[2,null];t="/notification/read-all-system"}else{if("/message"!==e)return[2,null];if(0===n.replyCount)return[2,null];t="/notification/read-all-reply"}return[4,ga(t,{method:"PUT",headers:a,body:""})];case 2:return r.sent(),Wo.dispatch(zo.changeMessageCount({messageCount:0,systemCount:0,atCount:0,replyCount:0})),[2,null]}}))}))}function fo(e){ve("#".concat(e)).removeClass("displaynone"),ve("#".concat(e)).removeClass("noticeDisplaynone"),setTimeout((function(){ve("#".concat(e)).addClass("noticeDisplaynone")}),1)}var go,bo="user-set-theme",vo="use-theme";function yo(e){la(vo,e),ve("#mainStylesheet").attr("href","/static/content/".concat(themeNames[e]))}function Eo(e){la(bo,e),yo(Co(e))}function Io(){var e=parseInt(pa(bo),10),t=parseInt(pa(vo),10);if(!Number.isNaN(e)&&!Number.isNaN(t)){var n=Co(e);n!==t&&yo(n)}}function Co(e,t){if(0===e&&(e=Kt.config.defaultTheme),null!=t||(t=function(){try{return ua().themeSetting}catch(e){return null}}()),!t)return e;var n=Ca[e],a=wa.findIndex((function(e){return e.day===n.name||e.night===n.name}));if(-1===a)return e;var r=wa[a],o=function(e){if(!e.enableDayNightSwitch)return null;return wo()&&e.syncWithBrowserDayNightMode?window.matchMedia("(prefers-color-scheme: light)").matches?go.Day:go.Night:(t=e.dayStartTime,n=e.nightStartTime,a=new Date,r=a.toISOString().substring(0,10),o=new Date(r+"T"+t),s=new Date(r+"T"+n),o<s?a>=o&&a<s?go.Day:go.Night:a>=s&&a<o?go.Night:go.Day);var t,n,a,r,o,s}(t),s=null;switch(o){case go.Day:s=r.day;break;case go.Night:s=r.night;break;default:return e}var i=Ca.findIndex((function(e){return e.name==s}));return-1===i?e:i}function wo(){return window.matchMedia("(prefers-color-scheme)").matches}function No(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,fa()];case 1:return t=n.sent(),[4,ga("/manage/reward-daily-record?boardId=".concat(e),{headers:t})];case 2:return[4,n.sent().json()];case 3:return[2,n.sent()]}}))}))}function Oo(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return[4,fa()];case 1:return a=r.sent(),[4,ga("/board/".concat(e,"/events?from=").concat(t,"&size=").concat(n),{headers:a})];case 2:return[4,r.sent().json()];case 3:return[2,r.sent()]}}))}))}function jo(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v,y;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,fa()];case 1:return i.sent(),[4,ga("/topic/hot-".concat(e))];case 2:switch((t=i.sent()).status){case 401:Wo.dispatch(de("UnauthorizedTopic"));case 403:Wo.dispatch(de("OperationForbidden"))}return[4,t.json()];case 3:n=i.sent(),a=[],r=[],o=[],s=0,c=n,i.label=4;case 4:return s<c.length?((l=c[s]).time=Qa(l.time),l.lastPostTime=Qa(l.lastPostTime),l.hitCount>1e4&&(l.hitCount>1e5?(u=parseInt("".concat(l.hitCount/1e4)),l.hitCount="".concat(u,"万")):(u=parseInt("".concat(l.hitCount/1e3))/10,l.hitCount="".concat(u,"万"))),l.floorCount=l.replyCount+1,l.replyCount>1e4&&(l.replyCount>1e5?(u=parseInt("".concat(l.replyCount/1e4)),l.replyCount="".concat(u,"万")):(u=parseInt("".concat(l.replyCount/1e3))/10,l.replyCount="".concat(u,"万"))),l.tag1?(m=l,[4,no(l.tag1)]):[3,7]):[3,12];case 5:return m.tag1=i.sent(),l.tag2?(p=l,[4,no(l.tag2)]):[3,7];case 6:p.tag2=i.sent(),i.label=7;case 7:return l.userId?(d=l,[4,$a(l.boardId)]):[3,9];case 8:return d.boardName=i.sent(),a.push(l),r.push(l.userId),[3,11];case 9:return l.portraitUrl="/static/images/_心灵之约.png",l.userName="匿名用户",h=l,[4,$a(l.boardId)];case 10:h.boardName=i.sent(),o.push(l),i.label=11;case 11:return s++,[3,4];case 12:return[4,lo(r)];case 13:for(b in f=i.sent(),a)g=Ma(a[b].userId,f),a[b].portraitUrl=g.portraitUrl;for(b=0,v=0,y=0;b<n.length;b++)v===a.length?(n[b]=o[y],y++):n[b].id===a[v].id?(n[b]=a[v],v++):(n[b]=o[y],y++);return[2,n]}}))}))}function To(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return a="/topic/multi-lock?".concat(n),[4,fa()];case 1:return(r=i.sent()).append("Content-Type","application/json"),o=JSON.stringify({reason:t,value:e}),ve("#mutlilock-btn").attr("disabled","disabled"),[4,ga(a,{method:"PUT",headers:r,body:o})];case 2:return 200==(s=i.sent()).status?(ve("#mutlilock-btn").removeAttr("disabled"),ve("#mutlioptip").text("操作成功")):(ve("#mutlilock-btn").removeAttr("disabled"),ve("#mutlioptip").text("操作失败")),[2,s.status]}}))}))}function So(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return n="/topic/multi-delete?".concat(t),[4,fa()];case 1:return(a=s.sent()).append("Content-Type","application/json"),r=JSON.stringify({reason:e}),ve("#mutlidelete-btn").attr("disabled","disabled"),[4,ga(n,{method:"PUT",headers:a,body:r})];case 2:return 200==(o=s.sent()).status?(ve("#mutlidelete-btn").removeAttr("disabled"),ve("#mutliopdtip").text("操作成功")):(ve("#mutlidelete-btn").removeAttr("disabled"),ve("#mutliopdtip").text("操作失败")),[2,o.status]}}))}))}function ko(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:return a="/board/".concat(e,"/stop-post-user?from=").concat(t,"&size=").concat(n),[4,fa()];case 1:return(r=o.sent()).append("Content-Type","application/json"),[4,ga(a,{headers:r})];case 2:return[4,o.sent().json()];case 3:return[2,o.sent()]}}))}))}function xo(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return Wa()?(e="/me/annual-review-2022",[4,fa()]):(Wo.dispatch(de("LogOut")),[2,null]);case 1:return t=n.sent(),[4,ga(e,{headers:t})];case 2:return[4,n.sent().json()];case 3:return[2,n.sent()]}}))}))}function Po(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return n="/topic/".concat(e,"/event?from=").concat(t,"&size=7"),[4,fa()];case 1:return a=r.sent(),[4,ga(n,{headers:a})];case 2:return[4,r.sent().json()];case 3:return[2,r.sent()]}}))}))}function Uo(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return(e=pa("wealth"))?[3,2]:[4,yr()];case 1:n.sent(),t=ua(),la("wealth",e=t.wealth,300),n.label=2;case 2:return[2,e]}}))}))}!function(e){e[e.Day=0]="Day",e[e.Night=1]="Night"}(go||(go={}));function Mo(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return t="/me/topic-view-mode?mode=".concat(e),[4,fa()];case 1:return n=a.sent(),[4,ga(t,{headers:n,method:"PUT"})];case 2:return a.sent().ok&&yr(),[2]}}))}))}function _o(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v,y,E;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(!Wa())return Wo.dispatch(de("LogOut")),[2,null];i.label=1;case 1:return i.trys.push([1,15,,16]),[4,fa()];case 2:return t=i.sent(),[4,ga("/topic/random-recent?size=".concat(e),{headers:t})];case 3:switch((n=i.sent()).status){case 401:Wo.dispatch(de("UnauthorizedTopic"));case 403:Wo.dispatch(de("OperationForbidden"))}return[4,n.json()];case 4:a=i.sent(),r=[],o=[],s=[],c=0,l=a,i.label=5;case 5:return c<l.length?((u=l[c]).time=Qa(u.time,!1),u.lastPostTime=Qa(u.lastPostTime,!1),u.hitCount>1e4&&(u.hitCount>1e5?(m=parseInt("".concat(u.hitCount/1e4)),u.hitCount="".concat(m,"万")):(m=parseInt("".concat(u.hitCount/1e3))/10,u.hitCount="".concat(m,"万"))),u.floorCount=u.replyCount+1,u.replyCount>1e4&&(u.replyCount>1e5?(m=parseInt("".concat(u.replyCount/1e4)),u.replyCount="".concat(m,"万")):(m=parseInt("".concat(u.replyCount/1e3))/10,u.replyCount="".concat(m,"万"))),u.tag1?(p=u,[4,no(u.tag1)]):[3,8]):[3,13];case 6:return p.tag1=i.sent(),u.tag2?(d=u,[4,no(u.tag2)]):[3,8];case 7:d.tag2=i.sent(),i.label=8;case 8:return u.isAnonymous?[3,10]:(h=u,[4,$a(u.boardId)]);case 9:return h.boardName=i.sent(),r.push(u),o.push(u.userId),[3,12];case 10:return u.portraitUrl="/static/images/_心灵之约.png",u.userName="匿名用户",f=u,[4,$a(u.boardId)];case 11:f.boardName=i.sent(),s.push(u),i.label=12;case 12:return c++,[3,5];case 13:return[4,lo(o)];case 14:for(v in g=i.sent(),r)b=Ma(r[v].userId,g),r[v].portraitUrl=b.portraitUrl;for(v=0,y=0,E=0;v<a.length;v++)y===r.length?(a[v]=s[E],E++):a[v].id===r[y].id?(a[v]=r[y],y++):(a[v]=s[E],E++);return[2,a];case 15:return i.sent(),[3,16];case 16:return[2]}}))}))}var Ro=function(){},Do=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.c)(t,e)}(Ro),function(){}),Lo=function(){this.isLogOn=Wa(),this.isLoading=!1,this.currentUserInfo=ua()||new Ro,this.currentVisitingUserPage="exact",this.currentVisitingUserId=0,this.currentVisitingUserIsExisted=!0,this.recentTopics=[],this.recentPosts=[],this.hotPosts=[],this.isError=!1,this.errorMessage="",this.currentUserFavoriteBoards=[],this.hasTotal=new Fo,this.totalPage=new Bo,this.currentUserFansInfo=[],this.currentUserFollowingInfo=[],this.currentUserFavoriteTopics=[],this.currentUserCenterPage="profile",this.transferSuccessUsers=[],this.totalPage.myfollowings=Math.ceil(this.currentUserInfo.followCount/10),this.totalPage.myfans=Math.ceil(this.currentUserInfo.fanCount/10)},Fo=function(){this.profile=!1,this.mytopics=!1,this.myposts=!0,this.myfavoriteposts=!1,this.myfollowings=!0,this.myfans=!0},Bo=function(){this.profile=1,this.mytopics=1,this.myposts=1,this.myfavoriteposts=1},Ao=function(){this.systemCount=0,this.atCount=0,this.replyCount=0,this.messageCount=0},zo=Object(i.a)(Object(i.a)(Object(i.a)({},a),r),o),Vo=Object(h.c)({error:function(e,t){switch(void 0===e&&(e=new ge),t.type){case F:return Object(i.a)(Object(i.a)({},e),{isError:!0,errorMessage:t.payload.message});case B:return Object(i.a)(Object(i.a)({},e),{isError:!1});default:return e}},router:d.c,userInfo:function(e,t){var n,a,r;switch(void 0===e&&(e=new Lo),t.type){case g:return Object(i.a)(Object(i.a)(Object(i.a)({},e),{isLogOn:!0}),new Lo);case b:return Object(i.a)(Object(i.a)({},e),{isLogOn:!1});case v:return la("userInfo",t.payload.newInfo,2592e3),na(t.payload.newInfo),Object(i.a)(Object(i.a)({},e),{currentUserInfo:t.payload.newInfo});case y:return Object(i.a)(Object(i.a)({},e),{currentVisitingUserPage:t.payload.page,currentVisitingUserId:t.payload.id});case S:return Object(i.a)(Object(i.a)({},e),{currentVisitingUserIsExisted:!1});case k:return Object(i.a)(Object(i.a)({},e),{isLoading:!0,isError:!1});case x:return Object(i.a)(Object(i.a)({},e),{isLoading:!1});case P:return Object(i.a)(Object(i.a)({},e),{isError:!0,errorMessage:t.payload.message});case E:return Object(i.a)(Object(i.a)({},e),{currentUserFavoriteBoards:t.payload.boardsInfo});case N:return Object(i.a)(Object(i.a)({},e),{recentTopics:t.payload.posts});case O:var o=JSON.parse(JSON.stringify(e.totalPage));return o.myposts=t.payload.total,Object(i.a)(Object(i.a)({},e),{recentPosts:t.payload.posts,totalPage:o});case j:return Object(i.a)(Object(i.a)({},e),{hotPosts:t.payload.posts});case _:switch(e.currentUserCenterPage){case"profile":case"myposts":return Object(i.a)(Object(i.a)({},e),{hasTotal:Object(i.a)(Object(i.a)({},e.hasTotal),{profile:!0,myposts:!0}),totalPage:Object(i.a)(Object(i.a)({},e.totalPage),{profile:t.payload.totalPage,myposts:t.payload.totalPage})});default:return Object(i.a)(Object(i.a)({},e),{hasTotal:Object(i.a)(Object(i.a)({},e.hasTotal),(n={},n[e.currentUserCenterPage]=!0,n)),totalPage:Object(i.a)(Object(i.a)({},e.totalPage),(a={},a[e.currentUserCenterPage]=t.payload.totalPage,a))})}case M:switch(e.currentUserCenterPage){case"profile":case"myposts":return Object(i.a)(Object(i.a)({},e),{hasTotal:Object(i.a)(Object(i.a)({},e.hasTotal),{profile:!1,myposts:!1})});default:return Object(i.a)(Object(i.a)({},e),{hasTotal:Object(i.a)(Object(i.a)({},e.hasTotal),(r={},r[e.currentUserCenterPage]=!1,r))})}case C:return Object(i.a)(Object(i.a)({},e),{currentUserFansInfo:t.payload.fansInfo});case w:return Object(i.a)(Object(i.a)({},e),{currentUserFollowingInfo:t.payload.followingsInfo});case I:return Object(i.a)(Object(i.a)({},e),{currentUserFavoriteTopics:t.payload.posts});case T:return Object(i.a)(Object(i.a)({},e),{currentUserCenterPage:t.payload.page});case R:var s=e.currentUserFollowingInfo.map((function(e){return e.id===t.payload.userId?Object(i.a)(Object(i.a)({},e),{isFollowing:!0}):e})),c=e.currentUserFansInfo.map((function(e){return e.id===t.payload.userId?Object(i.a)(Object(i.a)({},e),{isFollowing:!0}):e}));return Object(i.a)(Object(i.a)({},e),{currentUserFollowingInfo:s,currentUserFansInfo:c});case D:s=e.currentUserFollowingInfo.map((function(e){return e.id===t.payload.userId?Object(i.a)(Object(i.a)({},e),{isFollowing:!1}):e})),c=e.currentUserFansInfo.map((function(e){return e.id===t.payload.userId?Object(i.a)(Object(i.a)({},e),{isFollowing:!1}):e}));return Object(i.a)(Object(i.a)({},e),{currentUserFollowingInfo:s,currentUserFansInfo:c});case U:return Object(i.a)(Object(i.a)({},e),{errorMessage:"",isError:!1});case L:return Object(i.a)(Object(i.a)({},e),{transferSuccessUsers:t.payload.userNames});default:return e}},message:function(e,t){return void 0===e&&(e=new Ao),t.type===A?Object(i.a)(Object(i.a)({},e),t.payload.message):e}}),Ho=p()(),$o=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.d,Wo=Object(h.e)(Vo,$o(Object(h.a)(f.a,Object(d.b)(Ho)))),Yo=(n(985),n(986),n(525)),qo=n(1272),Jo=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"match",{get:function(){return this.props.match},enumerable:!1,configurable:!0}),t}(c.Component),Go=n(987),Qo=n(988);function Ko(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(!e.length)throw new Error("未找到文件，请尝试点击按钮上传");return n=t?"/file":"/file?compressImage=false",[4,fa()];case 1:return a=i.sent(),(r=new FormData).append("contentType","multipart/form-data"),e.map((function(e){return r.append("files",e,e.name)})),[4,ga(n,{method:"POST",headers:a,body:r})];case 2:return[4,(o=i.sent()).json()];case 3:if(s=i.sent(),o.ok)return[2,s];throw new Error("上传失败")}}))}))}function Xo(e){try{switch(!0){case-1!==e.type.indexOf("image"):return"img";case-1!==e.type.indexOf("video"):return"video";case-1!==e.type.indexOf("audio"):return"audio"}var t=e.name.match(/\.(\w+)$/)[1];switch(!0){case-1!==Qo.fileExtendedNames.audio.indexOf(t):return"audio";case-1!==Qo.fileExtendedNames.video.indexOf(t):return"video";case-1!==Qo.fileExtendedNames.image.indexOf(t):return"img";default:throw new Error}}catch(n){return"upload"}}var Zo=function(e){function t(t){var n=e.call(this,t)||this;return n.valueStack=[""],n.redoStack=[],n.undo=n.undo.bind(n),n.redo=n.redo.bind(n),n.blur=n.blur.bind(n),n.changeValue=n.changeValue.bind(n),n}return Object(i.c)(t,e),t.prototype.undo=function(){if(1!==this.valueStack.length){var e=this.valueStack.pop();this.redoStack.push(e),e=this.valueStack[this.valueStack.length-1],this.props.onChange(e)}},t.prototype.redo=function(){var e=this.redoStack.pop();e&&(this.valueStack.push(e),this.props.onChange(e))},t.prototype.blur=function(){this.textarea.blur()},t.prototype.changeValue=function(e){this.props.onChange(e),this.valueStack.push(e),this.textarea.scrollTop=this.scrollTop},t.prototype.componentWillReceiveProps=function(e){e.value!==this.valueStack[this.valueStack.length-1]&&(this.valueStack.push(e.value),this.redoStack=[])},t.prototype.render=function(){var e=this;return c.createElement("textarea",Object(i.a)({ref:function(t){return e.textarea=t}},this.props,{onChange:function(t){return e.changeValue(t.target.value)},onScroll:function(t){return e.scrollTop=e.textarea.scrollTop},onFocus:function(t){return e.textarea.scrollTop=e.scrollTop},onInput:function(){return e.redoStack=[]},onKeyDown:function(t){e.props.onKeyDown&&e.props.onKeyDown(t),"z"===t.key&&t.ctrlKey&&e.undo(),"y"===t.key&&t.ctrlKey&&e.redo()}}))},t}(c.PureComponent),es=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){var e,t=this;e=function(e){return t.props.changeValue({type:"color",tagName:"color",mainProperty:e.toHexString()})},$("#color").spectrum({color:"#000",change:function(t){e(t),$("#color").spectrum("set","#000000")},showPalette:!0,palette:[["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"],["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"]],replacerClassName:"ubb-color-picker",hideAfterPaletteSelect:!0})},t.prototype.render=function(){var e=this;return c.createElement("div",{className:"ubb-buttons",onClick:function(e){return e.stopPropagation()}},Go.map((function(t){if(e.props.isPreviewing)return null;var n=t.type,a=t.tagName,r=t.tagIcon,o=t.tagDescription,s=t.title;switch(t.type){case"text":return c.createElement("button",{type:"button",className:"fa ".concat(r," ubb-button"),title:s,key:a+r,onClick:function(){return e.props.changeValue({type:n,tagName:a,mainProperty:t.mainValue})}},o);case"fontSize":return c.createElement("div",{key:a+r,className:"ubb-button ubb-button-fontSize"},c.createElement("div",{className:"fa ".concat(r," ubb-button-icon")}),c.createElement("select",{value:"0",onChange:function(t){e.props.changeValue({type:n,tagName:a,mainProperty:t.target.value}),t.target.value="0"}},t.fontSize.map((function(e){return c.createElement("option",{key:e,value:e.toString(),disabled:0===e},e)}))));case"color":return c.createElement("div",{className:"ubb-button ubb-button-color",key:a+r},c.createElement("div",{className:"fa ".concat(r," ubb-button-icon")}),c.createElement("input",{id:"color"}));case"extend":return c.createElement("button",{type:"button",title:s,key:a+r,className:"fa ".concat(r," ubb-button"),onClick:function(){return e.props.changeExtendName(a)}},o);case"upload":return c.createElement("label",{key:a+r,htmlFor:"ubbFileUpload",title:s,className:"fa ".concat(r," ubb-button ubb-button-icon"),style:{pointerEvents:"all"}});case"emoji":return c.createElement("button",{type:"button",title:s,key:a+r,className:"fa ".concat(r," ubb-button"),onClick:function(){return e.props.changeExtendName(a)}})}})),c.createElement("div",{style:{flexGrow:1}}),this.props.isPreviewing?null:c.createElement(c.Fragment,null,c.createElement("button",{className:"fa fa-undo ubb-button",type:"button",title:"撤销",onClick:this.props.undo}),c.createElement("button",{className:"fa fa-repeat ubb-button",type:"button",title:"重做",onClick:this.props.redo})),c.createElement("button",{className:"fa fa-window-maximize ubb-button",type:"button",title:"切换预览",onClick:this.props.triggerIsPreviewing}))},t}(c.PureComponent);n(989);var ts=function(e){function t(t){var n=e.call(this,t)||this;return n.state={extendConfig:Go.filter((function(e){return e.tagName===t.extendTagName}))[0]},n}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){e.extendTagName&&this.setState({extendConfig:Go.filter((function(t){return t.tagName===e.extendTagName}))[0]})},t.prototype.changeValue=function(e){var t=e.keys(),n=[];for(var a in t)"content"!==a&&"mainValue"!==a&&n.push({key:a,value:e.get(a)});this.props.changeValue({tagName:this.props.extendTagName,content:e.get("content"),type:"extend",mainProperty:e.get("mainValue"),subProperties:n}),this.form.reset()},t.prototype.render=function(){var e=this;return c.createElement("div",{className:"ubb-extend",onClick:function(e){return e.stopPropagation()},style:{height:this.props.extendIsShown?"2rem":"0rem"}},this.state.extendConfig?c.createElement("form",{ref:function(t){return e.form=t},onSubmit:function(t){t.preventDefault(),e.changeValue(new FormData(t.target))}},c.createElement("input",{className:"ubb-extend-main",type:"text",defaultValue:"",name:"content",placeholder:this.state.extendConfig.contentValueInfo}),this.state.extendConfig.propertiesInfos?this.state.extendConfig.propertiesInfos.map((function(e,t){return c.createElement(c.Fragment,null,c.createElement("span",null,"|"),c.createElement("input",{type:"text",defaultValue:"",name:e.key||"mainValue",placeholder:e.title,key:e.key+t,className:"ubb-extend-sub"}))})):null,this.state.extendConfig.hasCompassOption&&c.createElement(c.Fragment,null,c.createElement("input",{id:"shouldCompassImage",onChange:function(t){return e.props.changeShouldCompassImage(!t.target.checked)},type:"checkbox",checked:!this.props.shouldCompassImage}),c.createElement("label",{htmlFor:"shouldCompassImage",style:{fontSize:14,userSelect:"none"}},"无损上传")),this.state.extendConfig.allowUpload&&c.createElement("label",{style:{pointerEvents:"all"},className:"fa fa-upload ubb-button-icon",htmlFor:"ubbFileUpload"}),c.createElement("button",{style:{marginLeft:"10px"},className:"fa fa-check",type:"submit"}),c.createElement("button",{style:{marginLeft:"10px"},className:"fa fa-remove",type:"reset",onClick:this.props.clearShown})):null)},t}(c.PureComponent),ns=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isShown:!1,message:t.message},n}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;""!==e.message&&(this.setState({isShown:!0,message:e.message}),setTimeout((function(){t.setState({isShown:!1})}),2e3))},t.prototype.render=function(){return c.createElement("div",{className:"ubb-editor-info",style:this.state.isShown?{opacity:1}:{opacity:0}},c.createElement("p",null,this.state.message))},t}(c.Component),as=function(e){function t(t){var n=e.call(this,t)||this;return n.state={loaded:!1},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){var e=this,t=new Image;t.onload=function(){e.setState({loaded:!0})},t.src=this.props.src},t.prototype.componentWillReceiveProps=function(e){var t=this;if(e.src!==this.props.src){this.setState({loaded:!1});var n=new Image;n.onload=function(){t.setState({loaded:!0})},n.src=e.src}},t.prototype.render=function(){return this.state.loaded?c.createElement("img",{className:this.props.className,src:this.props.src,onClick:this.props.onClick}):c.createElement("img",{className:this.props.className})},t}(c.Component),rs=function(e){function t(t){var n=e.call(this,t)||this;return n.insertEmoji=n.insertEmoji.bind(n),n}return Object(i.c)(t,e),t.prototype.insertEmoji=function(e,t){this.props.changeValue({tagName:e,mainProperty:t,type:"emoji"})},t.prototype.getCC98EmojiSource=function(e){var t="/static/images/CC98/CC98".concat(e,".gif");return Number(e)>14&&Number(e)<31&&(t="/static/images/CC98/CC98".concat(e,".png")),Number(e)>35&&(t="/static/images/CC98/CC98".concat(e,".png")),t},t.prototype.render=function(){var e=this,t={animal:["001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016"].map((function(t){return c.createElement(as,{key:"[a:".concat(t,"]"),src:"/static/images/mahjong/animal2017/".concat(t,".png"),onClick:function(){e.insertEmoji("a:",t)}})})),carton:["003.png","018.gif","019.png","046.png","049.gif","059.png","096.gif","134.png","189.png","217.png"].map((function(t){return c.createElement(as,{key:"[c:".concat(t.slice(0,3),"]"),src:"/static/images/mahjong/carton2017/".concat(t),onClick:function(){e.insertEmoji("c:",t.slice(0,3))}})})),face:new Array(208).fill(0).map((function(e,t){return t<9?"00".concat(t+1):t<99?"0".concat(t+1):"".concat(t+1)})).map((function(e,t){return-1!==[4,9,56,61,62,87,115,120,137,168,169,175,206].indexOf(t+1)?"".concat(e,".gif"):"".concat(e,".png")})).map((function(t){return c.createElement(as,{key:"[f:".concat(t.slice(0,3),"]"),src:"/static/images/mahjong/face2017/".concat(t),onClick:function(){e.insertEmoji("f:",t.slice(0,3))}})}))},n={CC98:new Array(37).fill(0).map((function(e,t){return t<9?"0".concat(t+1):"".concat(t+1)})).map((function(t){return t?c.createElement(as,{key:"[CC98".concat(t,"]"),src:e.getCC98EmojiSource(t),onClick:function(){e.insertEmoji("cc98",t)},className:"ubb-emoji-CC98"}):null})),em:new Array(92).fill(0).map((function(e,t){return t<10?"0".concat(t):t<44||70<t&&t<92?"".concat(t):void 0})).map((function(t){return t?c.createElement(as,{key:"[em".concat(t,"]"),src:"/static/images/em/em".concat(t,".gif"),onClick:function(){e.insertEmoji("em",t)}}):null})),ac:new Array(149).fill(0).map((function(e,t){return t<9?"0".concat(t+1):"".concat(t<54?t+1:t<94?t+947:t+1907)})).map((function(t){return c.createElement(as,{key:"[ac".concat(t,"]"),src:"/static/images/ac/".concat(t,".png"),onClick:function(){e.insertEmoji("ac",t)}})})),mj:Object(i.e)(Object(i.e)(Object(i.e)([],t.animal,!0),t.carton,!0),t.face,!0),tb:new Array(33).fill(0).map((function(e,t){return t<9?"0".concat(t+1):"".concat(t+1)})).map((function(t){return c.createElement(as,{key:"[tb".concat(t,"]"),src:"/static/images/tb/tb".concat(t,".png"),onClick:function(){e.insertEmoji("tb",t)}})})),ms:new Array(54).fill(0).map((function(e,t){return t<9?"0".concat(t+1):"".concat(t+1)})).map((function(t){return c.createElement(as,{key:"ms".concat(t),src:"/static/images/ms/ms".concat(t,".png"),onClick:function(){return e.insertEmoji("ms",t)},className:"ubb-emoji-ms"})}))},a={CC98:c.createElement("p",{className:"ubb-emoji-info"},"该组表情由 ",c.createElement("a",{target:"_blank",href:"/user/id/567066"},"洛予")," 和 ",c.createElement("a",{target:"_blank",href:"/user/id/641262"},"大鲶鱼保佑")," 制作"),ac:c.createElement("p",{className:"ubb-emoji-info"},"该组表情由 ",c.createElement("a",{target:"_blank",href:"http://www.acfun.cn"},"AcFun弹幕视频网")," 提供"),mj:c.createElement("p",{className:"ubb-emoji-info"},"该组表情由 ",c.createElement("a",{target:"_blank",href:"//bbs.saraba1st.com/2b/forum.php"},"stage1st论坛")," 提供"),tb:c.createElement("p",{className:"ubb-emoji-info"},"该组表情由 ",c.createElement("a",{target:"_blank",href:"//tieba.baidu.com "},"百度贴吧")," 提供"),ms:c.createElement("p",{className:"ubb-emoji-info"},"该组表情由 ",c.createElement("a",{target:"_blank",href:"https://www.maj-soul.com/"},"雀魂Majsoul")," 提供"),em:null},r=this.props,o=r.emojiType,s=r.emojiIsShown;return c.createElement("div",{className:"ubb-emoji",style:s?{height:"".concat(this.props.height||18,"rem"),borderWidth:"1px"}:{height:"0rem"},onClick:function(e){return e.stopPropagation()}},c.createElement("div",{className:"ubb-emoji-buttons"},c.createElement("button",{type:"button",className:"CC98"===o?"ubb-emoji-button-active":"ubb-emoji-button",onClick:function(t){t.stopPropagation(),e.props.changeEmojiType("CC98")}},"CC98"),c.createElement("button",{type:"button",className:"ac"===o?"ubb-emoji-button-active":"ubb-emoji-button",onClick:function(t){t.stopPropagation(),e.props.changeEmojiType("ac")}},"AC娘"),c.createElement("button",{type:"button",className:"mj"===o?"ubb-emoji-button-active":"ubb-emoji-button",onClick:function(t){t.stopPropagation(),e.props.changeEmojiType("mj")}},"麻将脸"),c.createElement("button",{type:"button",className:"tb"===o?"ubb-emoji-button-active":"ubb-emoji-button",onClick:function(t){t.stopPropagation(),e.props.changeEmojiType("tb")}},"贴吧"),c.createElement("button",{type:"button",className:"ms"===o?"ubb-emoji-button-active":"ubb-emoji-button",onClick:function(t){t.stopPropagation(),e.props.changeEmojiType("ms")}},"雀魂"),c.createElement("button",{type:"button",className:"em"===o?"ubb-emoji-button-active":"ubb-emoji-button",onClick:function(t){t.stopPropagation(),e.props.changeEmojiType("em")}},"经典")),c.createElement("div",{className:"ubb-emoji-content ubb-emoji-content-".concat(o),style:{height:"".concat(this.props.height||16,"rem")}},a[o],n[o]))},t}(c.Component),os=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){n.setState({value:e}),n.props.update(e)},n.state={value:"",selectionStart:0,selectionEnd:0,extendTagName:"",message:"",emojiType:"hide",isPreviewing:!1,shouldCompassImage:!0},n.onChange=n.onChange.bind(n),n.changeValue=n.changeValue.bind(n),n.changeExtend=n.changeExtend.bind(n),n.message=n.message.bind(n),n.handleUpload=n.handleUpload.bind(n),n.changeEmojiType=n.changeEmojiType.bind(n),n.clearExtendAndEmoji=n.clearExtendAndEmoji.bind(n),n.triggerIsPreviewing=n.triggerIsPreviewing.bind(n),n.changeShouldCompassImage=n.changeShouldCompassImage.bind(n),n}return Object(i.c)(t,e),t.prototype.changeExtend=function(e){if("emoji"===e&&"hide"===this.state.emojiType){var t="CC98";pa("defaultEmojiType")&&(t=pa("defaultEmojiType")),this.setState({emojiType:t})}this.setState((function(t){return e===t.extendTagName?{extendTagName:""}:{extendTagName:e}}))},t.prototype.changeValue=function(e){var t=function(e,t){var n=e.value,a=e.selectionStart,r=e.selectionEnd,o=t.tagName,s=t.mainProperty,i=(t.subProperties,t.content),c=n.slice(0,a),l=n.slice(r,n.length),u=n.slice(a,r),m="[".concat(o);return"emoji"===t.type?m+="".concat(s,"]"):(s&&(m+="=".concat(s)),m+=i?"]".concat(i,"[/").concat(o,"]"):"]".concat(u,"[/").concat(o,"]")),r=-1!==Qo.shouldNotSelect.indexOf(o)?a+=(m+="\n").length:"emoji"===t.type?a+=m.length:a+m.length,c+=m,{value:c+=l,selectionStart:a,selectionEnd:r}}(this.state,e);this.setState(t,this.selectTextArea),this.props.update(t.value),this.clearExtendAndEmoji()},t.prototype.triggerIsPreviewing=function(){this.setState((function(e){return{isPreviewing:!e.isPreviewing}}))},t.prototype.selectTextArea=function(){this.customTextArea.textarea.focus(),this.customTextArea.textarea.setSelectionRange(this.state.selectionStart,this.state.selectionEnd)},t.prototype.handleUpload=function(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r=this;return Object(i.d)(this,(function(o){switch(o.label){case 0:n=Array.from(e),o.label=1;case 1:if(o.trys.push([1,3,,4]),"img"!==this.state.extendTagName&&n.some((function(e){return-1===e.type.indexOf("image")&&e.size>10485760})))throw new Error("文件过大");return[4,Ko(n,t)];case 2:return o.sent().map((function(e,t){return r.changeValue({type:"extend",tagName:Xo(n[t]),content:e})})),[3,4];case 3:return a=o.sent(),this.message(a.message),[3,4];case 4:return[2]}}))}))},t.prototype.changeEmojiType=function(e){this.setState({emojiType:e}),la("defaultEmojiType",e,2592e3)},t.prototype.changeShouldCompassImage=function(e){this.setState({shouldCompassImage:e})},t.prototype.message=function(e){this.setState({message:e},(function(){var e=this;setTimeout((function(){e.setState({message:""})}),2e3)}))},t.prototype.clearExtendAndEmoji=function(){this.setState({extendTagName:""})},t.prototype.componentDidMount=function(){this.forceUpdate(),window.addEventListener("click",this.clearExtendAndEmoji)},t.prototype.componentWillUnmount=function(){window.removeEventListener("click",this.clearExtendAndEmoji)},t.prototype.componentWillReceiveProps=function(e){this.state.value!==e.value&&this.setState({value:e.value,selectionStart:e.value.length,selectionEnd:e.value.length})},t.prototype.render=function(){var e=this;return c.createElement("div",{className:"ubb-editor",style:{height:"".concat(this.props.option.height||20,"rem")}},c.createElement(es,{changeValue:this.changeValue,changeExtendName:this.changeExtend,undo:this.customTextArea&&this.customTextArea.undo,redo:this.customTextArea&&this.customTextArea.redo,triggerIsPreviewing:this.triggerIsPreviewing,isPreviewing:this.state.isPreviewing}),c.createElement(ts,{extendTagName:this.state.extendTagName,changeValue:this.changeValue,clearShown:this.clearExtendAndEmoji,extendIsShown:this.state.extendTagName&&"emoji"!==this.state.extendTagName,shouldCompassImage:this.state.shouldCompassImage,changeShouldCompassImage:this.changeShouldCompassImage}),this.state.isPreviewing?c.createElement("div",{className:"ubb-preview"},c.createElement(tn,{code:this.state.value})):c.createElement(Zo,{value:this.state.value,onChange:this.onChange,ref:function(t){return e.customTextArea=t},onBlur:function(t){var n=t.target,a=n.selectionStart,r=n.selectionEnd;e.setState({selectionStart:a,selectionEnd:r})},onDrop:function(t){var n=t.dataTransfer.files;n&&e.handleUpload(n)},onPaste:function(t){if(t.clipboardData&&t.clipboardData.items){var n=Array.from(t.clipboardData.items).map((function(e){return e.kind})),a=t.clipboardData.files;n.some((function(e){return"file"===e}))&&(t.preventDefault(),e.customTextArea.blur(),e.handleUpload(a,e.state.shouldCompassImage))}},onKeyDown:function(t){t.ctrlKey&&"Enter"===t.key&&e.props.option&&e.props.option.submit&&e.props.option.submit()}}),c.createElement(ns,{message:this.state.message}),c.createElement("input",{style:{display:"none"},type:"file",id:"ubbFileUpload",multiple:!0,onChange:function(t){return Object(i.b)(e,void 0,void 0,(function(){var e,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return e=t.target,n=t.target.files,[4,this.handleUpload(n,this.state.shouldCompassImage)];case 1:return a.sent(),e.value="",[2]}}))}))}}),c.createElement(rs,{changeValue:this.changeValue,emojiType:this.state.emojiType,changeEmojiType:this.changeEmojiType,emojiIsShown:"emoji"===this.state.extendTagName,height:this.props.option&&this.props.option.height&&this.props.option.height-2}))},t}(c.PureComponent),ss=n(45),is=n(52),cs=n(50),ls=n(44),us=n(63),ms=n(542),ps=ss.a.Item,ds=ls.a.Option,hs=is.a.Item,fs=us.a.Group,gs=["加粗","斜体"],bs=ss.a.create()(function(e){function t(t){var n=e.call(this,t)||this;return n.onCreate=function(){n.props.form.validateFields((function(e,t){return Object(i.b)(n,void 0,void 0,(function(){var n,a,r,o,s,c,l,u;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(e)return[2];switch(n=t.reason,a=parseInt(this.state.days),r="ok",this.state.current){case"1":return[3,1];case"2":return[3,6];case"3":return[3,11];case"4":return[3,13];case"5":return[3,15];case"6":return[3,17];case"7":return[3,22];case"8":return[3,27];case"9":return[3,32]}return[3,34];case 1:return 1!==this.props.topicInfo.state?[3,3]:[4,Lr(this.props.topicInfo.id,this.props.boardId,n)];case 2:return r=i.sent(),[3,5];case 3:return[4,Rr(this.props.topicInfo.id,this.props.boardId,n,a)];case 4:r=i.sent(),i.label=5;case 5:return[3,34];case 6:return this.props.topicInfo.disableHot?[4,zr(this.props.topicInfo.id,n)]:[3,8];case 7:return r=i.sent(),[3,10];case 8:return[4,Ar(this.props.topicInfo.id,n)];case 9:r=i.sent(),i.label=10;case 10:return[3,34];case 11:return[4,_r(this.props.topicInfo.id,n)];case 12:return r=i.sent(),[3,34];case 13:return[4,co(this.props.topicInfo.id,this.state.childBoard,n)];case 14:return r=i.sent(),[3,34];case 15:return[4,Dr(this.props.topicInfo.id,this.props.boardId,n)];case 16:return r=i.sent(),[3,34];case 17:return 2!==this.props.topicInfo.topState?[3,19]:[4,Ur(this.props.topicInfo.id,this.props.boardId,n)];case 18:return r=i.sent(),[3,21];case 19:return[4,Pr(this.props.topicInfo.id,this.props.boardId,2,a,n)];case 20:r=i.sent(),i.label=21;case 21:return[3,34];case 22:return 4!==this.props.topicInfo.topState?[3,24]:[4,Ur(this.props.topicInfo.id,this.props.boardId,n)];case 23:return r=i.sent(),[3,26];case 24:return[4,Pr(this.props.topicInfo.id,this.props.boardId,4,a,n)];case 25:r=i.sent(),i.label=26;case 26:return[3,34];case 27:return 1!==this.props.topicInfo.bestState?[3,29]:[4,Br(this.props.topicInfo.id,n)];case 28:return r=i.sent(),[3,31];case 29:return[4,Fr(this.props.topicInfo.id,n)];case 30:r=i.sent(),i.label=31;case 31:return[3,34];case 32:for(o=!1,s=!1,c=0,l=this.state.checkedList;c<l.length;c++)"加粗"===(u=l[c])&&(o=!0),"斜体"===u&&(s=!0);return[4,Gr(this.props.topicInfo.id,o,s,this.state.background,a,n)];case 33:return i.sent(),[3,34];case 34:return"ok"===r?(this.props.update(),this.props.onCancel()):alert("操作失败"),[2]}}))}))}))},n.handleChangeComplete=function(e){n.setState({background:e.hex})},n.handleBoardChange=function(e){for(var t=e,a=0,r=n.state.boardsData;a<r.length;a++){var o=r[a];if(o.id==t){n.setState({childBoards:o.boards,childBoard:o.boards[0].name});break}}},n.onDaysChange=function(e){n.setState({days:e})},n.onChildBoardChange=function(e){n.setState({childBoard:e})},n.handleClick=function(e){n.setState({current:e.key})},n.onChange=function(e){n.setState({checkedList:e,indeterminate:!!e.length&&e.length<gs.length,checkAll:e.length===gs.length})},n.onCheckAllChange=function(e){n.setState({checkedList:e.target.checked?gs:[],indeterminate:!1,checkAll:e.target.checked})},n.state={current:"1",option:"",childBoard:"似水流年",childBoards:[{name:"似水流年",id:758},{name:"心灵之约",id:182},{name:"论坛指南",id:184}],background:"#fff",checkedList:[],indeterminate:!0,checkAll:!1,days:0,boardsData:[]},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return(e=localStorage.getItem("boardsInfo"))&&0!==e.indexOf("obj-")&&localStorage.removeItem("boardsInfo"),[4,gr()];case 1:return t=n.sent(),this.setState({boardsData:t}),[2]}}))}))},t.prototype.render=function(){var e=this.state.boardsData,t=this.state.childBoards,n=e.map((function(e){return c.createElement(ds,{key:e.id},e.name)})),a=this.state.childBoards.map((function(e){return 182!==e.id?c.createElement(ds,{key:e.id},e.name):null})),r=null,o=this.props,s=(o.visible,o.onCancel),i=this.props.form.getFieldDecorator,l=c.createElement(ss.a,null,c.createElement(ps,{label:"理由"},i("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(cs.a,null)))),u=c.createElement(ss.a,null,c.createElement(ps,{label:"天数"},c.createElement(ls.a,{value:this.state.days,onChange:this.onDaysChange},"1"===this.state.current?c.createElement(ds,{key:"0"},"0"):null,c.createElement(ds,{key:"7"},"7"),c.createElement(ds,{key:"14"},"14"),c.createElement(ds,{key:"30"},"30"),c.createElement(ds,{key:"98"},"98"),c.createElement(ds,{key:"1000"},"1000"))),c.createElement(ps,{label:"理由"},i("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(cs.a,null)))),m=c.createElement(ss.a,null,c.createElement(ps,{label:"理由"},i("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(cs.a,null))),c.createElement(ps,null,c.createElement(ls.a,{defaultValue:e.length>0?e[0].name:"",style:{width:120},onChange:this.handleBoardChange},n),c.createElement(ls.a,{defaultValue:t.length>0?t[0].name:"",style:{marginLeft:"2rem",width:120},onChange:this.onChildBoardChange,key:t.length>0?t[0].name:""},a))),p=c.createElement(ss.a,null,c.createElement(ps,null,c.createElement(us.a,{indeterminate:this.state.indeterminate,onChange:this.onCheckAllChange,checked:this.state.checkAll},"Check all"),c.createElement(fs,{options:gs,value:this.state.checkedList,onChange:this.onChange})),c.createElement(ps,{label:"天数"},c.createElement(ls.a,{value:this.state.days,onChange:this.onDaysChange},"1"===this.state.current?c.createElement(ds,{key:"0"},"0"):null,c.createElement(ds,{key:"7"},"7"),c.createElement(ds,{key:"14"},"14"),c.createElement(ds,{key:"30"},"30"),c.createElement(ds,{key:"98"},"98"),c.createElement(ds,{key:"1000"},"1000"))),c.createElement(ps,{label:"理由"},i("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(cs.a,null))),c.createElement(ps,{label:"颜色"},c.createElement(ms.a,{color:this.state.background,onChangeComplete:this.handleChangeComplete})));switch(this.state.current){case"1":r=1===this.props.topicInfo.state?l:u;break;case"2":case"3":case"5":case"8":r=l;break;case"4":r=m;break;case"6":r=2===this.props.topicInfo.topState?l:u;break;case"7":r=4===this.props.topicInfo.topState?l:u;break;case"9":r=p}return c.createElement(Ln.a,{visible:this.props.visible,title:"帖子管理",okText:"确认",cancelText:"取消",onOk:this.onCreate,onCancel:s,width:"50rem",maskClosable:!1},c.createElement(is.a,{onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal",style:{display:"flex",marginBottom:"1rem",justifyContent:"space-around"}},c.createElement(hs,{key:"1"},1===this.props.topicInfo.state?"解锁":"锁定"),c.createElement(hs,{key:"2"},this.props.topicInfo.disableHot?"允许热门":"禁止热门"),c.createElement(hs,{key:"3"},"删除"),c.createElement(hs,{key:"4"},"移动"),c.createElement(hs,{key:"5"},"提升"),c.createElement(hs,{key:"6"},2===this.props.topicInfo.topState?"取消固顶":"固顶"),c.createElement(hs,{key:"7"},4===this.props.topicInfo.topState?"取消全站固顶":"全站固顶"),c.createElement(hs,{key:"8"},1===this.props.topicInfo.bestState?"解除精华":"加精"),c.createElement(hs,{key:"9"},"高亮")),r)},t}(c.Component)),vs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={visible:!0,data:null,loading:!1},t.onClick=function(){return t.props.onClose()},t}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return this.setState({loading:!0}),[4,Po(this.props.topicInfo.id,0)];case 1:return e=t.sent(),this.setState({data:e,loading:!1}),[2]}}))}))},t.prototype.render=function(){var e=this,t=this.props.topicInfo,n=this.state,a=n.visible,r=n.data,o=n.loading;return c.createElement(c.Fragment,null,c.createElement(Ln.a,{visible:a,title:"管理记录",okText:"确认",cancelText:"取消",onOk:this.onClick,onCancel:this.onClick,width:"50rem",maskClosable:!1,bodyStyle:{maxHeight:"20rem",overflowY:"auto"}},r&&c.createElement(Fn.a,{dataSource:r?r.data:[],pagination:{onChange:function(n){return Object(i.b)(e,void 0,void 0,(function(){var e,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return this.setState({loading:!0}),e=7*(n-1),[4,Po(t.id,e)];case 1:return a=r.sent(),this.setState({data:a,loading:!1}),[2]}}))}))},pageSize:7,total:r.count},renderItem:function(e){return c.createElement(Fn.a.Item,{key:e.id},c.createElement(Fn.a.Item.Meta,{title:e.content,description:c.createElement("div",null,c.createElement("span",null,"对象:",e.targetUserName||"匿名"),c.createElement("span",{style:{marginLeft:"2rem",marginRight:"2rem"}},"时间:",Dn()(e.time).format("YYYY-MM-DD HH:mm:ss")))}),c.createElement("div",null," ",c.createElement("div",null,"操作人:",e.operatorUserName),c.createElement("div",null,"IP:",e.ip)))}},o&&c.createElement("div",{className:"demo-loading-container"},c.createElement(An.a,null)))))},t}(c.Component),ys=vs,Es=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"noticeSuccess displaynone",id:this.props.id,style:{position:"fixed",top:this.props.top,left:this.props.left,whiteSpace:"pre-wrap",textAlign:"start"}},this.props.text)},t}(c.PureComponent),Is=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"send-topic-notice-success displaynone",id:this.props.id},"操作失败。"+this.props.text)},t}(c.PureComponent),Cs=n(1283),ws=n(150),Ns=n.n(ws),Os=n(198),js="";function Ts(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return[4,sr(e)];case 1:return js=r.sent(),n=t.editor,a="\n\n![](".concat(js,")\n\n"),n.setValue(a),[2]}}))}))}var Ss={buttonContentBuilder:function(e){return c.createElement("div",null,c.createElement("label",{id:"upload-label",style:{cursor:"pointer",paddingBottom:"0.5rem",paddingTop:"0,5rem",paddingLeft:"1rem",paddingRight:"1rem"},htmlFor:"upload-files"},c.createElement("i",{className:"fa fa-image"})),c.createElement("input",{type:"file",id:"upload-files",style:{display:"none "},onChange:function(e){return Object(i.b)(void 0,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return t=e.target,[4,Ts(e,Ss)];case 1:return n.sent(),t.value="",[2]}}))}))}}))},buttonProps:{handleSubmit:function(e){}},editor:null},ks=Ss,xs=n(1278),Ps=xs.a.Panel,Us=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={visible:!0},t.onClick=function(){return t.props.changeStatus()},t}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props.IPData,t=this.state.visible;return c.createElement(c.Fragment,null,c.createElement(Ln.a,{visible:t,title:"查看IP",okText:"确认",cancelText:"取消",onOk:this.onClick,onCancel:this.onClick,width:"50rem",maskClosable:!1,bodyStyle:{maxHeight:"20rem",overflowY:"auto"}},c.createElement(xs.a,{defaultActiveKey:[]},e.map((function(e,t){return c.createElement(Ps,{key:"".concat(t),header:"".concat(e.ip," 共").concat(e.posts.length,"条")},e.posts.map((function(e){return c.createElement(c.Fragment,null,c.createElement("p",null,"用户名:",e.userName," 楼层:",e.floor),c.createElement("p",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},e.content))})))})))))},t}(c.Component),Ms=Us,_s=n(501),Rs=[{statusCode:400,errorMessageText:"wealth_not_enough_for_anonymous_post",errorMessageDescription:"你在当前可选匿名版面进行匿名回复所需的财富值不足。"},{statusCode:402,errorMessageText:"content_is_empty",errorMessageDescription:"你的回复内容为空。"},{statusCode:403,errorMessageText:"cannot_post_in_this_board",errorMessageDescription:"你已被当前版面TP，或根据当前版面的特殊规定你无法回帖。"},{statusCode:403,errorMessageText:"cannot_post_anonymous",errorMessageDescription:"你的某个匿名主题或者回复已被TP，在其到期或被解除TP前，你无法在全站发布任何匿名帖子。"},{statusCode:403,errorMessageText:"topic_is_locked",errorMessageDescription:"当前主题已被锁定。"},{statusCode:403,errorMessageText:"board_is_locked",errorMessageDescription:"当前版面已被锁定。"},{statusCode:403,errorMessageText:"user_state_is_abnormal",errorMessageDescription:"你已被全站TP，或你的账号已被锁定。"},{statusCode:403,errorMessageText:"cannot_entry_board",errorMessageDescription:"你不能进入当前版面。"},{statusCode:403,errorMessageText:"last_post_in_10_seconds",errorMessageDescription:"你在10秒内只能发言一次。"}],Ds=function(e){function t(t){var n=e.call(this,t)||this;n.handleValueChange=function(e){n.setState({mdeState:e})},n.showManageUI=function(e){n.setState({manageVisible:e})},n.handleCancel=function(){n.setState({manageVisible:!1})},n.showManageHistory=function(){n.setState({manageHistoryVisible:!0})},n.cachestr="post-cache-".concat(n.props.topicInfo.id),n.getCache=function(){n.setState({postCache:pa(n.cachestr)})},n.cleancache=function(){da(n.cachestr),n.setState({postCache:""})},n.generateErrorNoticeMessage=function(e,t){return c.createElement(Is,{key:t,text:e.errorMessageDescription,id:e.errorMessageText})},n.sendMdTopic=function(e){return Object(i.b)(n,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v,y;return Object(i.d)(this,(function(i){switch(i.label){case 0:this.setState({buttonDisabled:!0,buttonInfo:"...",anonymouslyPostButtonInfo:"..."}),t="/topic/".concat(this.props.topicInfo.id,"/post"),i.label=1;case 1:return i.trys.push([1,10,,11]),n=this.state.mdeState,a={content:n,contentType:1,title:"",isAnonymous:e},r=JSON.stringify(a),o=ma(),(s=new Headers).append("Authorization",o),s.append("Content-Type","application/json"),[4,ga(t,{method:"POST",headers:s,body:r})];case 2:return 400!==(c=i.sent()).status&&402!==c.status&&403!==c.status?[3,4]:[4,c.text()];case 3:for(l=i.sent(),u=[],m=0,p=Rs;m<p.length;m++)d=p[m],u.push(d.errorMessageText);return-1===u.indexOf(l)&&(l="unknown_error"),fo(l),this.setState({buttonDisabled:!1,buttonInfo:"回复",anonymouslyPostButtonInfo:"匿名回复"}),this.cacheForPost("markdown"),[3,9];case 4:return 200!==c.status?[3,8]:(h=po(n))?[4,c.text()]:[3,7];case 5:return f=i.sent(),g=this.props.topicInfo.id,b=JSON.stringify(h),v="/notification/at?topicid=".concat(g,"&postid=").concat(f),(y=new Headers).append("Content-Type","application/json"),y.append("Authorization",o),[4,ga(v,{method:"POST",headers:y,body:b})];case 6:i.sent(),i.label=7;case 7:return da("temporaryContent"),this.props.onChange(),this.setState({buttonDisabled:!1,buttonInfo:"回复",anonymouslyPostButtonInfo:"匿名回复"}),[3,9];case 8:this.cacheForPost("markdown"),fo("other"),this.setState({buttonDisabled:!1,buttonInfo:"请刷新",anonymouslyPostButtonInfo:"请刷新"}),i.label=9;case 9:return[3,11];case 10:return i.sent(),this.cacheForPost("markdown"),fo("other"),this.setState({buttonDisabled:!1,buttonInfo:"请刷新",anonymouslyPostButtonInfo:"请刷新"}),[3,11];case 11:return[2]}}))}))},n.postUbbContent=function(){n.sendUbbTopic(!1)},n.postAnonymousUbbContent=function(){(1===n.props.boardInfo.anonymousState||confirm("你真的要匿名吗？"))&&n.sendUbbTopic(!0)},n.postMdContent=function(){n.sendMdTopic(!1)},n.postAnonymousMdContent=function(){(1===n.props.boardInfo.anonymousState||confirm("你真的要匿名吗？"))&&n.sendMdTopic(!0)},n.showIP=function(){return Object(i.b)(n,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,io(this.props.topicInfo.id)];case 1:return e=t.sent(),this.setState({IPData:e}),[2]}}))}))},n.closeIP=function(){return n.setState({IPData:[]})},n.setValue=function(e){n.setState({mdeState:n.state.mdeState+e},(function(){n.setState({mdeState:n.state.mdeState})}))},n.sendUbbTopic=n.sendUbbTopic.bind(n),n.changeEditor=n.changeEditor.bind(n),n.showManagement=n.showManagement.bind(n),n.onChange=n.onChange.bind(n),n.close=n.close.bind(n),n.update=n.update.bind(n);var a="";return pa("temporaryContent-"+n.props.topicInfo.id)&&(a=pa("temporaryContent-"+n.props.topicInfo.id)),n.converter=new Os.Converter({tables:!0,strikethrough:!0,simplifiedAutoLink:!0,extensions:[_s]}),n.state={content:a,mode:0,masters:[],buttonDisabled:!1,buttonInfo:"回复",manageVisible:!1,mdeState:a,commands:[],IPData:[],postCache:"",anonymouslyPostButtonInfo:"匿名回复",manageHistoryVisible:!1,wealth:""},n}return Object(i.c)(t,e),t.prototype.update=function(e){this.setState({content:e})},t.prototype.onChange=function(){this.props.onChange()},t.prototype.showManagement=function(){this.setState({manageVisible:!0})},t.prototype.close=function(){var e="#manage".concat(this.props.topicInfo.id);ve(e).css("display","none")},t.prototype.cacheForPost=function(e){var t;"ubb"===e?t=this.state.content:(e="markdown")&&(t=this.state.mdeState),la(this.cachestr,t),this.setState({postCache:t})},t.prototype.componentWillUnmount=function(){this.state.content?la("temporaryContent-"+this.props.topicInfo.id,this.state.content):this.state.mdeState?la("temporaryContent-"+this.props.topicInfo.id,this.state.mdeState):da("temporaryContent-"+this.props.topicInfo.id),window.onbeforeunload=null},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s,c,l=this;return Object(i.d)(this,(function(i){switch(i.label){case 0:ks.editor=this,e=function(){return[{commands:[ks]}]},t=ws.ReactMdeCommands.getDefaultCommands(),(n=t.concat(e()))[1].commands.length=3,this.setState({commands:n}),window.onbeforeunload=function(){return l.state.content?"您还有内容未发布，确认离开吗？":null},a=Rn(this.props.content.replyTime).format("YYYY-MM-DD HH:mm:ss"),r="/topic/".concat(this.props.topicInfo.id,"#").concat(this.props.content.floor),o=this.props.boardInfo.masters,this.props.content&&(1===this.state.mode?(s="> **以下是引用".concat(this.props.content.floor,"楼：用户").concat(this.props.content.userName,"在").concat(a,"的发言：**\n\n > ").concat(this.props.content.content,"\n"),this.setState({masters:o,content:s,mdeState:s})):(s="\n[quote][b]以下是引用".concat(this.props.content.floor,"楼：用户").concat(this.props.content.userName,"在").concat(a,"的发言：\n[color=blue][url=").concat(r,"]>>查看原帖<<[/url][/color][/b]").concat(this.props.content.content,"[/quote]\n"),this.setState({masters:o,content:s}))),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Uo()];case 2:return c=i.sent(),[3,4];case 3:return i.sent(),c="查询财富值余额失败，请前往个人中心查看",[3,4];case 4:return this.setState({wealth:c}),this.getCache(),[2]}}))}))},t.prototype.componentWillReceiveProps=function(e){var t=Rn(e.content.replyTime).format("YYYY-MM-DD HH:mm:ss");if(e.content.userName)if(1===this.state.mode){var n=">**以下是引用".concat(e.content.floor,"楼：用户").concat(e.content.userName,"在").concat(t,"的发言：**\n").concat(e.content.content,"\n");this.setState({content:n,mdeState:n})}else{var a=e.content.floor,r=void 0,o=void 0;a>10?(r=parseInt(((a-1)/10).toString())+1,a%=10,o="/topic/".concat(this.props.topicInfo.id,"/").concat(r,"#").concat(0===a?10:a)):o="/topic/".concat(this.props.topicInfo.id,"#").concat(e.content.floor);n="[quote][b]以下是引用".concat(e.content.floor,"楼：用户").concat(e.content.userName,"在").concat(t,"的发言：[color=blue][url=").concat(o,"]>>查看原帖<<[/url][/color][/b]\n").concat(e.content.content,"[/quote]\n");this.setState({content:n})}else this.setState({content:"",mdeState:""})},t.prototype.sendUbbTopic=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v;return Object(i.d)(this,(function(i){switch(i.label){case 0:this.setState({buttonDisabled:!0,buttonInfo:"...",anonymouslyPostButtonInfo:"..."}),t="/topic/".concat(this.props.topicInfo.id,"/post"),i.label=1;case 1:return i.trys.push([1,11,,12]),y=this.state.content,E=new RegExp("[(quotex?)].*[/(quotex?)]"),n=y.match(E)&&y.match(E)[1]===y.match(E)[2]?{content:this.state.content,contentType:0,title:"",parentId:this.props.content.postId,isAnonymous:e}:{content:this.state.content,contentType:0,title:"",isAnonymous:e},a=JSON.stringify(n),[4,ha()];case 2:return r=i.sent(),(o=new Headers).append("Authorization",r),o.append("Content-Type","application/json"),[4,ga(t,{method:"POST",headers:o,body:a})];case 3:return 400!==(s=i.sent()).status&&402!==s.status&&403!==s.status?[3,5]:[4,s.text()];case 4:for(c=i.sent(),l=[],u=0,m=Rs;u<m.length;u++)p=m[u],l.push(p.errorMessageText);return-1===l.indexOf(c)&&(c="unknown_error"),fo(c),this.setState({buttonDisabled:!1,buttonInfo:"回复",anonymouslyPostButtonInfo:"匿名回复"}),this.cacheForPost("ubb"),[3,10];case 5:return 200!==s.status?[3,9]:(d=po(this.state.content))?[4,s.text()]:[3,8];case 6:return h=i.sent(),f=this.props.topicInfo.id,g=JSON.stringify(d),b="/notification/at?topicid=".concat(f,"&postid=").concat(h),(v=new Headers).append("Content-Type","application/json"),v.append("Authorization",r),[4,ga(b,{method:"POST",headers:v,body:g})];case 7:i.sent(),i.label=8;case 8:return da("temporaryContent-"+this.props.topicInfo.id),this.setState({buttonDisabled:!1,buttonInfo:"回复",anonymouslyPostButtonInfo:"匿名回复"}),this.props.onChange(),[3,10];case 9:this.cacheForPost("ubb"),fo("other"),this.setState({buttonDisabled:!1,buttonInfo:"请刷新",anonymouslyPostButtonInfo:"请刷新"}),i.label=10;case 10:return[3,12];case 11:return i.sent(),this.cacheForPost("ubb"),fo("other"),this.setState({buttonDisabled:!1,buttonInfo:"请刷新",anonymouslyPostButtonInfo:"请刷新"}),[3,12];case 12:return[2]}var y,E}))}))},t.prototype.changeEditor=function(){0===this.state.mode?this.setState({mode:1}):this.setState({mode:0})},t.prototype.getInitialState=function(){return{value:""}},t.prototype.render=function(){var e,t=this,n=new Date,a=new Date(this.props.topicInfo.time),r=((n.getTime()-a.getTime())/1e3/60/60/24).toFixed(0),o=null;Number(r)>365&&(o=c.createElement("div",{className:"row",style:{color:"red"}},"提示：该贴发布于",r,"天前，如无必要请勿回复。"));var s,i,l=this.props.boardInfo.anonymousState;0===l?(s=c.createElement("button",{id:"post-topic-button",onClick:this.postUbbContent,disabled:this.state.buttonDisabled,className:"button blue"},this.state.buttonInfo),i=c.createElement("button",{id:"post-topic-button-md",onClick:this.postMdContent,disabled:this.state.buttonDisabled,className:"button blue"},this.state.buttonInfo)):1===l?(s=c.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},c.createElement("button",{id:"post-topic-button-anonymous",onClick:this.postAnonymousUbbContent,disabled:this.state.buttonDisabled,className:"button grey"},this.state.anonymouslyPostButtonInfo),c.createElement("p",null,"根据设置，你在本楼的回复都是匿名，并且不花费财富值。")),i=c.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},c.createElement("button",{id:"post-topic-button-md-anonymous",onClick:this.postAnonymousMdContent,disabled:this.state.buttonDisabled,className:"button grey"},this.state.anonymouslyPostButtonInfo),c.createElement("p",null,"根据设置，你在本楼的回复都是匿名，并且不花费财富值。"))):2===l&&(this.props.topicInfo.isAnonymous&&this.props.topicInfo.isMe?(s=c.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},c.createElement("button",{id:"post-topic-button-anonymous",onClick:this.postAnonymousUbbContent,disabled:this.state.buttonDisabled,className:"button grey"},this.state.anonymouslyPostButtonInfo),c.createElement("p",null,"根据设置，你在本楼的回复都是匿名，并且不花费财富值。")),i=c.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},c.createElement("button",{id:"post-topic-button-md-anonymous",onClick:this.postAnonymousMdContent,disabled:this.state.buttonDisabled,className:"button grey"},this.state.anonymouslyPostButtonInfo),c.createElement("p",null,"根据设置，你在本楼的回复都是匿名，并且不花费财富值。"))):(s=c.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},c.createElement("div",null,c.createElement("button",{id:"post-topic-button",onClick:this.postUbbContent,disabled:this.state.buttonDisabled,className:"button blue"},this.state.buttonInfo),c.createElement("button",{id:"post-topic-button-anonymous",onClick:this.postAnonymousUbbContent,disabled:this.state.buttonDisabled,className:"button grey"},this.state.anonymouslyPostButtonInfo)),c.createElement("p",null,"在本版面匿名回复每次需消耗2000财富值。你当前的财富值余额为：",this.state.wealth)),i=c.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},c.createElement("div",null,c.createElement("button",{id:"post-topic-button-md",onClick:this.postMdContent,disabled:this.state.buttonDisabled,className:"button blue"},this.state.buttonInfo),c.createElement("button",{id:"post-topic-button-md-anonymous",onClick:this.postAnonymousMdContent,disabled:this.state.buttonDisabled,className:"button grey"},this.state.anonymouslyPostButtonInfo)),c.createElement("p",null,"在本版面匿名回复每次需消耗2000财富值。你当前的财富值余额为：",this.state.wealth)))),0===this.state.mode?("使用UBB模式编辑",e=c.createElement("div",null,o,c.createElement(os,{update:this.update,value:this.state.content,option:{height:20,submit:this.postUbbContent}}),c.createElement("div",{className:"row",style:{justifyContent:"center",marginBottom:"1.25rem "}},s))):("使用Markdown编辑",e=c.createElement("div",null,c.createElement("div",null,o,c.createElement(Ns.a,{value:this.state.mdeState,onChange:this.handleValueChange,generateMarkdownPreview:function(e){return t.converter.makeHtml(e),Promise.resolve(t.converter.makeHtml(e))},commands:this.state.commands,minEditorHeight:330,maxEditorHeight:500,buttonContentOptions:{iconProvider:function(e){return"heading"===e?c.createElement("i",{className:"fa fa-header"}):c.createElement("i",{className:"fa fa-".concat(e)})}}})),c.createElement("div",{className:"row",style:{justifyContent:"center",marginTop:"5rem "}},i)));var u=[],m=qr(this.props.boardInfo.boardMasters),p=ua(),d=p&&p.id===this.props.topicInfo.userId&&this.props.topicInfo.topicAuthorPermissions&&0!==this.props.topicInfo.topicAuthorPermissions.length;(m||d)&&(u.push(c.createElement(Bn.a,{key:0,type:"primary",onClick:this.showManagement},"管理")),u.push(c.createElement(Bn.a,{key:1,type:"primary",onClick:this.showManageHistory,style:{marginLeft:"2rem"}},"管理记录"))),m&&u.push(c.createElement(Bn.a,{key:2,type:"primary",onClick:this.showIP,style:{marginLeft:"2rem"}},"查看IP"));var h=c.createElement("div",null,u),f=null;return pa(this.cachestr)&&(f=c.createElement("div",null,c.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},c.createElement("button",{id:"post-topic-cache-button",onClick:this.cleancache,className:"button blue",style:{width:"100%",height:"2rem",lineHeight:"0.8rem",marginBottom:"1rem",fontSize:"1rem"}},"下面文本框中的内容为前一次回帖失败时的缓存，你可以复制到相应的UBB/Markdown编辑器中重新编辑。点击这个按钮将清除缓存。")),c.createElement("input",{id:"cache-text",type:"text",style:{marginBottom:"1rem"},onChange:this.getCache,value:this.state.postCache}))),c.createElement("div",{id:"sendTopicInfo",style:{width:"100%",display:"flex",flexDirection:"column"}},c.createElement("div",{className:"row",style:{justifyContent:"flex-end"}},c.createElement("div",{id:"post-topic-changeMode",className:"changeEditor",onClick:this.changeEditor.bind(this),style:{width:"14rem",marginBottom:"0.5rem"}},1===this.state.mode?"切换到UBB编辑器":"切换到Markdown编辑器")),e,f,h,this.state.manageVisible&&c.createElement(bs,{update:this.onChange,boardId:this.props.boardInfo.id,topicInfo:this.props.topicInfo,onCancel:this.handleCancel,visible:this.state.manageVisible,isManager:m,permissions:this.props.topicInfo.topicAuthorPermissions}),this.state.manageHistoryVisible&&c.createElement(ys,{topicInfo:this.props.topicInfo,onClose:function(){return t.setState({manageHistoryVisible:!1})},visible:this.state.manageHistoryVisible}),0!==this.state.IPData.length&&c.createElement(Ms,{IPData:this.state.IPData,changeStatus:this.closeIP}),Rs.map(this.generateErrorNoticeMessage),c.createElement(Is,{text:"other",id:"出现了意料之外的错误，请稍后重试。如果依然出现该问题，请联系管理员。"}),c.createElement(Is,{text:"unknown_error",id:"原因未知，请刷新重试。如果依然出现该问题，请联系管理员。"}),c.createElement(Cs.a,{message:function(e){return-1!==(t.state.content&&e.pathname.indexOf(t.props.topicInfo.id))||"确定要离开吗？"}}))},t}(c.Component),Ls=function(e){function t(t){var n=e.call(this,t)||this;return n.state={boardId:"",topicId:"",boardName:"",title:""},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){this.setState({boardId:this.props.topicInfo.boardId,topicId:this.props.topicId,boardName:this.props.boardInfo.name,title:this.props.topicInfo.title})},t.prototype.componentWillReceiveProps=function(e){this.setState({boardId:e.topicInfo.boardId,topicId:e.topicId,boardName:e.boardInfo.name,title:e.topicInfo.title})},t.prototype.render=function(){var e="/board/".concat(this.state.boardId),t="/topic/".concat(this.state.topicId);return c.createElement("div",{className:"row",style:{alignItems:"baseline",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"},to:"/boardlist"},"版面列表"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"},to:e},this.state.boardName),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"},to:t},c.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"15rem",whiteSpace:"nowrap"}},this.state.title)," "))},t}(c.Component),Fs=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.follow=a.follow.bind(a),a.unfollow=a.unfollow.bind(a),a.changeTraceMode=a.changeTraceMode.bind(a),a.state={traceMode:a.props.traceMode,buttonInfo:a.props.userInfo.isFollowing?"取关":"关注",buttonIsDisabled:!1,isFollowing:a.props.userInfo.isFollowing,fanCount:a.props.userInfo.fanCount,photoframe:null},a}return Object(i.c)(t,e),t.prototype.changeTraceMode=function(){this.setState({traceMode:!0!==this.state.traceMode})},t.prototype.unfollow=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.setState({buttonIsDisabled:!0,buttonInfo:"..."}),e=ma(),t=this.props.userInfo.id,n="/me/followee/".concat(t),(a=new Headers).append("Authorization",e),[4,ga(n,{method:"DELETE",headers:a})];case 1:return 200!==r.sent().status?[3,3]:[4,oo(this.props.userInfo.id,this.props.userInfo.name)];case 2:return r.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"关注",isFollowing:!1,fanCount:this.props.userInfo.fanCount}),[3,4];case 3:throw{};case 4:return[3,6];case 5:return r.sent(),alert("网络错误"),[3,6];case 6:return[2]}}))}))},t.prototype.follow=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.setState({buttonIsDisabled:!0,buttonInfo:"..."}),e=ma(),t=this.props.userInfo.id,n="/me/followee/".concat(t),(a=new Headers).append("Authorization",e),[4,ga(n,{method:"PUT",headers:a})];case 1:return 200!==r.sent().status?[3,3]:[4,oo(this.props.userInfo.id,this.props.userInfo.name)];case 2:return r.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"取关",isFollowing:!0,fanCount:this.props.userInfo.fanCount+1}),[3,4];case 3:throw{};case 4:return[3,6];case 5:return r.sent(),alert("网络错误"),[3,6];case 6:return[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return e=this.props.userInfo.displayTitleId,[4,this.getPhotoFrame(e)];case 1:return t=n.sent(),this.setState({photoframe:t}),[2]}}))}))},t.prototype.getPhotoFrame=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return t="/user/id/".concat(this.props.userInfo.id),n=encodeURI(t),1!=this.props.isAnonymous?[3,1]:[2,c.createElement("div",{style:{width:"100%",justifyContent:"center",display:"flex",position:"relative"}},c.createElement("div",{style:{zIndex:100}},c.createElement("img",{className:"userPortrait",src:this.props.userInfo.portraitUrl})))];case 1:return e?[4,fetch("/static/portrait.json")]:[3,4];case 2:return[4,i.sent().json()];case 3:switch(a=i.sent(),r=void 0,o=a.普通.style,e){case 82:o=a.吉祥物.style,r=a.吉祥物.imageUrl;break;case 18:case 22:o=a.版主.style,r=a.版主.imageUrl;break;case 85:case 29:o=a.编辑部.style,r=a.编辑部.imageUrl;break;case 37:case 23:o=a.技术组.style,r=a.技术组.imageUrl;break;case 28:case 16:o=a.贵宾.style,r=a.贵宾.imageUrl;break;case 84:case 34:o=a.策划部.style,r=a.策划部.imageUrl;break;case 96:case 99:o=a.影音部.style,r=a.影音部.imageUrl;break;case 32:case 21:o=a.站务组.style,r=a.站务组.imageUrl;break;case 86:case 35:o=a.体育部.style,r=a.体育部.imageUrl;break;case 94:case 93:o=a.办公室.style,r=a.办公室.imageUrl;break;case 91:o=a.认证用户.style,r=a.认证用户.imageUrl;break;default:r=a.普通.imageUrl}return s={},82!==e&&18!==e&&22!==e&&32!==e&&21!==e&&28!==e&&16!==e&&37!==e&&23!==e&&29!==e&&85!==e&&84!==e&&34!==e&&94!==e&&93!==e&&35!==e&&86!==e&&96!==e&&99!==e&&91!==e||(s={boxShadow:"0 0 0"}),[2,c.createElement("div",{style:{width:"100%",justifyContent:"center",display:"flex",position:"relative"}},c.createElement("div",{style:{zIndex:100}},c.createElement("a",{href:n,style:{display:"block",maxHeight:"5rem"}},c.createElement("img",{className:"userPortrait",src:this.props.userInfo.portraitUrl,style:s,onError:this.handleImageErrored.bind(this)}))),c.createElement("div",{className:"photoFrame"},c.createElement("img",{src:r,style:o})))];case 4:return[2,c.createElement("div",{style:{width:"100%",justifyContent:"center",display:"flex",position:"relative"}},c.createElement("div",{style:{zIndex:100}},c.createElement("a",{href:n,style:{display:"block",maxHeight:"7.5rem"}},c.createElement("img",{className:"userPortrait",src:this.props.userInfo.portraitUrl,onError:this.handleImageErrored.bind(this)}))))]}}))}))},t.prototype.handleImageErrored=function(e){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return e.preventDefault(),e.target.src="/static/images/default_avatar_boy.png",[2]}))}))},t.prototype.render=function(){if(!this.props.isAnonymous){var e="/user/id/".concat(this.props.userInfo.id),t=encodeURI(e);c.createElement("a",{href:t,style:{display:"block",maxHeight:"7.5rem"}},c.createElement("img",{className:"userPortrait",src:this.props.userInfo.portraitUrl}))}1==this.props.isAnonymous&&c.createElement("div",{style:{display:"block",maxHeight:"7.5rem"}},c.createElement("img",{className:"userPortrait",src:this.props.userInfo.portraitUrl}));this.props.userInfo.id;var n=c.createElement("div",{style:{color:"#fff"},className:"userMessage-userName"},this.props.userInfo.name);if(!this.props.isAnonymous){e="/user/id/".concat(this.props.userInfo.id),t=encodeURI(e);n=c.createElement(vt.a,{style:{color:"#fff"},className:"userMessage-userName",to:t},this.props.userInfo.name)}"匿名"!=this.props.userInfo.privilege&&"匿名用户"!==this.props.userInfo.privilege||(n=c.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%"}},c.createElement("div",{style:{color:"white",fontSize:"1rem",fontWeight:"bold",marginLeft:"1rem",marginTop:"-0.8rem"}},this.props.userInfo.name),c.createElement("div",{className:"userMessageAnonymous"},"别问我是谁")));c.createElement("div",{style:{color:"red",marginLeft:"1rem"}},c.createElement("span",null,"最热回复"),c.createElement("span",null,"(第"),c.createElement("span",null,this.props.topicInfo.floor),c.createElement("span",null,"楼)")),c.createElement("div",{style:{marginLeft:"0.625rem"}},c.createElement("span",null,"第"),c.createElement("span",{style:{color:"red"}},this.props.topicInfo.floor),c.createElement("span",null,"楼"));var a,r=null;if(ua()&&ua().name!==this.props.userInfo.name&&!this.props.isAnonymous){var o="/message/message?id=".concat(this.props.userInfo.id);r=c.createElement("div",{className:"row userMessageBtn"},c.createElement("div",{style:{marginLeft:"0.85rem"}},c.createElement("button",{className:"replierBtn",id:this.state.isFollowing?"":"follow",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo)),c.createElement("div",{style:{marginLeft:"0.5rem"}}," ",c.createElement(vt.a,{to:o},c.createElement("button",{className:"replierBtn"},"私信"))))}var s=(new Date).getTime(),i=new Date(this.props.userInfo.lastLogOnTime).getTime(),l=Math.abs(i-s)/1e3/60/60,u=Math.floor(l),m=l/24,p=Math.floor(m),d=m/30,h=Math.floor(d),f=m/365,g=Math.floor(f),b=this.state.fanCount;a=g>1?"".concat(g,"年前"):h>1?"".concat(h,"个月前"):p>1?"".concat(p,"天前"):u>1?"".concat(u,"小时前"):"1小时内";var v=null;this.props.isAnonymous||(v=c.createElement("div",{className:"column",style:{width:"60%",alignItems:"flex-start",paddingLeft:"1.5rem",marginTop:"1rem"}},c.createElement("div",{className:"userMessageOpt"},"帖数 ",this.props.userInfo.postCount),c.createElement("div",{className:"userMessageOpt"},"粉丝 ",b),c.createElement("div",{className:"userMessageOpt"},"威望 ",this.props.userInfo.prestige),c.createElement("div",{className:"userMessageOpt"},"最后登录 ",a)));var y=c.createElement("div",{className:"userGender"},0===this.props.userInfo.gender?c.createElement("i",{className:"fa fa-venus",style:{color:"#fff"}}):c.createElement("i",{className:"fa fa-mars",style:{color:"#fff"}}));return 1==this.props.isAnonymous&&(y=null),c.createElement("div",{className:"userMessage"},c.createElement("div",{className:"column userMessage-left"},n,v),c.createElement("div",{className:"column userMessage-right"},y,this.state.photoframe,r))},t}(Jo),Bs=function(e){function t(t){var n=e.call(this,t)||this;return t.voteInfo.myRecord?n.state={items:t.voteInfo.myRecord.items,message:"",messageOpacity:0,isVoting:!1}:n.state={items:[],message:"",messageOpacity:0,isVoting:!1},n.handleInputChange=n.handleInputChange.bind(n),n.submit=n.submit.bind(n),n.getMessage=n.getMessage.bind(n),n}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){e.voteInfo.myRecord?this.setState({items:e.voteInfo.myRecord.items}):this.setState({items:[]})},t.prototype.handleInputChange=function(e){this.setState((function(t){var n=t.items.indexOf(e);if(-1===n)return{items:[].concat(t.items,e)};var a=t.items;return a.splice(n,1),{items:Object(i.e)([],a,!0)}}))},t.prototype.submit=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a=this;return Object(i.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),this.setState({isVoting:!0}),[4,fa()];case 1:return(e=r.sent()).append("Content-Type","application/json"),[4,ga("/topic/".concat(this.props.voteInfo.topicId,"/vote"),{method:"POST",headers:e,body:JSON.stringify({items:this.state.items})})];case 2:if(t=r.sent(),this.props.getInfo(),t.ok)throw new Error("投票成功");return[3,4];case 3:return n=r.sent(),this.setState({message:n.message,messageOpacity:1,isVoting:!1}),setTimeout((function(){a.setState({messageOpacity:0})}),1e3),setTimeout((function(){a.setState({message:""})}),1500),[3,4];case 4:return[2]}}))}))},t.prototype.getMessage=function(){switch(!0){case!Wa():return c.createElement("p",null,"你还未登录，请先",c.createElement(vt.a,{to:"/logOn"},"登陆"),"。");case this.props.voteInfo.canVote&&this.props.voteInfo.needVote:return c.createElement("p",null,"该投票在过期前，只有完成投票才能查看结果。你还未投过票，请先投票。");case!!this.props.voteInfo.myRecord:return c.createElement("p",null,"你已经投过票了，你的投票选项是：",this.props.voteInfo.myRecord.items.join("，"),"。");default:return null}},t.prototype.render=function(){var e=this,n=this.props.voteInfo.needVote&&!this.props.voteInfo.myRecord&&this.props.voteInfo.isAvailable;return Wo.getState().userInfo.currentUserInfo.id===this.props.topicInfo.userId&&(n=!1),c.createElement("div",{className:"vote-content"},c.createElement("div",{className:"vote-message",style:{opacity:this.state.messageOpacity}},this.state.message),this.props.voteInfo.voteItems.map((function(a,r){return c.createElement("div",{className:"vote-items",key:a.id},c.createElement("p",{className:"vote-description"},c.createElement("input",{disabled:!e.props.voteInfo.canVote||-1===e.state.items.indexOf(a.id)&&e.state.items.length===e.props.voteInfo.maxVoteCount,checked:-1!==e.state.items.indexOf(a.id),type:"checkbox",id:"vote".concat(a.id),onChange:function(){return e.handleInputChange(a.id)}}),c.createElement("label",{htmlFor:"vote".concat(a.id)},a.description)),c.createElement("p",{className:"vote-bar"},c.createElement("span",{className:"vote-total"},c.createElement("span",{className:"vote-current",style:{backgroundColor:t.colors[r%5],width:"".concat(20*a.count/(e.props.voteInfo.voteUserCount||1),"rem")}})),n?null:c.createElement("span",{className:"vote-item-info"},a.count,"人/",(100*a.count/(e.props.voteInfo.voteUserCount||1)).toFixed(2),"%")))})),c.createElement("div",{className:"vote-info"},c.createElement("p",null,"投票过期时间：",Rn(this.props.voteInfo.expiredTime).format("YYYY年MM月DD日 HH:mm:ss")),c.createElement("p",null,"每人最多允许投",this.props.voteInfo.maxVoteCount,"票，已有",this.props.voteInfo.voteUserCount,"人参与投票。"),this.getMessage()),this.props.voteInfo.canVote?c.createElement("div",{className:"vote-buttons"},c.createElement("button",{className:"button blue",type:"button",onClick:this.submit,disabled:!this.state.items.length||this.state.isVoting},"投票"),c.createElement("button",{className:"button blue",type:"button",onClick:function(){return e.setState({items:[]})}},"重置")):null)},t.colors=["#ff0000","#ff8000","#22b14c","#00a2e8","#3f48cc"],t}(c.PureComponent),As=n(172),zs=(n(394),n(415),n(198)),Vs=n(501),Hs=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.state={postId:a.props.postId,vote:null},a.getVote=a.getVote.bind(a),a}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o;return Object(i.d)(this,(function(s){return e="doc-content".concat(this.props.postId,"-").concat(this.props.floor),">"===(t=this.props.content.replace(/\n>[\s\S]*?\n\n/g,(function(e){return e.replace(/\n[^\n](?!>)/g,(function(e){return e.replace(/\n(?!>)/,"\n>")}))})))[0]&&(-1===(n=t.indexOf("\n\n"))?t=t.replace(/\n[^\n](?!>)/g,(function(e){return e.replace(/\n(?!>)/,"\n>")})):(a=t.substr(0,n),t=a.replace(/\n[^\n](?!>)/g,(function(e){return e.replace(/\n(?!>)/,"\n>")}))+t.substr(n+1,t.length))),t=t.replace(/发言：\*\*\n/g,"发言：**\n\n"),(r=new zs.Converter({extensions:[Vs]})).setOption("tables",!0),r.setOption("strikethrough",!0),o=r.makeHtml(t),document.getElementById(e)&&(document.getElementById(e).innerHTML=o),1===this.props.floor&&this.props.topicInfo.isVote&&!this.state.vote&&this.getVote(),[2]}))}))},t.prototype.getVote=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),[4,fa()];case 1:return e=n.sent(),[4,ga("/topic/".concat(this.props.topicInfo.id,"/vote"),{headers:e})];case 2:return[4,n.sent().json()];case 3:return t=n.sent(),this.setState({vote:t}),[3,5];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))},t.prototype.render=function(){var e,t="doc-content".concat(this.props.postId,"-").concat(this.props.floor),n=function(e){try{var t=/@[^ \n]{1,10}?[ ]+/g,n=/[^@ ]+/;if(""===e)return e;if(e.match(t)){var a=e.match(t).length;a>10&&(a=10);for(var r=new Array,o=0;o<a;o++){var s=e.match(t)[o],i=n.exec(s)[0];r[o]=i}for(o=0;o<a;o++){var c=new RegExp("@".concat(r[o],"[ ]"),"g");e=e.replace(c,'[url="/user/name/'.concat(encodeURIComponent(r[o]),'"]@').concat(r[o]," [/url]"))}return e}return e}catch(l){return e}}(this.props.content),a=c.createElement(tn,{code:n,options:Object(i.a)(Object(i.a)({},new Ie),{allowToolbox:!0})}),r=(function(e){try{var t=/@[^ \n]{1,10}?[ ]+/g,n=/[^@ ]+/;if(""===e)return e;if(e.match(t)){var a=e.match(t).length;a>10&&(a=10);for(var r=new Array,o=0;o<a;o++){var s=e.match(t)[o],i=n.exec(s)[0];r[o]=i}for(o=0;o<a;o++){var c=new RegExp("@".concat(r[o]," "),"g");e=e.replace(c,"[@".concat(r[o]," ](/user/name/").concat(r[o],")"))}return e}return e}catch(l){return e}}(this.props.content),c.createElement("div",{className:"markdown-container mde-preview"},c.createElement("div",{id:t,className:"mde-preview-content"})));return e=a,1===this.props.contentType&&(e=r),c.createElement("div",{className:"reply-content"},this.state.vote?c.createElement(Bs,{topicInfo:this.props.topicInfo,getInfo:this.getVote,voteInfo:this.state.vote}):null,c.createElement("div",{style:{alignSelf:"center",marginTop:"1rem",marginBottom:"-1rem"}},this.props.topicInfo.isAnonymous&&this.props.topicInfo.todayCount>3&&1===this.props.floor&&c.createElement(As.a,null,"该用户今日在本版发布了",this.props.topicInfo.todayCount,"个主题帖")),c.createElement("div",{className:"substance"},e))},t}(c.Component),$s=n(536),Ws=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this;return this.props,c.createElement("div",{className:"good tagSize"},c.createElement("div",{className:"userImage"},c.createElement("img",{style:{cursor:"pointer"},onClick:function(){return e.props.history.push("/user/name/".concat(e.props.userName))},src:this.props.portraitUrl})," "),c.createElement("div",{className:"userName",style:{cursor:"pointer"},onClick:function(){return e.props.history.push("/user/name/".concat(e.props.userName))}},this.props.userName),c.createElement("div",{className:"grades"},this.props.content),c.createElement("div",{className:"credit"},c.createElement("span",null,this.props.reason)))},t}(c.Component),Ys=Object($s.a)(Ws),qs=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.showAll=a.showAll.bind(a),a.hideAll=a.hideAll.bind(a),a.generateAwardInfo=a.generateAwardInfo.bind(a),a.state={info:[],shortInfo:[],count:0,showAll:!1},a}return Object(i.c)(t,e),t.prototype.hideAll=function(){this.setState({showAll:!1})},t.prototype.showAll=function(){this.setState({showAll:!0})},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:for(o in e=[],(t=this.props.awardInfo)||(t=[]),n=[],a=[],t)n[o]=t[o].operatorName;return t.length>0?[4,ya(n)]:[3,2];case 1:a=i.sent(),i.label=2;case 2:for(o in t)r=_a(t[o].operatorName,a),t[o].portraitUrl=r.portraitUrl;if(t.length>10)for(o=0;o<10;o++)e[o]=this.generateAwardInfo(t[o]);return s=t.map(this.generateAwardInfo.bind(this)),this.setState({info:s,shortInfo:e,count:t.length}),[2]}}))}))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c;return Object(i.d)(this,(function(i){switch(i.label){case 0:for(o in t=[],(n=e.awardInfo)||(n=[]),a=[],r=[],n)a[o]=n[o].operatorName;return[4,ya(a)];case 1:if(r=i.sent(),n.length>10)for(o=0;o<10;o++)s=_a(n[o].operatorName,r),n[o].portraitUrl=s.portraitUrl,n[o],t[o]=this.generateAwardInfo(n[o]);return c=n.map(this.generateAwardInfo.bind(this)),this.setState({info:c,shortInfo:t,count:n.length}),[2]}}))}))},t.prototype.generateAwardInfo=function(e){return c.createElement(Ys,{postId:this.props.postId,topicId:e.id,portraitUrl:e.portraitUrl,content:e.content,reason:e.reason,userName:e.operatorName})},t.prototype.render=function(){var e="#awardInfo".concat(this.props.postId),t="awardInfo".concat(this.props.postId);$(e).css("display",""),this.state.info&&0!==this.state.info.length?this.state.info.length<10&&$(e).css("display",""):$(e).css("display","none");var n=c.createElement("button",{style:{border:"#eaeaea solid thin",cursor:"pointer"},onClick:this.state.showAll?this.hideAll:this.showAll},this.state.showAll?"收起":"显示全部");return c.createElement("div",{className:"column awardInfo",id:t},c.createElement("div",{className:"row",style:{width:"25rem",fontSize:"0.8rem",marginBottom:"0.2rem"}},c.createElement("div",{style:{marginLeft:"3.1rem"}},"用户"),c.createElement("div",{style:{marginLeft:"4.7rem"}},"操作"),c.createElement("div",{style:{marginLeft:"8.9rem"}},"理由")),this.state.count>10?this.state.showAll?this.state.info:this.state.shortInfo:this.state.info,this.state.count>10?n:null)},t}(c.Component),Js=n(175),Gs=ss.a.Item,Qs=ls.a.Option,Ks=ss.a.create()(function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){"selected ".concat(e),n.setState({option:e})},n.handleClick=function(e){n.setState({current:e.key})},n.onCreate=function(){n.state.current;var e=n.props.form,t=0,a="",r=null;e.validateFields((function(e,o){return Object(i.b)(n,void 0,void 0,(function(){return Object(i.d)(this,(function(n){switch(n.label){case 0:if(e)return[2];switch(this.state.current){case"wealth":return[3,1];case"prestige":return[3,3];case"punishwealth":return[3,5];case"punishprestige":return[3,7];case"delete":return[3,9];case"tp":return[3,11];case"canceltp":return[3,13]}return[3,15];case 1:return t=parseInt(o.wealth),[4,hr(a=o.reason.toString(),t,this.props.item.id)];case 2:case 4:case 6:case 8:case 10:case 12:case 14:return r=n.sent(),[3,15];case 3:return t=parseInt(o.prestige),a=o.reason.toString(),[4,jr(this.props.item.id,t,a)];case 5:return t=parseInt(o.wealth),[4,fr(a=o.reason.toString(),t,this.props.item.id)];case 7:return t=parseInt(o.prestige),a=o.reason.toString(),[4,Tr(this.props.item.id,t,a)];case 9:return a=o.reason.toString(),[4,Sr(this.props.item.topicId,this.props.item.id,a)];case 11:return a=o.reason.toString(),t=parseInt(o.days),[4,kr(this.props.item.id,a,t)];case 13:return[4,xr(this.props.item.userId,this.props.boardId)];case 15:return"ok"===r?(this.props.update(),this.props.onCancel()):alert(r),[2]}}))}))}))},n.state={option:"",current:"wealth"},n}return Object(i.c)(t,e),t.prototype.render=function(){this.props.item.id;var e=this.props.form.getFieldDecorator,t=this.props,n=t.visible,a=t.onCancel,r=null,o=0;switch(o=this.props.m_wealth?this.props.m_wealth:"不限",this.state.current){case"wealth":r=c.createElement(ss.a,{layout:"vertical"},c.createElement(As.a,{color:"blue"},"您今天在",this.props.boardName,"已经发了",this.props.d_wealth,"财富值，最多可发",o," （单次最多1000）"),c.createElement(Gs,{label:"财富值"},e("wealth",{rules:[{required:!0,message:"请输入财富值"}]})(c.createElement(Js.a,null))),c.createElement(Gs,{label:"理由"},e("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(ls.a,{mode:"tags",style:{width:120},onChange:this.handleChange},c.createElement(Qs,{value:"好文章"},"好文章"),c.createElement(Qs,{value:"有用资源"},"有用资源"),c.createElement(Qs,{value:"热心回复"},"热心回复")))));break;case"prestige":r=c.createElement(ss.a,{layout:"vertical"},c.createElement(Gs,{label:"威望"},e("prestige",{rules:[{required:!0,message:"请输入威望值"}]})(c.createElement(Js.a,null))),c.createElement(Gs,{label:"理由"},e("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(ls.a,{mode:"tags",style:{width:120},onChange:this.handleChange},c.createElement(Qs,{value:"好文章"},"好文章"),c.createElement(Qs,{value:"有用资源"},"有用资源"),c.createElement(Qs,{value:"热心回复"},"热心回复")))));break;case"punishwealth":r=c.createElement(ss.a,{layout:"vertical"},c.createElement(Gs,{label:"财富值"},e("wealth",{rules:[{required:!0,message:"请输入财富值"}]})(c.createElement(Js.a,null))),c.createElement(Gs,{label:"理由"},e("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(ls.a,{mode:"tags",style:{width:120},onChange:this.handleChange},c.createElement(Qs,{value:"人身攻击"},"人身攻击"),c.createElement(Qs,{value:"违反版规"},"违反版规"),c.createElement(Qs,{value:"恶意灌水"},"恶意灌水")))));break;case"punishprestige":r=c.createElement(ss.a,{layout:"vertical"},c.createElement(Gs,{label:"威望"},e("prestige",{rules:[{required:!0,message:"请输入威望值"}]})(c.createElement(Js.a,null))),c.createElement(Gs,{label:"理由"},e("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(ls.a,{mode:"tags",defaultValue:"人身攻击",style:{width:120},onChange:this.handleChange},c.createElement(Qs,{value:"人身攻击"},"人身攻击"),c.createElement(Qs,{value:"违反版规"},"违反版规"),c.createElement(Qs,{value:"恶意灌水"},"恶意灌水")))));break;case"delete":r=c.createElement(ss.a,{layout:"vertical"},c.createElement(Gs,{label:"理由"},e("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(cs.a,null))));break;case"canceltp":r=c.createElement("div",null,"解除此用户版面 tp");break;case"tp":r=c.createElement(ss.a,{layout:"vertical"},c.createElement(Gs,{label:"天数"},e("days",{rules:[{required:!0,message:"请输入tp天数"}]})(c.createElement(Js.a,null))),c.createElement(Gs,{label:"理由"},e("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(cs.a,null))))}return c.createElement(Ln.a,{visible:n,title:"发言管理",okText:"确认",cancelText:"取消",onOk:this.onCreate,onCancel:a,width:"50rem"},c.createElement(is.a,{onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal",style:{marginBottom:"2rem"}},c.createElement(is.a.Item,{key:"wealth"},"奖励财富值"),c.createElement(is.a.Item,{key:"prestige"},"奖励威望"),c.createElement(is.a.Item,{key:"punishwealth"},"扣除财富值"),c.createElement(is.a.Item,{key:"punishprestige"},"扣除威望"),c.createElement(is.a.Item,{key:"delete"},"删除"),c.createElement(is.a.Item,{key:"tp"},"TP"),c.createElement(is.a.Item,{key:"canceltp"},"解除TP")),r)},t}(c.Component)),Xs=ss.a.Item,Zs=ls.a.Option,ei=is.a.Item,ti=ss.a.create()(function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){n.setState({option:e})},n.onCreate=function(){var e="",t="";n.props.form.validateFields((function(a,r){return Object(i.b)(n,void 0,void 0,(function(){return Object(i.d)(this,(function(n){switch(n.label){case 0:if(a)return[2];switch(this.setState({loading:!0}),t=r.reason.toString(),this.state.current,this.state.current){case"1":return[3,1];case"2":return[3,3];case"0":return[3,5]}return[3,6];case 1:return[4,Nr(this.props.item.topicId,this.props.item.id,t)];case 2:case 4:return e=n.sent(),[3,6];case 3:return[4,Or(this.props.item.topicId,this.props.item.id,t)];case 5:return alert("请选择加风评还是扣风评。"),[3,6];case 6:return this.setState({loading:!1}),"ok"===e?(this.props.update(),this.props.onCancel()):"already"===e?alert("您今天已经评分过了，或者还未到500贴~"):"not allowed"===e?alert("您还没有资格评分~"):"rateself"===e&&alert("您不能给自己评分哦~"),[2]}}))}))}))},n.handleClick=function(e){n.setState({current:e.key})},n.state={current:"0",option:"",loading:!1},n}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.visible,n=e.onCancel,a=this.props.form.getFieldDecorator,r=c.createElement(ss.a,null,c.createElement(Xs,{label:"理由"},a("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(ls.a,{mode:"tags",style:{width:400},onChange:this.handleChange},c.createElement(Zs,{value:"所言极是"},"所言极是"),c.createElement(Zs,{value:"好人一生平安"},"好人一生平安"),c.createElement(Zs,{value:"非常求是"},"非常求是"))))),o=c.createElement(ss.a,null,c.createElement(Xs,{label:"理由"},a("reason",{rules:[{required:!0,message:"请输入理由"}]})(c.createElement(ls.a,{mode:"tags",style:{width:400},onChange:this.handleChange},c.createElement(Zs,{value:"太不求是"},"太不求是"),c.createElement(Zs,{value:"呵呵"},"呵呵"),c.createElement(Zs,{value:"被你暴击"},"被你暴击"))))),s="1"===this.state.current?r:o;return c.createElement(Ln.a,{visible:t,title:"评分",okText:"确认",cancelText:"取消",onOk:this.onCreate,onCancel:n,confirmLoading:this.state.loading},c.createElement(is.a,{onClick:this.handleClick,selectedKeys:[this.state.current],mode:"horizontal",style:{display:"flex",marginBottom:"1rem",justifyContent:"space-around"}},c.createElement(ei,{key:"1"},c.createElement("img",{style:{width:"2rem"},src:"/static/images/j-plus1.png"}),c.createElement("span",{style:{fontWeight:"bold",marginLeft:"10px",fontSize:"16px"}},"+1")),c.createElement(ei,{disabled:!0},"|"),c.createElement(ei,{key:"2"},c.createElement("img",{style:{width:"2rem"},src:"/static/images/j-minus1.png"}),c.createElement("span",{style:{fontWeight:"bold",marginLeft:"10px",fontSize:"16px"}},"-1"))),c.createElement(As.a,{color:"blue"},"500贴以上的用户可以进行评分（每日一次），超过7天的发言内容无法评分。"),s)},t}(c.Component)),ni=function(e){function t(t){var n=e.call(this,t)||this;return n.toggleImageState=function(){n.setState((function(e){return{showImageState:!e.showImageState}}))},n.showAllImg=function(){var e=document.getElementsByClassName("hiddenImage");for(var t in e){if(e.hasOwnProperty(t))e[t].click()}n.toggleImageState()},n.hideAllImg=function(){var e=document.getElementsByClassName("visibleImage");for(var t in e){if(e.hasOwnProperty(t))e[t].click()}n.toggleImageState()},n.follow=n.follow.bind(n),n.unFollow=n.unFollow.bind(n),n.state={tag1Name:"",tag2Name:"",isFollow:n.props.isFav,showImageState:!0,followCount:n.props.topicInfo.favoriteCount},n}return Object(i.c)(t,e),t.prototype.copyTopicUrl=function(e){var t="【".concat(e.boardInfo.name,"】").concat(e.topicInfo.title," https://www.cc98.org/topic/").concat(e.topicInfo.id," 复制本链接到浏览器或者打开【CC98】微信小程序查看~");(function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:if(!navigator.clipboard){t=document.createElement("textarea"),n=!1;try{t.value=e,Object.assign(t.style,{top:"-999",left:"-999",outerWidth:"0",outerHeight:"0",position:"fixed"}),document.body.appendChild(t),t.focus(),t.select(),n=document.execCommand("copy")}finally{t.remove()}if(n)return[2];throw new Error("Failed to run document.execCommand().")}return[4,navigator.clipboard.writeText(e)];case 1:return a.sent(),[2]}}))}))})(t).then((function(){fo("copySuccess")})).catch((function(e){fo("copyError"),console.error("Unable to copy text: ".concat(t),e)}))},t.prototype.follow=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return[4,Qr(this.props.topicInfo.id)];case 1:return e.sent(),this.setState({isFollow:!0,followCount:this.state.followCount+1}),[2]}}))}))},t.prototype.unFollow=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return[4,Kr(this.props.topicInfo.id)];case 1:return e.sent(),this.setState({isFollow:!1,followCount:this.state.followCount-1}),[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return e="",t="",this.props.tag1?[4,no(this.props.tag1)]:[3,2];case 1:e=n.sent(),n.label=2;case 2:return this.props.tag2?[4,no(this.props.tag2)]:[3,4];case 3:t=n.sent(),n.label=4;case 4:return this.setState({tag1Name:e,tag2Name:t}),[2]}}))}))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return t="",n="",e.tag1?[4,no(e.tag1)]:[3,2];case 1:t=a.sent(),a.label=2;case 2:return e.tag2?[4,no(e.tag2)]:[3,4];case 3:n=a.sent(),a.label=4;case 4:return this.setState({tag1Name:t,tag2Name:n}),[2]}}))}))},t.prototype.onError=function(e){e.preventDefault(),e.target.src="/static/images/_CC98协会.png"},t.prototype.render=function(){var e=this,t=this.props.topicInfo.title||"",n=("/static/images/_".concat(this.props.boardInfo.name,".png"),"/board/".concat(this.props.boardInfo.id)),a=null;(this.props.tag1||this.props.tag2)&&(a=c.createElement("div",{id:"tags"},c.createElement("div",{className:"tagProp tagSize"},"标签： ",this.state.tag1Name," ",this.state.tag2Name),c.createElement("div",{className:"tagProp"})));this.state.showImageState?c.createElement("div",{className:"followTopic",style:{width:"6rem"},onClick:this.hideAllImg},"收起所有图片"):c.createElement("div",{className:"followTopic",style:{width:"6rem"},onClick:this.showAllImg},"显示所有图片");return c.createElement("div",{className:"topicInfo-info"},c.createElement("div",{className:"topicInfo-title"},c.createElement("div",{className:"column",id:"topicTitleProp"},c.createElement("div",{id:"essay1",className:"row",title:t.length>65?t:void 0},t.length<=65?t:t.slice(0,65)+" ..."),c.createElement("div",{className:"row",id:"essayProp"},a,c.createElement("div",{id:"time"},c.createElement("div",{className:"viewProp"},c.createElement("i",{className:"fa fa-clock-o fa-lg fa-fw"}))," ",c.createElement("div",{className:"timeProp tagSize"},Rn(this.props.topicInfo.time).format("YYYY-MM-DD HH:mm:ss"))),c.createElement("div",{id:"viewtimes"},c.createElement("div",{className:"viewProp"},c.createElement("i",{className:"fa fa-eye fa-lg fa-fw"}),"  ")," ",c.createElement("div",{className:"timeProp tagSize"},this.props.topicInfo.hitCount)),c.createElement("div",{id:"followCount"},c.createElement("div",{className:"viewProp"},this.state.isFollow?c.createElement("i",{className:"fa fa-star fa-lg fa-fw"}):c.createElement("i",{className:"fa fa-star-o fa-lg fa-fw"})," ")," ",c.createElement("div",{className:"timeProp tagSize"},this.state.followCount)),c.createElement("div",{className:"followTopic",onClick:this.state.isFollow?this.unFollow:this.follow},this.state.isFollow?"已收藏":"收藏"),this.state.showImageState?c.createElement("div",{className:"followTopic",style:{width:"6rem"},onClick:this.hideAllImg},"收起所有图片"):c.createElement("div",{className:"followTopic",style:{width:"6rem"},onClick:this.showAllImg},"显示所有图片"),c.createElement("div",{className:"followTopic",style:{width:"6rem"},onClick:function(){return e.copyTopicUrl(e.props)}},"分享帖子链接"))),c.createElement("div",{className:"topicInfo-boardMessage"},c.createElement(vt.a,{to:n},c.createElement("div",{style:{color:"#6b7178"}},this.props.boardInfo.name)),c.createElement("div",{style:{marginTop:"0.5rem",fontSize:"0.75rem"}},this.props.boardInfo.todayCount," / ",this.props.boardInfo.topicCount))),c.createElement("div",{className:"topicInfo-ads"},c.createElement(xn,null)),c.createElement(Es,{text:"已将分享内容复制到剪贴板",id:"copySuccess",top:"13.7%",left:"45%"}),c.createElement(Es,{text:"将分享内容复制到剪贴板时出现错误",id:"copyError",top:"13.7%",left:"45%"}))},t}(c.Component),ai=c.createContext((function(e){})),ri=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.handleQuoteContextChange=function(e){a.setState({quote:e})},a.quote=a.quote.bind(a),a.shouldRender=a.shouldRender.bind(a),a.handleChange=a.handleChange.bind(a),a.state={page:1,topicId:a.match.params.topicId,totalPage:1,postId:a.match.params.postId,topicInfo:{replyCount:0},boardInfo:{masters:[],id:7},content:"",shouldRender:!1,isFav:!1,quote:""},a}return Object(i.c)(t,e),t.prototype.quote=function(e,t,n,a,r){$("#sendTopicInfo").offset().top,this.state.page;this.state.page;this.props.history.push("#sendTopicInfo"),this.setState({quote:{content:e,userName:t,replyTime:n,floor:a,postId:r}})},t.prototype.handleChange=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return this.match.params.userId,e=this.match.params.postId,[4,$r(this.match.params.topicId)];case 1:return t=r.sent(),n=this.match.params.page?parseInt(this.match.params.page):1,[4,this.getTotalPage(this.state.topicInfo.replyCount,e)];case 2:return a=r.sent(),this.setState({page:n,topicId:this.match.params.topicId,totalPage:a,topicInfo:t}),[2]}}))}))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return(t=e.match.params.page?parseInt(e.match.params.page):1)==this.match.params.page?[3,5]:(e.match.params.userId,n=e.match.params.postId,[4,$r(this.match.params.topicId)]);case 1:return a=i.sent(),[4,Wr(a.boardId)];case 2:return r=i.sent(),[4,Xr(e.match.params.topicId)];case 3:return o=i.sent(),[4,this.getTotalPage(this.match.params.topicId,n)];case 4:s=i.sent(),this.setState({page:t,topicId:e.match.params.topicId,totalPage:s,postId:e.match.params.postId,topicInfo:a,boardInfo:r,isFav:o}),i.label=5;case 5:return[2]}}))}))},t.prototype.shouldRender=function(e){e?this.setState({shouldRender:!0}):this.setState({shouldRender:!1})},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:return e=this.match.params.postId,t=this.match.params.page?parseInt(this.match.params.page):1,[4,$r(this.match.params.topicId)];case 1:return n=o.sent(),[4,Wr(n.boardId)];case 2:return a=o.sent(),[4,this.getTotalPage.bind(this)(this.match.params.topicId,e)];case 3:return r=o.sent(),this.setState({page:t,topicId:this.match.params.topicId,totalPage:r,topicInfo:n,boardInfo:a}),[2]}}))}))},t.prototype.getTotalPage=function(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,$r(e)];case 1:return n=a.sent(),n.isAnonymous?[4,tr(e,t)]:[3,3];case 2:case 4:return[2,a.sent()];case 3:return[4,tr(e,t)]}}))}))},t.prototype.render=function(){var e="/topic/".concat(this.match.params.topicId,"/postId/").concat(this.match.params.postId,"/");"/topic/".concat(this.state.topicId,"/");return c.createElement("div",{className:"center",style:{width:"1140px"}},c.createElement("div",{className:"row",style:{width:"100%",justifyContent:"space-between",alignItems:"center"}},c.createElement(Ls,{topicInfo:this.state.topicInfo,boardInfo:this.state.boardInfo,topicId:this.match.params.topicId}),c.createElement(cn,{page:this.state.page,url:e,totalPage:this.state.totalPage})),c.createElement(ni,{topicInfo:this.state.topicInfo,tag1:this.state.topicInfo.tag1,tag2:this.state.topicInfo.tag2,boardInfo:this.state.boardInfo,isFav:this.state.isFav}),c.createElement(ai.Provider,{value:this.handleQuoteContextChange},c.createElement(si,{topicInfo:this.state.topicInfo,boardInfo:this.state.boardInfo,page:this.state.page,postId:this.state.postId,quote:this.quote,isTrace:!0,isHot:!1,topicId:this.match.params.topicId})),c.createElement("div",{className:"row",style:{width:"100%",justifyContent:"space-between",alignItems:"center",marginTop:"1rem"}},c.createElement(Ls,{topicInfo:this.state.topicInfo,boardInfo:this.state.boardInfo,topicId:this.match.params.topicId}),c.createElement(cn,{page:this.state.page,url:e,totalPage:this.state.totalPage})),c.createElement(Ds,{onChange:this.handleChange,boardInfo:this.state.boardInfo,content:this.state.quote,topicInfo:this.state.topicInfo}))},t}(Jo),oi=Object(qo.a)(function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.showManageUI=function(){a.props.changePmVisible(!0,a.props.postInfo)},a.showJudgeUI=function(){a.props.changeJudgeVisible(!0,a.props.postInfo)},a.handlePosition=function(){a.props.page;a.props.page;a.props.history.push("#sendTopicInfo")},a.showManageUI=a.showManageUI.bind(a),a.showJudgeUI=a.showJudgeUI.bind(a),a.quote=a.quote.bind(a),a.edit=a.edit.bind(a),a.state={likeNumber:a.props.likeInfo.likeCount,dislikeNumber:a.props.likeInfo.dislikeCount,likeState:a.props.likeInfo.likeState},a}return Object(i.c)(t,e),t.prototype.quote=function(){this.props.quote(this.props.postInfo.content,this.props.userInfo.name,this.props.postInfo.time,this.props.postInfo.floor,this.props.postInfo.id)},t.prototype.edit=function(){},t.prototype.isAllowedtoEdit=function(e){return!!ua()&&("管理员"===ua().privilege||"管理员"!==e&&(!!qr(this.props.boardInfo.boardMasters)||void 0))},t.prototype.like=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return"#like".concat(this.props.postInfo.id),"#dislike".concat(this.props.postInfo.id),[4,Da(this.props.topicInfo.id,this.props.postInfo.id,this.context.router)];case 1:switch(e=n.sent(),e){case 200:return[3,2];case 401:return[3,4];case 403:return[3,5]}return[3,6];case 2:return[4,Za(this.props.topicInfo.id,this.props.postInfo.id)];case 3:return t=n.sent(),this.setState({likeNumber:t.likeCount,dislikeNumber:t.dislikeCount,likeState:t.likeState}),[3,6];case 4:return fo("notLogOn"),[3,6];case 5:return fo("tooFast"),[3,6];case 6:return[2]}}))}))},t.prototype.dislike=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return"#like".concat(this.props.postInfo.id),"#dislike".concat(this.props.postInfo.id),[4,La(this.props.topicInfo.id,this.props.postInfo.id,this.context.router)];case 1:switch(e=n.sent(),e){case 200:return[3,2];case 401:return[3,4];case 403:return[3,5]}return[3,6];case 2:return[4,Za(this.props.topicInfo.id,this.props.postInfo.id)];case 3:return t=n.sent(),this.setState({likeNumber:t.likeCount,dislikeNumber:t.dislikeCount,likeState:t.likeState}),[3,6];case 4:return fo("notLogOn"),[3,6];case 5:return fo("tooFast"),[3,6];case 6:return[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){return e="#icon".concat(this.props.postInfo.id),(qr(this.props.boardInfo.boardMasters)||144==this.props.boardInfo.id&&this.props.postInfo.isLZ)&&$(e).css("display",""),[2]}))}))},t.prototype.render=function(){var e=this,t="icon".concat(this.props.postInfo.id),n="like".concat(this.props.postInfo.id),a="dislike".concat(this.props.postInfo.id),r=c.createElement("div",{className:"signature"},c.createElement(tn,{isSignature:!0,code:this.props.userInfo.signatureCode,options:Object(i.a)(Object(i.a)({},new Ie),{allowExternalImage:!1,allowMarkDown:!1,maxImageCount:1})}));this.props.userInfo.signatureCode||(r=null);var o=null,s="/editor/edit/".concat(this.props.postInfo.id);ua()&&(this.isAllowedtoEdit(this.props.userInfo.privilege)||this.props.postInfo.isMe)&&(o=c.createElement(vt.a,{to:s},c.createElement("div",{className:"operation1",onClick:this.edit},"   编辑")));var l=null;if(this.props.postInfo.lastUpdateAuthor&&this.props.postInfo.lastUpdateTime){var u=Rn(this.props.postInfo.lastUpdateTime).format("YYYY-MM-DD HH:mm:ss"),m=this.props.userInfo.name===this.props.postInfo.lastUpdateAuthor?"作者":this.props.postInfo.lastUpdateAuthor;l="该帖最后由 ".concat(m," 在 ").concat(u," 编辑")}var p="/topic/".concat(this.props.topicInfo.id),d="/topic/".concat(this.props.topicInfo.id,"/postid/").concat(this.props.postInfo.id),h=c.createElement("div",{className:"operation1"},c.createElement(vt.a,{to:this.props.traceMode?p:d},this.props.traceMode?"返回":"追踪")),f=null;(1==qr(this.props.boardInfo.boardMasters)||144===this.props.boardInfo.id&&ua()&&ua().name===this.props.topicInfo.userName)&&(f=c.createElement("div",{className:"operation1",id:t,style:{cursor:"pointer"},onClick:this.showManageUI},"管理"));var g=c.createElement("div",{className:"operation1",onClick:this.showJudgeUI},"   评分");return c.createElement("div",{className:"column",style:{marginTop:"1rem",width:"52rem",marginBottom:"0.5rem"}},c.createElement("div",{className:"comment1"},c.createElement("div",{style:{width:"40rem",marginLeft:"1.2rem",fontSize:"0.8rem"}},c.createElement("span",null,"发表于 ",Rn(this.props.postInfo.time).format("YYYY-MM-DD HH:mm:ss")),c.createElement("span",{style:{marginLeft:"1rem"}},l)),c.createElement("div",{className:"row",style:{alignItems:"center"}},c.createElement("div",{id:n,className:1===this.state.likeState?"upup red-color":"upup",style:{marginRight:"0.7rem"},onClick:this.like.bind(this)},c.createElement("i",{title:"赞",className:1===this.state.likeState?"fa fa-thumbs-up fa-lg":"fa fa-thumbs-o-up fa-lg"}),c.createElement("span",{className:"commentProp"}," ",this.state.likeNumber)),c.createElement("div",{id:a,className:2===this.state.likeState?"downdown red-color":"downdown",onClick:this.dislike.bind(this)},c.createElement("i",{title:"踩",className:2===this.state.likeState?"fa fa-thumbs-down fa-lg":"fa fa-thumbs-o-down fa-lg"}),c.createElement("span",{className:"commentProp"}," ",this.state.dislikeNumber)),c.createElement("div",{id:"commentlike"},g,-1===window.location.pathname.indexOf("postid")?c.createElement(ci.Consumer,null,(function(t){return c.createElement("div",{className:"operation1",onClick:function(){t({content:e.props.postInfo.content,userName:e.props.userInfo.name,replyTime:e.props.postInfo.time,floor:e.props.postInfo.floor,postId:e.props.postInfo.id}),e.handlePosition()}},"   引用")})):c.createElement(ai.Consumer,null,(function(t){return c.createElement("div",{className:"operation1",onClick:function(){t({content:e.props.postInfo.content,userName:e.props.userInfo.name,replyTime:e.props.postInfo.time,floor:e.props.postInfo.floor,postId:e.props.postInfo.id}),e.handlePosition()}},"   引用")})),h,o,f))),c.createElement("div",{className:"row",style:{width:"100%",justifyContent:"center"}},"  ",r),c.createElement(Es,{text:"你的操作太快了，慢慢来。",id:"tooFast",top:"33%",left:"40%"}),c.createElement(Es,{text:"未登录或者登录状态异常，请先登录。",id:"notLogOn",top:"33%",left:"40%"}))},t}(c.Component)),si=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.showPm=function(e,t){a.setState({pmVisible:e,item:t})},a.showJudge=function(e,t){a.setState({judgeVisible:e,item:t})},a.handleCancel=function(){a.setState({pmVisible:!1})},a.handleJudgeCancel=function(){a.setState({judgeVisible:!1})},a.update=a.update.bind(a),a.quote=a.quote.bind(a),a.state={inWaiting:!0,contents:[],masters:[],boardName:"",m_wealth:2e4,d_wealth:0,pmVisible:!1,item:{},judgeVisible:!1},a}return Object(i.c)(t,e),t.prototype.quote=function(e,t,n,a,r){this.props.quote(e,t,n,a,r)},t.prototype.update=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return e=this.props.page||1,this.props.isHot?[4,Fa(this.props.topicId)]:[3,2];case 1:return t=a.sent(),[3,6];case 2:return this.props.isTrace?[4,Ba(this.props.topicId,e,this.props.postId)]:[3,4];case 3:return t=a.sent(),[3,6];case 4:return[4,Ra(this.props.topicId,e)];case 5:t=a.sent(),a.label=6;case 6:return n={rewardMaxValue:0,rewardTotalValue:0,boardName:this.props.boardInfo.name},qr(this.props.boardInfo.boardMasters)?[4,No(this.props.boardInfo.id)]:[3,8];case 7:n=a.sent(),a.label=8;case 8:return this.setState({m_wealth:n.rewardMaxValue,d_wealth:n.rewardTotalValue,boardName:n.boardName,contents:t}),[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return e=this.props.page||1,this.props.isHot?[4,Fa(this.props.topicId)]:[3,2];case 1:return(t=r.sent())||this.setState({inWaiting:!1,contents:[]}),[3,6];case 2:return this.props.isTrace?[3,4]:[4,Ra(this.props.topicId,e)];case 3:return(t=r.sent())||this.setState({inWaiting:!1,contents:[]}),[3,6];case 4:return[4,nr(this.props.topicId,this.props.postId,e)];case 5:t=r.sent(),r.label=6;case 6:return n=this.props.boardInfo.boardMasters,a={rewardMaxValue:2e4,rewardTotalValue:0,boardName:this.props.boardInfo.name},qr(this.props.boardInfo.boardMasters)?[4,No(this.props.boardInfo.id)]:[3,8];case 7:a=r.sent(),r.label=8;case 8:return this.setState({m_wealth:a.rewardMaxValue,d_wealth:a.rewardTotalValue,boardName:a.boardName,inWaiting:!1,contents:t,masters:n}),[2]}}))}))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return this.props.page,e.page,e.page===this.props.page&&e.topicInfo.replyCount===this.props.topicInfo.replyCount?[3,7]:(this.setState({inWaiting:!0}),t=e.page||1,n=void 0,e.isHot?[4,Fa(e.topicId)]:[3,2]);case 1:return(n=a.sent())||this.setState({inWaiting:!1,contents:[]}),[3,6];case 2:return e.isTrace?[4,nr(this.props.topicId,this.props.postId,t)]:[3,4];case 3:return n=a.sent(),[3,6];case 4:return[4,Ra(e.topicId,t)];case 5:(n=a.sent())||this.setState({inWaiting:!1,contents:[]}),a.label=6;case 6:this.setState({inWaiting:!1,contents:n}),a.label=7;case 7:return[2]}}))}))},t.prototype.generateContents=function(e,n){var a=e.floor%10,r=a.toString(),o={likeCount:e.likeCount,dislikeCount:e.dislikeCount,likeState:e.likeState},s=null,i=c.createElement(qs,{key:Date.now(),postId:e.postId,updateTime:Date.now(),awardInfo:e.awards});return e.awards&&0!==e.awards.length||(i=null),1!==e.floor||this.props.isTrace?(this.props.isHot&&(r="hot_".concat(a)),c.createElement("div",{className:"reply",key:r,id:r},c.createElement(Fs,{key:e.postId,isAnonymous:e.isAnonymous,topicInfo:this.props.topicInfo,userInfo:e.userInfo,traceMode:!!this.props.isTrace,isHot:!!this.props.isHot}),c.createElement("div",{className:"column",style:{justifyContent:"space-between",width:"55.5rem",position:"relative"}},c.createElement(Hs,{floor:e.floor,topicInfo:this.props.topicInfo,key:e.content,postId:e.postId,content:e.content,contentType:e.contentType}),i,c.createElement(oi,{userInfo:e.userInfo,quote:this.quote,boardInfo:this.props.boardInfo,postInfo:e,likeInfo:o,traceMode:!!this.props.isTrace,topicInfo:this.props.topicInfo,changePmVisible:this.showPm,changeJudgeVisible:this.showJudge,page:this.props.page})),c.createElement("div",{style:{display:"flex",flexDirection:"column"}},c.createElement(ii,{isHot:this.props.isHot,floor:e.floor}),e.isLZ&&c.createElement(ii,{isHot:!1,floor:-1})))):(s=c.createElement(t,{topicInfo:this.props.topicInfo,page:this.props.page,boardInfo:this.props.boardInfo,quote:this.quote,isTrace:!1,isHot:!0,postId:null,topicId:this.props.topicId}),c.createElement("div",{key:r,style:{display:"flex",flexDirection:"column",width:"100%"}},c.createElement("div",{className:"reply",id:a.toString()},c.createElement(Fs,{key:e.postId,isAnonymous:e.isAnonymous,topicInfo:this.props.topicInfo,userInfo:e.userInfo,traceMode:!!this.props.isTrace,isHot:!!this.props.isHot}),c.createElement("div",{className:"column",style:{justifyContent:"space-between",width:"55.5rem",position:"relative"}},c.createElement(Hs,{floor:e.floor,topicInfo:this.props.topicInfo,key:e.content,postId:e.postId,content:e.content,contentType:e.contentType}),i,c.createElement(oi,{userInfo:e.userInfo,quote:this.quote,boardInfo:this.props.boardInfo,postInfo:e,likeInfo:o,traceMode:!!this.props.isTrace,topicInfo:this.props.topicInfo,changePmVisible:this.showPm,changeJudgeVisible:this.showJudge})),c.createElement(ii,{isHot:this.props.isHot,floor:e.floor})),s))},t.prototype.componentDidUpdate=function(){if(window.location.hash&&"#"!==window.location.hash){var e=window.location.hash.split("#")[1];if("10"===e&&(e="0"),document.getElementById(e)){var t=document.getElementById(e).offsetTop,n=document.getElementById(e).clientHeight,a=(window.innerHeight-n)/2;ve(document).scrollTop(t-a)}}},t.prototype.render=function(){var e=null;return ua()&&(e=ua().privilege),this.props.isHot&&this.state.inWaiting?null:this.state.inWaiting?c.createElement(An.a,{style:{marginTop:"4rem"},size:"large"}):this.state.contents&&this.state.contents.length?c.createElement("div",{className:"center",style:{width:"71rem",marginRight:"1px"}},this.state.contents.map(this.generateContents.bind(this)),this.state.pmVisible&&c.createElement(Ks,{m_wealth:this.state.m_wealth,d_wealth:this.state.d_wealth,boardName:this.state.boardName,update:this.update,privilege:e,boardId:this.props.boardInfo.id,item:this.state.item,visible:this.state.pmVisible,onCancel:this.handleCancel}),c.createElement(ti,{item:this.state.item,update:this.update,onCancel:this.handleJudgeCancel,visible:this.state.judgeVisible})):c.createElement("div",null)},t}(c.Component),ii=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return this.props.isHot?c.createElement("div",{style:{backgroundColor:"#FF4040"},className:"reply-floor"},c.createElement("img",{style:{width:"20px",height:"30px"},src:"/static/images/hot.png"})):this.props.floor>9999?c.createElement("div",{className:"reply-floor-small"},this.props.floor):this.props.floor<0?c.createElement("div",{className:"reply-floor-lz"},"楼主"):c.createElement("div",{className:"reply-floor"},this.props.floor)},t}(c.Component),ci=c.createContext((function(e){})),li=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.handleQuoteContextChange=function(e){a.setState({quote:e})},a.update=a.update.bind(a),a.handleChange=a.handleChange.bind(a),a.quote=a.quote.bind(a),a.state={page:1,shouldRender:!0,topicid:a.match.params.topicid,totalPage:1,userName:null,boardId:7,topicInfo:{replyCount:0},boardInfo:{masters:[],id:7},fetchState:"ok",quote:"",isFav:!1,IPData:[]},a}return Object(i.c)(t,e),t.prototype.quote=function(e,t,n,a,r){ve("#sendTopicInfo").offset().top;var o=this.state.page;this.state.page||(o=1);var s="/topic/".concat(this.state.topicid,"/").concat(o,"#sendTopicInfo");this.props.history.push(s),this.setState({quote:{content:e,userName:t,replyTime:n,floor:a,postId:r}})},t.prototype.update=function(){this.setState({})},t.prototype.handleChange=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return e=this.match.params.page?parseInt(this.match.params.page):1,[4,$r(this.match.params.topicid)];case 1:return t=i.sent(),this.setState({topicInfo:t}),n=(t.replyCount+1)%10==0?(t.replyCount+1)/10:(t.replyCount+1-(t.replyCount+1)%10)/10+1,[4,this.getTotalPage(t.replyCount)];case 2:return i.sent(),this.match.params.userName,a=(t.replyCount+1)%10,r=pa("noticeSetting"),e!=n?r&&"是"===r.post||n==e+1&&1==a?((e=n)||(e=1),s="/topic/".concat(t.id,"/").concat(e,"#").concat(a),this.setState({quote:{userName:"",content:"",replyTime:"",floor:""}},this.props.history.push(s))):(s="/topic/".concat(t.id,"/").concat(e),this.state.quote&&this.state.quote.floor&&(o=this.state.quote.floor%10,e||(e=1),s="/topic/".concat(t.id,"/").concat(e,"#").concat(o),this.setState({quote:{userName:"",content:"",replyTime:"",floor:""}},this.props.history.push(s)))):((e=n)||(e=1),s="/topic/".concat(t.id,"/").concat(e,"#").concat(a),this.setState({quote:{userName:"",content:"",replyTime:"",floor:""}},this.props.history.push(s))),fo("replyMessage"),[2]}}))}))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u;return Object(i.d)(this,(function(i){switch(i.label){case 0:return t=e.match.params.page?parseInt(e.match.params.page):1,n=e.match.params.userName,[4,$r(e.match.params.topicid)];case 1:return a=i.sent(),[4,Wr(r=a.boardId)];case 2:return o=i.sent(),s=this.getTotalPage(a.replyCount),c=(a.replyCount+1)%10,t>s&&(t=s,l="/topic/".concat(a.id,"/").concat(t,"#").concat(c),this.props.history.push(l)),[4,Xr(e.match.params.topicid)];case 3:return u=i.sent(),this.setState({page:t,topicid:e.match.params.topicid,totalPage:s,userName:n,boardId:r,topicInfo:a,boardInfo:o,isFav:u}),[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s,c,l,u;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,gr()];case 1:return i.sent(),e=this.match.params.page?parseInt(this.match.params.page):1,t=this.match.params.userName,[4,$r(this.match.params.topicid)];case 2:return n=i.sent(),[4,Wr(a=n.boardId)];case 3:return r=i.sent(),o=this.getTotalPage(n.replyCount),s=(n.replyCount+1)%10,e>o&&(e=o,c="/topic/".concat(n.id,"/").concat(e,"#").concat(s),this.props.history.push(c)),[4,Xr(this.match.params.topicid)];case 4:return l=i.sent(),u=[],this.setState({isFav:l,page:e,topicid:this.match.params.topicid,totalPage:o,userName:t,boardId:a,topicInfo:n,boardInfo:r,fetchState:n,IPData:u}),[2]}}))}))},t.prototype.getTotalPage=function(e){return Yr(e)},t.prototype.render=function(){switch(this.state.quote,this.state.fetchState){case"ok":return c.createElement("div",null);case"not found":return c.createElement(gn,null);case"unauthorized":return c.createElement(dn,null);case"server error":return c.createElement(yn,null)}var e;e=c.createElement(ni,{topicInfo:this.state.topicInfo,tag1:this.state.topicInfo.tag1,tag2:this.state.topicInfo.tag2,boardInfo:this.state.boardInfo,isFav:this.state.isFav}),1!==parseInt(this.match.params.page)&&this.match.params.page||c.createElement(si,{topicInfo:this.state.topicInfo,page:this.match.params.page,boardInfo:this.state.boardInfo,quote:this.quote,isTrace:!1,isHot:!0,postId:null,topicId:this.match.params.topicid});var t="/topic/".concat(this.state.topicid,"/"),n=null;n=ua()?c.createElement(Ds,{onChange:this.handleChange,boardInfo:this.state.boardInfo,content:this.state.quote,topicInfo:this.state.topicInfo}):c.createElement("div",null,"您还未登录，无法发言，请先登录。"),ua()&&!ua().isVerified&&(n=c.createElement("div",null,"您的帐号未认证，无法发言，请先前往 ",c.createElement("a",{href:"https://account.cc98.org"},"https://account.cc98.org")," 认证激活。")),ua()&&0!==ua().lockState&&(n=c.createElement("div",null,"您的帐号被全站禁言。"));var a=null;return this.state.topicInfo&&1===this.state.topicInfo.state&&(a=c.createElement("div",{style:{color:"red",margin:"0.5rem"}},"该帖已被锁定")),c.createElement("div",{className:"center"},c.createElement(an,{title:"".concat(this.state.topicInfo.title||"帖子"," - CC98论坛")}),c.createElement("div",{className:"column",style:{width:"100%"}},c.createElement("div",{className:"row",style:{width:"100%",justifyContent:"space-between",alignItems:"center"}},c.createElement(Ls,{topicInfo:this.state.topicInfo,boardInfo:this.state.boardInfo,topicId:this.match.params.topicid}),c.createElement(cn,{page:this.state.page,url:t,totalPage:this.state.totalPage})),a),e,c.createElement(ci.Provider,{value:this.handleQuoteContextChange},c.createElement(si,{topicInfo:this.state.topicInfo,page:this.state.page,boardInfo:this.state.boardInfo,quote:this.quote,isHot:!1,isTrace:!1,postId:null,topicId:this.match.params.topicid})),c.createElement("div",{className:"column",style:{width:"100%"}},c.createElement("div",{className:"row",style:{width:"100%",justifyContent:"space-between",marginTop:"2rem"}},c.createElement(Ls,{topicInfo:this.state.topicInfo,boardInfo:this.state.boardInfo,topicId:this.match.params.topicid}),c.createElement(cn,{page:this.state.page,url:t,totalPage:this.state.totalPage}))),n,c.createElement(Es,{text:"回复成功",id:"replyMessage",top:"24%",left:"46%"}))},t}(Jo),ui=Object(qo.a)(li),mi=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:new Array},n}return Object(i.c)(t,e),t.prototype.getData=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return[4,ga("/Board/all")];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},t.prototype.createBoardInfoJson=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s,c,l;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,this.getData()];case 1:for(e=i.sent(),t=[],n=0,a=e;n<a.length;n++)for(r=a[n],o=0,s=r.boards;o<s.length;o++)c=s[o],l={id:c.id,name:c.name},t.push(l);return[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,this.getData()];case 1:return e=t.sent(),this.setState({data:e}),[2]}}))}))},t.prototype.scroll=function(e){document.getElementById(e).scrollIntoView()},t.prototype.generateRootBoard=function(e){return c.createElement(pi,{key:e.id,data:e})},t.prototype.generateBoardGuide=function(e){var t=this,n="".concat(e.name);return c.createElement("div",{key:e.id,onClick:function(){return t.scroll(n)},className:"row boardOption"},e.name)},t.prototype.render=function(){return c.createElement("div",{className:"row",style:{width:"1140px"}},c.createElement(an,{title:"版面列表 - CC98论坛"}),c.createElement("div",{className:"boardList"},this.state.data.map(this.generateRootBoard)),c.createElement("div",{className:"boardGuide"},this.state.data.map(this.generateBoardGuide.bind(this))))},t}(c.Component),pi=function(e){function t(t){var n=e.call(this,t)||this;n.props.data;return n.state={isExpanded:!0},n.toggleIsExpanded=n.toggleIsExpanded.bind(n),n}return Object(i.c)(t,e),t.prototype.toggleIsExpanded=function(){this.setState((function(e){return{isExpanded:!e.isExpanded}}))},t.prototype.convertMasters=function(e,t,n){var a=n.length,r="/user/name/".concat(encodeURIComponent(e));return t===a-1?c.createElement(vt.a,{key:t,to:r},e):c.createElement("div",{key:t,style:{marginRight:"1rem"}},c.createElement(vt.a,{to:r},e))},t.prototype.render=function(){var e=this.state.isExpanded?"flex":"none",t=this.state.isExpanded?"收起":"展开",n=this.props.data,a=("/board/".concat(n.id),n.masters,n.masters.length?"主管：":"");return c.createElement("div",{className:"anArea",id:n.name},c.createElement("div",{className:"column",style:{border:"2px solid #e9e9e9"}},c.createElement("div",{className:"row boardListHead",onClick:this.toggleIsExpanded},c.createElement("div",{className:"row",style:{marginRight:"1rem",alignItems:"center"}},c.createElement("div",{className:"areaName"},n.name),c.createElement("div",{className:"areaName"},a,n.masters.map(this.convertMasters))),c.createElement("div",{className:"expendBoardList"}," ",t)),c.createElement("div",{className:"hiddenContent",style:{display:e}},c.createElement(di,{id:n.id,boards:n.boards}))))},t}(c.Component),di=function(e){function t(t){var n=e.call(this,t)||this;return n.state={thisBoardState:[]},n}return Object(i.c)(t,e),t.prototype.onError=function(e){e.preventDefault(),e.target.src="/static/images/_CC98.png"},t.prototype.convertChildBoard=function(e){var t="/static/images/_".concat(e.name,".png");return c.createElement("div",{key:e.id,className:"boardContent"},c.createElement(vt.a,{to:"/board/".concat(e.id)},c.createElement("div",{className:"greenBackdrop"},c.createElement("img",{style:{width:"6rem",height:"6rem"},src:t,onError:this.onError}))),c.createElement("div",{className:"column boardBlock"},c.createElement(vt.a,{to:"/board/".concat(e.id)},c.createElement("div",{className:"boardName2",style:{fontSize:"1.2rem",fontWeight:"bold"}},e.name)),c.createElement("div",{className:"boardInfo"},c.createElement("div",{className:"row"},"今日 ",e.todayCount," "),c.createElement("div",{className:"row"},"总数 ",e.postCount))))},t.prototype.convertNoImgChildBoard=function(e){return c.createElement("div",{key:e.id,className:"noImgBoardContent"},c.createElement(vt.a,{to:"/board/".concat(e.id)},c.createElement("div",{className:"boardName2"},e.name)))},t.prototype.render=function(){var e=[],t=0;return this.props.boards&&this.props.id&&(e=this.props.boards,t=this.props.id),2===t||29===t||35===t||37===t||33===t||604===t?c.createElement("div",{className:"areaContent"},e.map(this.convertNoImgChildBoard)):c.createElement("div",{className:"areaContent"},e.map(this.convertChildBoard.bind(this)))},t}(c.Component),hi=n(1273),fi=function(e){function t(t){var n=e.call(this,t)||this;return n.state={buttonClassName:""},n.handleScroll=n.handleScroll.bind(n),n}return Object(i.c)(t,e),t.prototype.handleScroll=function(e){window.pageYOffset>234&&this.setState({buttonClassName:"btn-show"}),window.pageYOffset<234&&this.setState((function(e){return{buttonClassName:""===e.buttonClassName?"":"btn-disappare"}}))},t.prototype.componentDidMount=function(){document.addEventListener("scroll",this.handleScroll)},t.prototype.componentWillUnmount=function(){document.removeEventListener("scroll",this.handleScroll)},t.prototype.scrollToTop=function(){ve("body,html").animate({scrollTop:0},500)},t.prototype.render=function(){return c.createElement("div",{className:"user-center-navigation",id:"userCenterNavigation"},c.createElement("ul",null,c.createElement("li",null,c.createElement(hi.a,{to:"/usercenter",exact:!0,activeClassName:"user-center-navigation-active",className:"fa-home"},c.createElement("div",{className:"center-nav-item"},"个人主页"))),c.createElement("hr",null),c.createElement("li",null,c.createElement(hi.a,{to:"/usercenter/config",activeClassName:"user-center-navigation-active",className:"fa-cog"},c.createElement("div",{className:"center-nav-item"},"修改资料"))),c.createElement("hr",null),c.createElement("li",null,c.createElement(hi.a,{to:"/usercenter/mytopics",activeClassName:"user-center-navigation-active",className:"fa-pencil-square-o"},c.createElement("div",{className:"center-nav-item"},"我的主题"))),c.createElement("hr",null),c.createElement("li",null,c.createElement(hi.a,{to:"/usercenter/myposts",activeClassName:"user-center-navigation-active",className:"fa-mail-reply"},c.createElement("div",{className:"center-nav-item"},"我的回复"))),c.createElement("hr",null),c.createElement("li",null,c.createElement(hi.a,{to:"/usercenter/myfavorites",activeClassName:"user-center-navigation-active",className:"fa-star"},c.createElement("div",{className:"center-nav-item"},"我的收藏"))),c.createElement("hr",null),c.createElement("li",null,c.createElement(hi.a,{to:"/usercenter/mycustomboards",activeClassName:"user-center-navigation-active",className:"fa-rss"},c.createElement("div",{className:"center-nav-item"},"关注版面"))),c.createElement("hr",null),c.createElement("li",null,c.createElement(hi.a,{to:"/usercenter/myfollowings",activeClassName:"user-center-navigation-active",className:"fa-heart"},c.createElement("div",{className:"center-nav-item"},"关注用户"))),c.createElement("hr",null),c.createElement("li",null,c.createElement(hi.a,{to:"/usercenter/myfans",activeClassName:"user-center-navigation-active",className:"fa-users"},c.createElement("div",{className:"center-nav-item"},"我的粉丝"))),c.createElement("hr",null),c.createElement("li",null,c.createElement(hi.a,{to:"/usercenter/transferwealth",activeClassName:"user-center-navigation-active",className:"fa-credit-card"},c.createElement("div",{className:"center-nav-item"},"转账系统"))),c.createElement("hr",null),c.createElement("li",null,c.createElement(hi.a,{to:"/usercenter/theme",activeClassName:"user-center-navigation-active",className:"fa-magic"},c.createElement("div",{className:"center-nav-item"},"切换皮肤")))),c.createElement("button",{type:"button",id:"scrollToTop",className:this.state.buttonClassName,onClick:this.scrollToTop},c.createElement("div",{className:"top-button-text"},"回到顶部")))},t}(c.Component),gi=n(1281),bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.getPrivilegeColor=function(){switch(this.props.userInfo.privilege){case"注册用户":return"grey";case"超级版主":return"pink";case"全站贵宾":return"blue";case"管理员":return"red"}},t.prototype.render=function(){var e=!1;if(this.props.userInfo.birthday){var t=this.props.userInfo.birthday.match(/\d+-(\d+)-(\d+)/),n=new Date;Number.parseInt(t[1])===n.getMonth()+1&&Number.parseInt(t[2])===n.getDate()&&(e=!0)}return c.createElement("div",{className:"user-profile"},c.createElement("div",{id:"userId"},c.createElement("p",null,this.props.userInfo.name,c.createElement("span",{style:{fontSize:"12px",color:this.getPrivilegeColor(),marginLeft:"2rem"}},this.props.userInfo.privilege)),c.createElement("div",{className:"row",style:{marginRight:"2rem"}},c.createElement(As.a,{color:"grey",style:{width:"5rem",textAlign:"center",marginRight:0,height:"2rem",borderTopRightRadius:0,borderBottomRightRadius:0,fontSize:16,lineHeight:"2rem"}},"收到的赞"),c.createElement(As.a,{className:"board-head-information",style:{width:"5rem",height:"2rem",textAlign:"center",marginRight:0,borderLeft:0,borderTopLeftRadius:0,borderBottomLeftRadius:0,fontSize:16,lineHeight:"2rem"}},this.props.userInfo.receivedLikeCount)),c.createElement(vt.a,{to:"/message/message"},c.createElement("button",{type:"button"},"私信"))),c.createElement("div",{id:"userIntroducion"},this.props.userInfo.introduction),c.createElement("div",{id:"userGenderAndBirthday"},c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"性别"),1===this.props.userInfo.gender?"男":"女"," "),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"发帖数"),this.props.userInfo.postCount),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"财富值"),this.props.userInfo.wealth),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"粉丝数"),this.props.userInfo.fanCount),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"威望"),this.props.userInfo.prestige),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"风评"),this.props.userInfo.popularity),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"注册时间"),this.props.userInfo.registerTime.replace("T"," ")),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"最后登录"),this.props.userInfo.lastLogOnTime.replace("T"," ")),null===this.props.userInfo.birthday?null:c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"生日"),this.props.userInfo.birthday.slice(0,this.props.userInfo.birthday.indexOf("T")).replace("9999-",""),e?c.createElement("span",{style:{fontFamily:"FontAwesome",marginLeft:"1rem"},className:"fa-birthday-cake",title:"生日快乐~"}):null),this.props.userInfo.displayTitle?c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"用户组"),this.props.userInfo.displayTitle):null,this.props.userInfo.emailAddress?c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"邮箱"),this.props.userInfo.emailAddress):null,this.props.userInfo.qq?c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"QQ"),this.props.userInfo.qq):null,c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"被删帖数"),-this.props.userInfo.deleteCount)),this.props.userInfo.signatureCode?c.createElement("div",{className:"user-description"},c.createElement("p",null,"个性签名"),c.createElement(tn,{code:this.props.userInfo.signatureCode,options:Object(i.a)(Object(i.a)({},new Ie),{allowExternalImage:!1})})):null)},t}(c.Component),vi=bi,yi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"user-post"},c.createElement("div",{className:"user-post-info"},c.createElement(vt.a,{className:"user-post-board",to:"/board/".concat(this.props.userRecentTopic.boardId)},this.props.userRecentTopic.boardName),c.createElement("a",{className:"user-post-date"},this.props.userRecentTopic.time.slice(0,19).replace("T"," "))),c.createElement("div",{className:"user-post-content"},c.createElement("p",null,c.createElement(vt.a,{to:"/topic/".concat(this.props.userRecentTopic.id)},this.props.userRecentTopic.title))))},t}(c.Component),Ei=yi,Ii=function(e){return function(t,n){return Object(i.b)(void 0,void 0,void 0,(function(){var a,r,o,s,c,l,u,m,p,d,h;return Object(i.d)(this,(function(i){switch(i.label){case 0:for(i.trys.push([0,7,,8]),t(G()),a=n().userInfo.recentTopics,r=n().userInfo.hasTotal.mytopics,o=a.length<10*(e-1)+1&&!r,s=10*(e-1);s<Math.min(a.length,10*e);s++)if(!a[s]){o=!0;break}return o?(c="/me/recent-topic?from=".concat(10*(e-1),"&size=11"),[4,fa()]):[2,t(Q())];case 1:return l=i.sent(),[4,ga(c,{headers:l})];case 2:if(200!==(u=i.sent()).status)throw new Error(u.statusText);return[4,u.json()];case 3:m=i.sent(),p=11===m.length?10:m.length,11!==m.length&&t(X(e)),i.label=4;case 4:return p--?(d=m[p],[4,$a(m[p].boardId)]):[3,6];case 5:return d.boardName=i.sent(),a[10*(e-1)+p]=m[p],[3,4];case 6:return t(ae(a)),[2,t(Q())];case 7:return h=i.sent(),[2,t(te(h.message))];case 8:return[2]}}))}))}},Ci=function(){return function(e){return Object(i.b)(void 0,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,fa()];case 1:return[4,ga("/me",{headers:r.sent()})];case 2:if(200!==(t=r.sent()).status)throw new Error(t.statusText);return[4,t.json()];case 3:return n=r.sent(),[2,e(Z(n))];case 4:return a=r.sent(),[2,e(te(a.message))];case 5:return[2]}}))}))}},wi=function(e,t,n){return function(a,r){return Object(i.b)(void 0,void 0,void 0,(function(){var o,s,c,l,u,m;return Object(i.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),a(G()),a(pe([])),[4,fa()];case 1:return(o=i.sent()).append("Content-Type","application/json"),"/me/transfer-wealth",s={userNames:e,wealth:t,reason:n},[4,ga("/me/transfer-wealth",{method:"PUT",headers:o,body:JSON.stringify(s)})];case 2:if(!(c=i.sent()).ok)throw new Error(c.statusText);return[4,c.json()];case 3:return l=i.sent(),(u=r().userInfo.currentUserInfo).wealth-=l.length*t,a(Z(u)),a(pe(l)),[2,a(Q())];case 4:return m=i.sent(),a(Q()),[2,a(te(m.message))];case 5:return[2]}}))}))}},Ni=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._page=1,t.scrollHandler=function(e){return Object(i.b)(t,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return document.body.scrollHeight-window.pageYOffset<1500&&!1===this.props.isLoading&&this.props.getInfo(this.page),[2]}))}))},t}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"page",{get:function(){return this._page++},enumerable:!1,configurable:!0}),t.prototype.componentWillMount=function(){for(var e=!this.props.hasTotal,t=0;t<this.props.userRecentTopics.length;t++)if(!this.props.userRecentTopics[t]){this.props.clearPosts(),e=!0;break}e&&(this.props.getInfo(this.page),window.addEventListener("scroll",this.scrollHandler))},t.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.scrollHandler)},t.prototype.componentWillReceiveProps=function(e){e.hasTotal&&window.removeEventListener("scroll",this.scrollHandler)},t.prototype.render=function(){if(0===this.props.userRecentTopics.length&&this.props.hasTotal)return c.createElement("div",{className:"user-posts",style:{marginLeft:"2rem"}},"没有主题");for(var e=this.props.userRecentTopics.map((function(e){return c.createElement(Ei,{key:e.id,userRecentTopic:e})})),t=1;t<e.length;t+=2)e.splice(t,0,c.createElement("hr",{key:t}));return c.createElement("div",{className:"user-posts"},e,this.props.isLoading?c.createElement("div",{className:"user-center-loading"},c.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"})):null)},t}(c.Component);var Oi=Object(Ia.b)((function(e){return{userRecentTopics:e.userInfo.recentTopics,hasTotal:e.userInfo.hasTotal.mytopics,isLoading:e.userInfo.isLoading}}),(function(e){return{getInfo:function(t){e(Ii(t))},clearPosts:function(){e(ae([])),e(q())}}}))(Ni),ji=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"user-activities"},c.createElement("p",null,"发表的主题"),c.createElement(Oi,null))},t}(c.Component),Ti=ji,Si=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={displayTitles:[],url:"",photoFrameStyle:{}},t}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){this.getTitle()},t.prototype.getTitle=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),"/config/global/all-user-title",[4,ga("/config/global/all-user-title")];case 1:return[4,t.sent().json()];case 2:return e=t.sent(),this.setState({displayTitles:e},this.getPortraitPhotoURL),[3,4];case 3:return t.sent(),[3,4];case 4:return[2]}}))}))},t.prototype.getPortraitPhotoURL=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n=this;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,fetch("/static/portrait.json")];case 1:return[4,a.sent().json()];case 2:return e=a.sent(),this.state.displayTitles.filter((function(e){return n.props.userInfo.displayTitleId===e.id}))[0]&&(t=void 0,82===this.props.userInfo.displayTitleId?(t=e.吉祥物.imageUrl,this.setState({url:t,photoFrameStyle:{width:"13.32rem",position:"absolute",top:"-1.45rem"}})):18===this.props.userInfo.displayTitleId||22===this.props.userInfo.displayTitleId?(t=e.版主.imageUrl,this.setState({url:t,photoFrameStyle:{width:"15rem",position:"absolute",top:"-2rem",left:"-1.75rem"}})):32===this.props.userInfo.displayTitleId||21===this.props.userInfo.displayTitleId?(t=e.站务组.imageUrl,this.setState({url:t,photoFrameStyle:{width:"15.2rem",position:"absolute",top:"-2.5rem",left:"-2.75rem"}})):28===this.props.userInfo.displayTitleId||16===this.props.userInfo.displayTitleId?(t=e.贵宾.imageUrl,this.setState({url:t,photoFrameStyle:{width:"15rem",position:"absolute",top:"-2rem",left:"-1.75rem"}})):37===this.props.userInfo.displayTitleId||23===this.props.userInfo.displayTitleId?(t=e.技术组.imageUrl,this.setState({url:t,photoFrameStyle:{width:"13rem",position:"absolute",top:"-1.4rem",left:"-1.2rem"}})):85===this.props.userInfo.displayTitleId||29===this.props.userInfo.displayTitleId?(t=e.编辑部.imageUrl,this.setState({url:t,photoFrameStyle:{width:"15rem",position:"absolute",top:"-2rem",left:"-1.75rem"}})):84===this.props.userInfo.displayTitleId||34===this.props.userInfo.displayTitleId?(t=e.策划部.imageUrl,this.setState({url:t,photoFrameStyle:{width:"15rem",position:"absolute",top:"-2rem",left:"-1.75rem"}})):94===this.props.userInfo.displayTitleId||93===this.props.userInfo.displayTitleId?(t=e.办公室.imageUrl,this.setState({url:t,photoFrameStyle:{width:"15rem",position:"absolute",top:"-2rem",left:"-1.75rem"}})):35===this.props.userInfo.displayTitleId||86===this.props.userInfo.displayTitleId?(t=e.体育部.imageUrl,this.setState({url:t,photoFrameStyle:{width:"15rem",position:"absolute",top:"-2rem",left:"-1.75rem"}})):96===this.props.userInfo.displayTitleId||99===this.props.userInfo.displayTitleId?(t=e.影音部.imageUrl,this.setState({url:t,photoFrameStyle:{width:"15rem",position:"absolute",top:"-2rem",left:"-1.75rem"}})):91===this.props.userInfo.displayTitleId&&(t=e.认证用户.imageUrl,this.setState({url:t,photoFrameStyle:{width:"15rem",position:"absolute",top:"-2rem",left:"-1.75rem"}}))),[2]}}))}))},t.prototype.render=function(){var e=this;return c.createElement("div",{style:{position:"relative"},className:"user-avatar"},c.createElement("img",{className:"user-avatar-img",src:this.props.userInfo.portraitUrl}),this.state.url?c.createElement("img",{style:this.state.photoFrameStyle,src:this.state.url}):null,c.createElement("div",{className:"user-badge"},this.state.displayTitles&&this.props.userInfo.userTitleIds?this.state.displayTitles.filter((function(t){return-1!==e.props.userInfo.userTitleIds.indexOf(t.id)})).map((function(e){return-1===[18,81].indexOf(e.id)?c.createElement("p",{style:{color:"red"}},e.name):null})):null,this.props.userInfo.boardMasterTitles.map((function(e){return 10===e.boardMasterLevel?c.createElement("p",{key:e.boardId}," ",c.createElement(vt.a,{to:"/boardList#".concat(e.boardName)},e.boardName),c.createElement("span",{style:{color:"red"}},e.title)):c.createElement("p",{key:e.boardId}," ",c.createElement(vt.a,{to:"/board/".concat(e.boardId)},e.boardName),c.createElement("span",null,e.title))}))))},t}(c.Component),ki=Si,xi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){this.props.changePage(),this.props.refreshCurrentUserInfo()},t.prototype.render=function(){return c.createElement("div",{className:"user-center-exact"},c.createElement(ki,{userInfo:this.props.userInfo}),c.createElement(vi,{userInfo:this.props.userInfo}),c.createElement(Ti,null))},t}(c.Component);var Pi=Object(Ia.b)((function(e){return{userInfo:e.userInfo.currentUserInfo}}),(function(e){return{refreshCurrentUserInfo:function(){e(Ci())},changePage:function(){e(le("profile"))}}}))(xi),Ui=function(e){function t(t){var n=e.call(this,t)||this;return n.state={buttonInfo:n.props.userFanInfo.isFollowing?"已关注":"关注",buttonIsDisabled:!1,isFollowing:n.props.userFanInfo.isFollowing},n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){e.userFanInfo.id!==this.props.userFanInfo.id&&this.setState({buttonInfo:e.userFanInfo.isFollowing?"已关注":"关注",buttonIsDisabled:!1,isFollowing:e.userFanInfo.isFollowing})},t.prototype.unfollow=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),cr(this.props.userFanInfo.id)?(this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}),this.props.unfollow(this.props.userFanInfo.id)):this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[2]}))}))},t.prototype.follow=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),[4,ir(this.props.userFanInfo.id)];case 1:return!0===(e=t.sent())?(this.setState({buttonIsDisabled:!1,buttonInfo:"已关注",isFollowing:!0}),this.props.follow(this.props.userFanInfo.id)):"follow_count_limited"===e?this.setState({buttonIsDisabled:!1,buttonInfo:"已达上限",isFollowing:!1}):this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[2]}}))}))},t.prototype.render=function(){var e=this;return c.createElement("div",{className:"user-center-myfollowings-user"},c.createElement("img",{src:this.props.userFanInfo.portraitUrl}),c.createElement("p",null,c.createElement("span",{className:"user-center-myfollowings-user-id"},c.createElement(vt.a,{to:"/user/id/".concat(this.props.userFanInfo.id)},this.props.userFanInfo.name)),"帖数",c.createElement("span",{className:"user-center-myfollowings-user-posts"},this.props.userFanInfo.postCount),"粉丝",c.createElement("span",{className:"user-center-myfollowings-user-fans"},this.props.userFanInfo.fanCount)),c.createElement("button",{key:this.props.userFanInfo.id,type:"button",className:this.state.isFollowing?"":"user-follow",onMouseOver:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"取消关注"})},onMouseLeave:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"已关注"})},onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo),c.createElement(vt.a,{to:"/message/message?id=".concat(this.props.userFanInfo.id)},c.createElement("button",{className:"user-message",type:"button"},"私信")))},t}(c.Component);var Mi=Object(Ia.b)((function(e,t){return{userFanInfo:t.userFanInfo}}),(function(e){return{follow:function(t){e(ue(t))},unfollow:function(t){e(me(t))}}}))(Ui),_i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getTargetUrl=function(e){return"".concat(proxyLoc(t.props).href).concat(e).concat(t.props.keyword?"?keyword=".concat(t.props.keyword):"")},t}return Object(i.c)(t,e),t.prototype.render=function(){var e,t=this,n=[],a={backgroundColor:"#ccc",cursor:"default"};if(this.props.totalPage<=7){for(e=this.props.totalPage;e--;)n.unshift(e+1);n=n.map((function(e,n){return c.createElement("li",{key:""},c.createElement(vt.a,{to:t.getTargetUrl(e)},c.createElement("button",{type:"button",disabled:e==t.props.currentPage,style:e==t.props.currentPage?a:{}},e)))}))}else if(this.props.currentPage-1<=3){for(e=7;e--;)n.unshift(e+1);(n=n.map((function(e,n){return c.createElement("li",{key:"".concat(proxyLoc(t.props).href).concat(e)},c.createElement(vt.a,{to:t.getTargetUrl(e)},c.createElement("button",{type:"button",disabled:e==t.props.currentPage,style:e==t.props.currentPage?a:{}},e)))}))).push(c.createElement("li",{key:"after"},c.createElement("button",{disabled:!0},"···"))),n.push(c.createElement("li",{key:"".concat(proxyLoc(this.props).href).concat(this.props.totalPage)},c.createElement(vt.a,{to:this.getTargetUrl(this.props.totalPage)},c.createElement("button",{type:"button"},this.props.totalPage))))}else if(this.props.totalPage-this.props.currentPage<=3){for(e=7;e--;)n.unshift(e-6+this.props.totalPage);(n=n.map((function(e,n){return c.createElement("li",{key:"".concat(proxyLoc(t.props).href).concat(e)},c.createElement(vt.a,{to:t.getTargetUrl(e)},c.createElement("button",{type:"button",disabled:e==t.props.currentPage,style:e==t.props.currentPage?a:{}},e)))}))).unshift(c.createElement("li",{key:"before"},c.createElement("button",{disabled:!0},"···"))),n.unshift(c.createElement("li",{key:"".concat(proxyLoc(this.props).href,"1")},c.createElement(vt.a,{to:this.getTargetUrl(1)},c.createElement("button",{type:"button"},1))))}else{for(e=7;e--;)n.unshift(e-3+this.props.currentPage);(n=n.map((function(e,n){return c.createElement("li",{key:"".concat(proxyLoc(t.props).href).concat(e)},c.createElement(vt.a,{to:t.getTargetUrl(e)},c.createElement("button",{type:"button",disabled:e==t.props.currentPage,style:e==t.props.currentPage?a:{}},e)))}))).push(c.createElement("li",{key:"after"},c.createElement("button",{disabled:!0},"···"))),n.push(c.createElement("li",{key:"".concat(proxyLoc(this.props).href).concat(this.props.totalPage)},c.createElement(vt.a,{to:this.getTargetUrl(this.props.totalPage)},c.createElement("button",{type:"button"},this.props.totalPage)))),n.unshift(c.createElement("li",{key:"before"},c.createElement("button",{disabled:!0},"···"))),n.unshift(c.createElement("li",{key:"".concat(proxyLoc(this.props).href,"1")},c.createElement(vt.a,{to:this.getTargetUrl(1)},c.createElement("button",{type:"button"},1))))}return this.props.hasTotal||this.props.currentPage==this.props.totalPage||n.push(c.createElement("li",{key:"after"},c.createElement("button",{disabled:!0},"···"))),c.createElement("div",{id:"userCenterPageCount"},c.createElement("ul",null,n))},t}(c.Component),Ri=_i,Di=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentWillMount=function(){var e=parseInt(this.props.match.params.page)||1;this.props.getInfo(e),this.props.changePage()},t.prototype.componentWillReceiveProps=function(e){if(this.props.match.params.page!==e.match.params.page){window.scroll(0,0);var t=parseInt(e.match.params.page)||1;this.props.getInfo(t)}},t.prototype.render=function(){if(this.props.isLoading)return c.createElement("div",{className:"user-center-loading"},c.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}));if(0===this.props.userFollowings.length)return c.createElement("div",{className:"user-center-myfans",style:{textAlign:"center"}},"没有关注");for(var e=parseInt(this.props.match.params.page)||1,t=this.props.userFollowings.slice(10*(e-1),10*e).map((function(e){return c.createElement(Mi,{key:e.id,userFanInfo:e})})),n=1;n<t.length;n+=2)t.splice(n,0,c.createElement("hr",{key:n}));return c.createElement("div",{className:"user-center-myfans"},c.createElement("div",{className:"user-center-myfans-exact"},t),c.createElement(Ri,{currentPage:e,totalPage:this.props.totalPage,href:"/usercenter/myfollowings/",hasTotal:!0}))},t}(c.Component);var Li=Object(Ia.b)((function(e){return{userFollowings:e.userInfo.currentUserFollowingInfo,totalPage:e.userInfo.totalPage.myfollowings,isLoading:e.userInfo.isLoading,hasTotal:e.userInfo.hasTotal.myfollowings}}),(function(e){return{changePage:function(){e(le("myfollowings"))},getInfo:function(t){e(function(e){return function(t,n){return Object(i.b)(void 0,void 0,void 0,(function(){var a,r,o,s,c,l,u,m,p,d;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,5,,6]),t(G()),0===(a=n().userInfo).currentUserInfo.followCount)return[2,t(Q())];if(!(r=a.currentUserFollowingInfo.length<10*(e-1)+1))for(o=10*(e-1);o<Math.min(10*e,a.currentUserFollowingInfo.length);o++)if(!a.currentUserFollowingInfo[o]){r=!0;break}return r?(s="/me/followee?from=".concat(10*(e-1),"&size=10"),[4,fa()]):[2,t(Q())];case 1:return c=i.sent(),[4,ga(s,{headers:c})];case 2:if(200!==(l=i.sent()).status)throw new Error(l.statusText);return[4,l.json()];case 3:return 0===(u=i.sent()).length?(t(ce([])),t(X(0)),[2,t(Q())]):[4,ya(u)];case 4:return m=i.sent(),p=a.currentUserFollowingInfo,m.forEach((function(t,n){return p[n+10*(e-1)]=t})),t(ce(p)),[2,t(Q())];case 5:return d=i.sent(),[2,t(te(d.message))];case 6:return[2]}}))}))}}(t))}}}))(Object(qo.a)(Di)),Fi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentWillMount=function(){var e=parseInt(this.props.match.params.page)||1;this.props.changePage(),this.props.getInfo(e)},t.prototype.componentWillReceiveProps=function(e){if(this.props.match.params.page!==e.match.params.page){window.scroll(0,0);var t=parseInt(e.match.params.page)||1;this.props.getInfo(t)}},t.prototype.render=function(){if(this.props.isLoading)return c.createElement("div",{className:"user-center-loading"},c.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}));if(0===this.props.userFans.length)return c.createElement("div",{className:"user-center-myfans",style:{textAlign:"center"}},"没有粉丝");for(var e=parseInt(this.props.match.params.page)||1,t=this.props.userFans.slice(10*(e-1),10*e).map((function(e){return c.createElement(Mi,{key:e.id,userFanInfo:e})})),n=1;n<t.length;n+=2)t.splice(n,0,c.createElement("hr",{key:n}));return c.createElement("div",{className:"user-center-myfans"},c.createElement("div",{className:"user-center-myfans-exact"},t),c.createElement(Ri,{currentPage:e,totalPage:this.props.totalPage,href:"/usercenter/myfans/",hasTotal:!0}))},t}(c.Component);var Bi=Object(Ia.b)((function(e){return{userFans:e.userInfo.currentUserFansInfo,totalPage:e.userInfo.totalPage.myfans,isLoading:e.userInfo.isLoading,hasTotal:e.userInfo.hasTotal.myfans}}),(function(e){return{changePage:function(){e(le("myfans"))},getInfo:function(t){e(function(e){return function(t,n){return Object(i.b)(void 0,void 0,void 0,(function(){var a,r,o,s,c,l,u,m,p,d;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,5,,6]),t(G()),0===(a=n().userInfo).currentUserInfo.fanCount)return[2,t(Q())];if(!(r=a.currentUserFansInfo.length<10*(e-1)+1))for(o=10*(e-1);o<Math.min(10*e,a.currentUserFansInfo.length);o++)if(!a.currentUserFansInfo[o]){r=!0;break}return r?(s="/me/follower?from=".concat(10*(e-1),"&size=10"),[4,fa()]):[2,t(Q())];case 1:return c=i.sent(),[4,ga(s,{headers:c})];case 2:if(200!==(l=i.sent()).status)throw new Error(l.statusText);return[4,l.json()];case 3:return 0===(u=i.sent()).length?(t(ie([])),t(X(0)),[2,t(Q())]):[4,ya(u)];case 4:return m=i.sent(),p=a.currentUserFansInfo,m.forEach((function(t,n){return p[n+10*(e-1)]=t})),t(ie(p)),[2,t(Q())];case 5:return d=i.sent(),[2,t(te(d.message))];case 6:return[2]}}))}))}}(t))}}}))(Object(qo.a)(Fi)),Ai=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){if(this.props.match.params.page!==e.match.params.page){var t=parseInt(e.match.params.page)||1;this.props.getInfo(t),window.scroll(0,0)}},t.prototype.componentDidMount=function(){var e=parseInt(this.props.match.params.page)||1;this.props.getInfo(e),this.props.changePage()},t.prototype.render=function(){if(this.props.isLoading)return c.createElement("div",{className:"user-center-loading"},c.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}));if(0===this.props.userRecentTopics.length)return c.createElement("div",{className:"user-posts",style:{textAlign:"center"}},"没有主题");for(var e=parseInt(this.props.match.params.page)||1,t=this.props.hasTotal?this.props.totalPage:e+1,n=this.props.userRecentTopics.slice(10*(e-1),10*e).map((function(e){return c.createElement(Ei,{key:e.id,userRecentTopic:e})})),a=1;a<n.length;a+=2)n.splice(a,0,c.createElement("hr",{key:a}));return c.createElement("div",{className:"user-posts"},n,c.createElement(Ri,{currentPage:e,totalPage:t,href:"/usercenter/mytopics/",hasTotal:this.props.hasTotal}))},t}(c.Component);var zi=Object(Ia.b)((function(e){return{userRecentTopics:e.userInfo.recentTopics,totalPage:e.userInfo.totalPage.mytopics,hasTotal:e.userInfo.hasTotal.mytopics,isLoading:e.userInfo.isLoading}}),(function(e){return{getInfo:function(t){e(Ii(t))},changePage:function(){e(le("mytopics"))}}}))(Object(qo.a)(Ai)),Vi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"user-post"},c.createElement("div",{className:"user-post-info"},c.createElement("a",{className:"user-post-date"},this.props.userRecentPost.time.slice(0,19).replace("T"," ")),c.createElement("a",{className:"user-post-like-count"},"赞：",this.props.userRecentPost.likeCount),c.createElement("a",{className:"user-post-like-count"},"踩：",this.props.userRecentPost.dislikeCount),c.createElement(vt.a,{className:"user-post-board",to:"/board/".concat(this.props.userRecentPost.boardId)},this.props.userRecentPost.boardName)),c.createElement("div",{className:"user-post-content"},c.createElement("p",null,c.createElement(vt.a,{to:"/topic/".concat(this.props.userRecentPost.topicId,"/").concat(Math.floor((this.props.userRecentPost.floor-1)/10)+1,"#").concat(this.props.userRecentPost.floor%10)},this.props.userRecentPost.content))))},t}(c.Component),Hi=Vi,$i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.changeishot=function(e){t.props.history.push("/usercenter/myposts/ishot/".concat(e,"/1"))},t}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){if(this.props.match.params.page!==e.match.params.page||this.props.match.params.ishot!==e.match.params.ishot){var t=parseInt(e.match.params.page)||1;this.props.getInfo(t,Number(e.match.params.ishot)),window.scroll(0,0)}},t.prototype.componentDidMount=function(){var e=parseInt(this.props.match.params.page)||1;this.props.getInfo(e,Number(this.props.match.params.ishot)),this.props.changePage()},t.prototype.render=function(){var e=this;if(this.props.isLoading)return c.createElement("div",{className:"user-center-loading"},c.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}));if(0===this.props.userRecentPosts.length)return c.createElement("div",{className:"user-posts",style:{textAlign:"center"}},"没有回复");for(var t=parseInt(this.props.match.params.page)||1,n=this.props.hasTotal?this.props.totalPage:t+1,a=this.props.userRecentPosts.slice(10*(t-1),10*t).map((function(e){return c.createElement(Hi,{key:e.id,userRecentPost:e})})),r=1;r<a.length;r+=2)a.splice(r,0,c.createElement("hr",{key:r}));var o=Number(this.props.match.params.ishot);return c.createElement("div",{className:"user-posts"},0===o?c.createElement(Bn.a,{style:{width:"8rem",marginTop:"-1rem",marginBottom:"2rem"},className:"user-ishot-btn",type:"primary",onClick:function(){return e.changeishot(1)}},"显示热门回复"):c.createElement(Bn.a,{style:{width:"8rem",marginTop:"-1rem",marginBottom:"2rem"},type:"primary",onClick:function(){return e.changeishot(0)}},"显示全部回复"),a,c.createElement(Ri,{currentPage:t,totalPage:n,href:"/usercenter/myposts/ishot/".concat(Number(this.props.match.params.ishot),"/"),hasTotal:this.props.hasTotal}))},t}(c.Component);var Wi=Object(Ia.b)((function(e){return{userRecentPosts:e.userInfo.recentPosts,totalPage:e.userInfo.totalPage.myposts,hasTotal:e.userInfo.hasTotal.myposts,isLoading:e.userInfo.isLoading}}),(function(e){return{getInfo:function(t,n){e(function(e,t){return function(n,a){return Object(i.b)(void 0,void 0,void 0,(function(){var r,o,s,c,l,u,m,p,d,h;return Object(i.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,7,,8]),n(G()),r=a().userInfo.recentPosts,a().userInfo.hasTotal.myposts,o="/me/".concat(0===t?"recent":"hot","-post?from=").concat(10*(e-1),"&size=11"),[4,fa()];case 1:return s=i.sent(),[4,ga(o,{headers:s})];case 2:if(200!==(c=i.sent()).status)throw new Error(c.statusText);return[4,c.json()];case 3:l=i.sent(),u=l.data,m=Math.floor(l.count/10)+1,p=11===u.length?10:u.length,11!==u.length&&n(X(e)),i.label=4;case 4:return p--?(d=u[p],[4,$a(u[p].boardId)]):[3,6];case 5:return d.boardName=i.sent(),r[10*(e-1)+p]=u[p],[3,4];case 6:return n(re({posts:r,total:m})),[2,n(Q())];case 7:return h=i.sent(),[2,n(te(h.message))];case 8:return[2]}}))}))}}(t,n))},changePage:function(){e(le("myposts"))}}}))(Object(qo.a)($i)),Yi=function(e){function t(t){var n=e.call(this,t)||this;ua();return n.state={avatarURL:"",info:"",isShown:!1,divheight:0,divWidth:0,selectorWidth:160,selectorLeft:0,selectorTop:0,avatarNow:t.userInfo.portraitUrl,isLoading:!1,naturalWidth:0,naturalHeight:0,img:null,NUM_MAX:0,scaling:1,choosingDefault:!1,fileType:""},n.handleChange=n.handleChange.bind(n),n.handleIMGLoad=n.handleIMGLoad.bind(n),n.handleSelectorMove=n.handleSelectorMove.bind(n),n.handleResizeMove=n.handleResizeMove.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleCoverMouseMove=n.handleCoverMouseMove.bind(n),n.handleMouseUp=n.handleMouseUp.bind(n),n.setDefaultAvatar=n.setDefaultAvatar.bind(n),n}return Object(i.c)(t,e),t.prototype.handleChange=function(e){var t=this,n=e.target.files[0];if(!n.type.match("image.*"))return this.setState({info:"请选择图片文件",isShown:!1,divheight:0}),!1;this.setState({fileType:n.type});var a=new FileReader;a.readAsDataURL(n),a.addEventListener("load",(function(e){t.setState({isShown:!0,avatarURL:e.target.result})}))},t.prototype.handleIMGLoad=function(e,t,n){if(e<160||t<160)this.setState({info:"图片至少为 160*160",isShown:!1,divheight:0});else{for(var a=this.myCanvas.getContext("2d"),r=this.state.scaling;e/r>800;)r*=1.1;this.myCanvas.width=e/r,this.myCanvas.height=t/r,a.drawImage(n,0,0,e,t,0,0,e/r,t/r),this.setState({divheight:t/r+50,divWidth:e/r+50,isShown:!0,info:"请选择要显示的区域",selectorLeft:e/r/4,selectorTop:t/r/4,selectorWidth:Math.min(t/r,e/r)/2,naturalWidth:e/r,naturalHeight:t/r,img:n,NUM_MAX:Math.min(500,e/r,t/r),scaling:r})}},t.prototype.handleMouseUp=function(){this.dragging=null},t.prototype.componentDidMount=function(){this.selector.addEventListener("mousedown",this.handleSelectorMove),this.selector.addEventListener("mousemove",this.handleSelectorMove),this.selector.addEventListener("mouseup",this.handleSelectorMove),this.resize.addEventListener("mousedown",this.handleResizeMove),this.resize.addEventListener("mousemove",this.handleResizeMove),this.resize.addEventListener("mouseup",this.handleResizeMove),this.cover.addEventListener("mousemove",this.handleCoverMouseMove),this.cover.addEventListener("mouseup",this.handleCoverMouseMove),window.addEventListener("mouseup",this.handleMouseUp)},t.prototype.componentWillUnmount=function(){this.selector.removeEventListener("mousedown",this.handleSelectorMove),this.selector.removeEventListener("mousemove",this.handleSelectorMove),this.selector.removeEventListener("mouseup",this.handleSelectorMove),this.resize.removeEventListener("mousedown",this.handleResizeMove),this.resize.removeEventListener("mousemove",this.handleResizeMove),this.resize.removeEventListener("mouseup",this.handleResizeMove),this.cover.removeEventListener("mousemove",this.handleCoverMouseMove),this.cover.removeEventListener("mouseup",this.handleCoverMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)},t.prototype.handleSelectorMove=function(e){var t=this;if(void 0!==this.dragging&&null!==this.dragging&&"resize"===this.dragging.id)this.handleCoverMouseMove(e);else switch(e.type){case"mousedown":this.diffX=e.clientX-e.target.offsetLeft,this.diffY=e.clientY-e.target.offsetTop,this.dragging=e.target;break;case"mousemove":if(null!==this.dragging){var n=e.clientY-this.diffY,a=e.clientX-this.diffX;this.setState((function(e){return n<0&&(n=0),a<0&&(a=0),n>e.naturalHeight-t.state.selectorWidth&&(n=e.naturalHeight-t.state.selectorWidth),a>e.naturalWidth-t.state.selectorWidth&&(a=e.naturalWidth-t.state.selectorWidth),{selectorTop:n,selectorLeft:a}}))}break;case"mouseup":this.dragging=null}},t.prototype.handleResizeMove=function(e){var t=this;switch(e.type){case"mousedown":this.diffX=e.clientX-e.target.offsetLeft,this.dragging=e.target;break;case"mousemove":null!==this.dragging&&(this.diffY=e.clientX-e.target.offsetLeft,this.setState((function(e){var n=e.selectorWidth+t.diffY-t.diffX,a=Math.min(e.NUM_MAX,e.naturalWidth-e.selectorLeft,e.naturalHeight-e.selectorTop);return isNaN(n)||(n<100&&(n=100),n>a&&(n=a)),{selectorWidth:isNaN(n)?e.selectorWidth:n}})));break;case"mouseup":this.dragging=null}},t.prototype.handleCoverMouseMove=function(e){var t=this;switch(e.type){case"mouseup":this.dragging=null;break;case"mousemove":if(void 0!==this.dragging&&null!==this.dragging&&"resize"===this.dragging.id)this.diffY=e.clientX-this.dragging.offsetLeft,this.setState((function(e){var n=e.selectorWidth+t.diffY-t.diffX;if(!isNaN(n)){var a=Math.min(e.NUM_MAX,e.naturalWidth-e.selectorLeft,e.naturalHeight-e.selectorTop);n<100&&(n=100),n>a&&(n=a)}return{selectorWidth:isNaN(n)?e.selectorWidth:n}}));else if(void 0!==this.dragging&&null!==this.dragging&&"selector"===this.dragging.id){var n=e.clientY-this.diffY,a=e.clientX-this.diffX;this.setState((function(e){return n<0&&(n=0),a<0&&(a=0),n>e.naturalHeight-t.state.selectorWidth&&(n=e.naturalHeight-t.state.selectorWidth),a>e.naturalWidth-t.state.selectorWidth&&(a=e.naturalWidth-t.state.selectorWidth),{selectorTop:n,selectorLeft:a}}))}}},t.prototype.handleSubmit=function(){var e=this,t=this.newAvatar,n=t.getContext("2d"),a=this.state.selectorLeft,r=this.state.selectorTop,o=this.state.selectorWidth;t.width=o,t.height=o,n.drawImage(this.state.img,a*this.state.scaling,r*this.state.scaling,o*this.state.scaling,o*this.state.scaling,0,0,o,o),t.toBlob((function(t){return Object(i.b)(e,void 0,void 0,(function(){var e,n,a,r,o,s,c,l,u;return Object(i.d)(this,(function(i){switch(i.label){case 0:(e=new Blob([t],{type:this.state.fileType})).lastModifiedDate=Date.now(),e.name="头像."+this.state.fileType.slice(this.state.fileType.indexOf("/")+1,this.state.fileType.length),i.label=1;case 1:return i.trys.push([1,5,,6]),n="/file/portrait",a=new Headers,o=(r=a).append,s=["Authorization"],[4,ha()];case 2:return o.apply(r,s.concat([i.sent()])),(c=new FormData).append("files",e,e.name),c.append("contentType","multipart/form-data"),[4,ga(n,{method:"POST",headers:a,body:c})];case 3:return[4,(l=i.sent()).json()];case 4:return u=i.sent(),200===l.status&&0!==u.length&&this.changeAvatar(u[0]),[3,6];case 5:return i.sent(),this.setState({info:"修改失败",isLoading:!1,isShown:!1,divheight:0,choosingDefault:!1,avatarURL:""}),[3,6];case 6:return[2]}}))}))}),this.state.fileType,.75)},t.prototype.setDefaultAvatar=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return t=e.target,[4,this.changeAvatar(t.src)];case 1:return n.sent(),[2]}}))}))},t.prototype.changeAvatar=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),this.setState({isLoading:!0}),[4,ha()];case 1:return t=a.sent(),"/me/portrait",(n=new Headers).append("Content-Type","application/json"),n.append("Authorization",t),[4,ga("/me/portrait",{method:"PUT",headers:n,body:JSON.stringify(e)})];case 2:if(200!==a.sent().status)throw new Error;return this.setState({info:"修改成功",avatarNow:e,isLoading:!1,isShown:!1,divheight:0,choosingDefault:!1,avatarURL:""}),this.props.refreshUserInfo(),[3,4];case 3:return a.sent(),this.setState({info:"修改失败",isLoading:!1,isShown:!1,divheight:0,choosingDefault:!1,avatarURL:""}),[3,4];case 4:return[2]}}))}))},t.prototype.render=function(){var e=this,t={display:"none"};ua();return c.createElement("div",null,c.createElement("h2",null,"修改头像"),c.createElement("div",{className:"user-center-config-avatar"},c.createElement("img",{src:this.state.avatarNow}),c.createElement("div",null,c.createElement("button",{id:"chooseDefaultAvatar",type:"button",onClick:function(){return e.setState({choosingDefault:!0,info:"暂时只有六枚"})}},"选择论坛头像"),c.createElement("div",null,c.createElement("input",{onChange:function(t){e.handleChange(t),t.target.value=""},id:"uploadAvatar",type:"file",accept:"image/*",style:t}),c.createElement("label",{htmlFor:"uploadAvatar",onClick:function(){return e.setState({choosingDefault:!1})}},c.createElement("p",null,"选择本地图片")),c.createElement("p",{style:{color:"red",margin:"0"}},this.state.info),c.createElement("button",{type:"button",className:"config-submit-button",style:this.state.isShown?{}:t,onClick:this.handleSubmit,disabled:this.state.isLoading},"提交"))),c.createElement("div",{className:"user-center-config-avatar-preview",style:this.state.isShown?{opacity:1,marginTop:"2rem"}:{zIndex:-1}},c.createElement("div",{style:{position:"absolute",width:"824px",overflow:"hidden",paddingBottom:"50px"}},c.createElement("canvas",{id:"newAvatar",style:t,ref:function(t){e.newAvatar=t}}),c.createElement("canvas",{ref:function(t){e.myCanvas=t},style:this.state.isShown?{position:"relative"}:{display:"none"}}),c.createElement("div",{id:"cover",ref:function(t){e.cover=t},style:{width:"".concat(this.state.divWidth,"px"),height:"".concat(this.state.divheight,"px"),top:0}}),c.createElement("div",{className:"imgdata",style:this.state.isShown?{width:"".concat(this.state.selectorWidth,"px"),height:"".concat(this.state.selectorWidth,"px"),borderRadius:"".concat(this.state.selectorWidth/2,"px"),top:"".concat(this.state.selectorTop,"px"),left:"".concat(this.state.selectorLeft,"px")}:t},c.createElement("img",{src:this.state.avatarURL,style:{position:"relative",top:"-".concat(this.state.selectorTop,"px"),left:"-".concat(this.state.selectorLeft,"px"),width:"".concat(this.state.naturalWidth,"px"),height:"".concat(this.state.naturalHeight,"px")}})),c.createElement("div",{id:"selector",ref:function(t){e.selector=t},style:this.state.isShown?{width:"".concat(this.state.selectorWidth,"px"),height:"".concat(this.state.selectorWidth,"px"),borderRadius:"".concat(this.state.selectorWidth/2,"px"),top:"".concat(this.state.selectorTop,"px"),left:"".concat(this.state.selectorLeft,"px")}:t}),c.createElement("span",{id:"resize",ref:function(t){e.resize=t},style:{top:"".concat(this.state.selectorWidth+this.state.selectorTop,"px"),left:"".concat(this.state.selectorWidth+this.state.selectorLeft,"px")}})),c.createElement("img",{onLoad:function(t){e.handleIMGLoad(t.target.naturalWidth,t.target.naturalHeight,t.target)},style:t,src:this.state.avatarURL})),c.createElement("div",{style:{width:"100%",height:"".concat(this.state.divheight,"px"),transitionDuration:".5s"}}),c.createElement("div",{style:this.state.choosingDefault?{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",flexWrap:"wrap"}:{display:"none"}},["default_avatar_boy.png","default_avatar_girl.png","default_avatar_boy2.jpg","default_avatar_girl2.jpg","default_avatar_boy3.jpg","default_avatar_girl3.jpg"].map((function(t){return c.createElement("img",{key:t,style:{margin:"3rem 5rem",cursor:"pointer",height:"10rem",width:"10rem"},onClick:e.setDefaultAvatar,src:"//www.cc98.org/static/images/".concat(t)})})))))},t}(c.Component);var qi=Object(Ia.b)((function(e){return{userInfo:e.userInfo.currentUserInfo}}),(function(e){return{refreshUserInfo:function(){e(Ci())}}}))(Yi),Ji=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this;return c.createElement("div",null,c.createElement("h2",null,"修改签名档"),c.createElement("div",{className:"user-center-config-signature"},c.createElement("textarea",{id:"signature",onChange:function(t){e.props.onchange("SignatureCode",t.target.value)},value:this.props.signature,spellCheck:!1}),c.createElement("div",null,c.createElement("p",null,"注* 个性签名将在个人主页、发布文章、回复文章中显示，允许使用UBB代码"))))},t}(c.Component),Gi=Ji,Qi=function(e){function t(t){var n=e.call(this,t)||this;return n.state={displayTitles:[]},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),"/config/global/all-user-title",[4,ga("/config/global/all-user-title")];case 1:return[4,t.sent().json()];case 2:return e=t.sent(),this.setState({displayTitles:e}),[3,4];case 3:return t.sent(),[3,4];case 4:return[2]}}))}))},t.prototype.render=function(){var e=this,t=[],n=0;for(n=100;n--;)t.unshift(n+1920);var a=t.map((function(e){return c.createElement("option",{key:e,value:e},e)}));for(a.unshift(c.createElement("option",{key:9999,value:9999},"保密")),a.unshift(c.createElement("option",{key:0,value:0},"未选择")),t=[],n=12;n--;)t.unshift(n+1);var r=t.map((function(e){return c.createElement("option",{key:e,value:e},e)}));for(r.unshift(c.createElement("option",{key:0,value:0},"未选择")),t=[],n=31;n--;)t.unshift(n+1);var o=t.map((function(e){return c.createElement("option",{key:e,value:e},e)}));return o.unshift(c.createElement("option",{key:0,value:0},"未选择")),c.createElement("div",{className:"user-center-config-others"},c.createElement("h2",null,"其他设置"),c.createElement("div",{className:"config-gender"},c.createElement("p",null,"性别："),c.createElement("select",{id:"genderSelect",name:"Gender",value:this.props.userinfo.Gender,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},c.createElement("option",{value:1},"男"),c.createElement("option",{value:0},"女"))),c.createElement("div",{className:"config-birthday"},c.createElement("p",null,"生日："),c.createElement("select",{id:"birthdayYear",name:"birthdayYear",value:this.props.userinfo.birthdayYear,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},a),c.createElement("p",null,"年"),c.createElement("select",{id:"birthdayMonth",name:"birthdayMonth",value:this.props.userinfo.birthdayMonth,disabled:0===this.props.userinfo.birthdayYear,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},r),c.createElement("p",null,"月"),c.createElement("select",{id:"birthdayDay",name:"birthdayDay",value:this.props.userinfo.birthdayDay,disabled:0===this.props.userinfo.birthdayYear,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},o),c.createElement("p",null,"日")),this.state.displayTitles.length>0?c.createElement("div",{className:"config-gender"},c.createElement("p",null,"头衔："),c.createElement("select",{style:{width:"auto",padding:"0 1rem"},name:"DisplayTitleId",value:this.props.userinfo.DisplayTitleId,onChange:function(t){e.props.handleChange(t.target.name,Number.parseInt(t.target.value))}},c.createElement("option",{value:0},"不显示"),this.props.userinfo.userTitleIds.map((function(t){var n=e.state.displayTitles.filter((function(e){return e.id===t}));if(n.length>0)return c.createElement("option",{key:t,value:t},n[0].name)})))):null,c.createElement("div",{className:"config-text"},c.createElement("p",null,"QQ："),c.createElement("input",{type:"text",name:"QQ",value:this.props.userinfo.QQ,maxLength:20,onChange:function(t){e.props.handleChange(t.target.name,t.target.value)}})),c.createElement("div",{className:"config-text"},c.createElement("p",null,"邮箱："),c.createElement("input",{type:"email",name:"EmailAddress",value:this.props.userinfo.EmailAddress,maxLength:150,onChange:function(t){e.props.handleChange(t.target.name,t.target.value)}})),c.createElement("div",{className:"config-introduction"},c.createElement("p",null,"个人简介："),c.createElement("div",null,c.createElement("textarea",{name:"Introduction",value:this.props.userinfo.Introduction,maxLength:100,onChange:function(t){e.props.handleChange(t.target.name,t.target.value)}}),c.createElement("p",null,"*不超过100字"))))},t}(c.Component),Ki=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.c)(t,e)}(Do),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.c)(t,e)}(Do),function(e){function t(t){var n=e.call(this,t)||this;t.changePage();var a={EmailAddress:t.userInfo.emailAddress,Gender:t.userInfo.gender,Introduction:t.userInfo.introduction,QQ:t.userInfo.qq,SignatureCode:t.userInfo.signatureCode,Birthday:t.userInfo.birthday,birthdayYear:t.userInfo.birthday?Number.parseInt(t.userInfo.birthday.slice(0,4)):0,birthdayMonth:t.userInfo.birthday?Number.parseInt(t.userInfo.birthday.slice(5,7)):0,birthdayDay:t.userInfo.birthday?Number.parseInt(t.userInfo.birthday.slice(8,10)):0,DisplayTitleId:t.userInfo.displayTitleId||0,userTitleIds:t.userInfo.userTitleIds||[]};return n.state={userInfo:a,info:"",isLoading:!1},n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleReset=n.handleReset.bind(n),n}return Object(i.c)(t,e),t.prototype.handleReset=function(){var e=this.props.userInfo,t={EmailAddress:e.emailAddress,Gender:e.gender,Introduction:e.introduction,QQ:e.qq,SignatureCode:e.signatureCode,Birthday:e.birthday,birthdayYear:e.birthday?Number.parseInt(e.birthday.slice(0,4)):0,birthdayMonth:e.birthday?Number.parseInt(e.birthday.slice(5,7)):0,birthdayDay:e.birthday?Number.parseInt(e.birthday.slice(8,10)):0,DisplayTitleId:e.displayTitleId,userTitleIds:e.userTitleIds||[]};this.setState({userInfo:t})},t.prototype.handleChange=function(e,t){this.setState((function(n){var a;return{userInfo:Object(i.a)(Object(i.a)({},n.userInfo),(a={},a[e]=t,a))}}))},t.prototype.handleSubmit=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s=this;return Object(i.d)(this,(function(i){switch(i.label){case 0:this.setState({isLoading:!0,info:"修改中"}),i.label=1;case 1:if(i.trys.push([1,4,,5]),(e=this.state.userInfo).Birthday=0!==this.state.userInfo.birthdayYear?"".concat(this.state.userInfo.birthdayYear,"-").concat(this.state.userInfo.birthdayMonth,"-").concat(this.state.userInfo.birthdayDay):"",e.EmailAddress&&!e.EmailAddress.match(/[\S]+@[\S]+\.[\S]+/))throw new Error("请检查邮箱地址");if(e.QQ&&(Number.parseInt(e.QQ)<=0||Number.parseInt(e.QQ).toString()!==e.QQ))throw new Error("请检查QQ是否正确");if(t=new Date(this.state.userInfo.birthdayYear,this.state.userInfo.birthdayMonth-1,this.state.userInfo.birthdayDay),0!==this.state.userInfo.birthdayYear&&9999!==this.state.userInfo.birthdayYear&&t.getTime()>Date.now())throw new Error("请检查生日是否正确");return[4,ha()];case 2:return n=i.sent(),"/me",(a=new Headers).append("Authorization",n),a.append("Content-Type","application/json"),[4,ga("/me",{method:"PUT",headers:a,body:JSON.stringify(e)})];case 3:if(200!==(r=i.sent()).status)throw new Error(r.status.toString());return this.props.refreshUserInfo(),this.setState({info:"修改成功",isLoading:!1}),setTimeout((function(){s.setState({info:""})}),1e3),[3,5];case 4:return o=i.sent(),this.setState({info:o.message,isLoading:!1}),[3,5];case 5:return[2]}}))}))},t.prototype.render=function(){return c.createElement("div",{className:"user-center-config"},c.createElement(qi,null),c.createElement("hr",null),c.createElement(Gi,{signature:this.state.userInfo.SignatureCode,onchange:this.handleChange}),c.createElement("hr",null),c.createElement(Qi,{userinfo:this.state.userInfo,handleChange:this.handleChange}),c.createElement("hr",null),c.createElement("div",{className:"config-submit"},c.createElement("h2",null,"提交修改"),c.createElement("div",{className:"config-buttons"},c.createElement("button",{className:"config-submit-button",type:"button",disabled:this.state.isLoading,onClick:this.handleSubmit},"提交"),c.createElement("button",{type:"button",onClick:this.handleReset},"重置")),c.createElement("p",{style:{height:""===this.state.info?"0":"1rem",color:"red"}},this.state.info)))},t}(c.Component));var Xi=Object(Ia.b)((function(e){return{userInfo:e.userInfo.currentUserInfo}}),(function(e){return{refreshUserInfo:function(){e(Ci())},changePage:function(){e(le("config"))}}}))(Ki),Zi=function(e){function t(t){var n=e.call(this,t)||this;return n.state={buttonInfo:"取消关注",buttonIsDisabled:!1,isFollowing:!0},n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n}return Object(i.c)(t,e),t.prototype.unfollow=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,ha()];case 2:return e=r.sent(),t=this.props.UserFavoritesBoard.id,n="/me/custom-board/".concat(t),(a=new Headers).append("Authorization",e),[4,ga(n,{method:"DELETE",headers:a})];case 3:if(200!==r.sent().status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}),[3,5];case 4:return r.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[3,5];case 5:return[2]}}))}))},t.prototype.follow=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,ha()];case 2:return e=r.sent(),t=this.props.UserFavoritesBoard.id,n="/me/custom-board/".concat(t),(a=new Headers).append("Authorization",e),[4,ga(n,{method:"PUT",headers:a})];case 3:if(200!==r.sent().status)throw{};return this.setState({buttonIsDisabled:!1,buttonInfo:"取消关注",isFollowing:!0}),[3,5];case 4:return r.sent(),this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[3,5];case 5:return[2]}}))}))},t.prototype.render=function(){return c.createElement("div",{className:"user-center-myfavorite-board"},c.createElement(vt.a,{to:"/board/".concat(this.props.UserFavoritesBoard.id),title:this.props.UserFavoritesBoard.name},c.createElement("img",{src:"/static/images/_".concat(this.props.UserFavoritesBoard.name,".png")})),c.createElement("div",{className:"user-center-myfavorite-board-info"},c.createElement(vt.a,{to:"/board/".concat(this.props.UserFavoritesBoard.id),title:this.props.UserFavoritesBoard.name},c.createElement("h2",null,this.props.UserFavoritesBoard.name)),c.createElement("p",null,"版主：",this.props.UserFavoritesBoard.boardMasters.join(" ")," 今日主题 ",this.props.UserFavoritesBoard.todayCount," / 总主题 ",this.props.UserFavoritesBoard.topicCount)),c.createElement("button",{type:"button",className:this.state.isFollowing?"":"user-follow-board",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled},this.state.buttonInfo))},t}(c.Component),ec=function(e){function t(t){var n=e.call(this,t)||this;return t.getInfo(),t.changePage(),n}return Object(i.c)(t,e),t.prototype.render=function(){if(this.props.isLoading)return c.createElement("div",{className:"user-center-loading"},c.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}));if(0===this.props.boards.length)return c.createElement("div",{style:{marginTop:"2rem",textAlign:"center"}},"没有关注");for(var e=this.props.boards.map((function(e){return c.createElement(Zi,{key:e.id,UserFavoritesBoard:e})})),t=1;t<e.length;t+=2)e.splice(t,0,c.createElement("hr",{key:t}));return c.createElement("div",null,e)},t}(c.Component);var tc,nc=Object(Ia.b)((function(e){return{boards:e.userInfo.currentUserFavoriteBoards,isLoading:e.userInfo.isLoading}}),(function(e){return{getInfo:function(){e((function(e,t){return Object(i.b)(void 0,void 0,void 0,(function(){var n,a,r,o,s,c,l,u;return Object(i.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e(G()),n=t().userInfo.currentUserInfo.customBoards,a=t().userInfo.currentUserFavoriteBoards.map((function(e){return e.id})),n.length!==a.length||a.some((function(e,t){return e!==n[t]}))?(r=t().userInfo.currentUserInfo.customBoards.join("&id="),o="/board/?id=".concat(r),[4,fa()]):[2,e(Q())];case 1:return s=i.sent(),[4,ga(o,{headers:s})];case 2:if(200!==(c=i.sent()).status)throw new Error(c.statusText);return[4,c.json()];case 3:return l=i.sent(),e(ne(l)),[2,e(Q())];case 4:return u=i.sent(),[2,e(te(u.message))];case 5:return[2]}}))}))}))},changePage:function(){e(le("myfavoriteboards"))}}}))(ec),ac=cs.a.Search,rc=ls.a.Option;!function(e){e[e.PostTime=0]="PostTime",e[e.LastReply=1]="LastReply",e[e.FavorTime=2]="FavorTime"}(tc||(tc={}));var oc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.keyword="",t.changeOrderAndKeyword=function(e,n){void 0===n&&(n=""),n?(t.props.getInfo(1,0,!0,n),t.props.history.push("/usercenter/myfavorites/order/0/1?keyword=".concat(n))):(t.props.getInfo(1,e,!0),t.keyword="",t.props.history.push("/usercenter/myfavorites/order/".concat(e,"/1")))},t.getkeyword=function(){var e=t.props.location.search;return e&&function(e){for(var t={},n=0,a=e.replace("?","").split("&");n<a.length;n++){var r=a[n].split("="),o=r[0],s=r[1];t[o]=decodeURI(s)}return t}(e).keyword||""},t}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){if(this.props.match.params.page!==e.match.params.page||this.props.match.params.order!==e.match.params.order){var t=parseInt(e.match.params.page)||1;this.props.getInfo(t,Number(e.match.params.order),!0,this.keyword),window.scroll(0,0)}},t.prototype.componentDidMount=function(){var e=Number(this.props.match.params.page||"1"),t=Number(this.props.match.params.order),n=this.getkeyword();t!==tc.LastReply&&""!==n&&this.props.history.replace("/usercenter/myfavorites/order/0/1?keyword=".concat(n)),this.keyword=n,this.props.getInfo(e,t,!0,this.keyword),this.props.changePage()},t.prototype.render=function(){var e=this;if(this.props.isLoading)return c.createElement("div",{className:"user-center-loading"},c.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}));for(var t=c.createElement("div",{className:"user-posts",style:{textAlign:"center"}},"没有主题"),n=parseInt(this.props.match.params.page)||1,a=this.props.hasTotal?this.props.totalPage:n+1,r=this.props.currentUserFavoriteTopics.map((function(e){return c.createElement(Ei,{key:e.id,userRecentTopic:e})})),o=1;o<r.length;o+=2)r.splice(o,0,c.createElement("hr",{key:o}));var s=Number(this.props.match.params.order);return c.createElement("div",{className:"user-posts"},c.createElement("div",{className:"user-post-operator"},c.createElement(ls.a,{value:s,style:{width:180,marginRight:40},onChange:function(t){e.changeOrderAndKeyword(t)}},c.createElement(rc,{value:tc.PostTime},"按发帖时间排序"),c.createElement(rc,{value:tc.LastReply},"按最后回复排序"),c.createElement(rc,{value:tc.FavorTime},"按收藏顺序排序")),c.createElement(ac,{defaultValue:this.keyword,placeholder:"输入关键词",onSearch:function(t){e.keyword=t,e.changeOrderAndKeyword(s,t)},style:{width:280},enterButton:c.createElement(Bn.a,{type:"primary",style:{width:60}},"搜索")}),c.createElement("div",{className:"user-post-operator-tips"},"收藏搜索目前只能按照最后回复排序")),c.createElement("hr",null),0===this.props.currentUserFavoriteTopics.length?t:c.createElement(c.Fragment,null,r,c.createElement(Ri,{currentPage:n,totalPage:a,href:"/usercenter/myfavorites/order/".concat(s,"/"),hasTotal:this.props.hasTotal,keyword:this.keyword})))},t}(c.Component);var sc=Object(Ia.b)((function(e){return{currentUserFavoriteTopics:e.userInfo.currentUserFavoriteTopics,totalPage:e.userInfo.totalPage.myfavoriteposts,hasTotal:e.userInfo.hasTotal.myfavoriteposts,isLoading:e.userInfo.isLoading}}),(function(e){return{changePage:function(){e(le("myfavoriteposts"))},getInfo:function(t,n,a,r){void 0===r&&(r=""),e(function(e,t,n,a){return void 0===t&&(t=0),void 0===n&&(n=!1),void 0===a&&(a=""),function(r,o){return Object(i.b)(void 0,void 0,void 0,(function(){var s,c,l,u,m,p,d,h,f,g;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,4,,5]),s=10*(e-1),c="",c=a?"/topic/me/search-favorite?from=".concat(s,"&size=11&keyword=").concat(a):"/topic/me/favorite?from=".concat(s,"&size=11&order=").concat(t),r(G()),o().userInfo,l=o().userInfo.currentUserFavoriteTopics,u=o().userInfo.hasTotal.myfavoriteposts,!n){for(m=l.length<10*(e-1)+1&&!u,p=10*(e-1);p<Math.min(l.length,10*e);p++)if(!l[p]){m=!0;break}if(!m)return[2,r(Q())]}return[4,fa()];case 1:return d=i.sent(),[4,ga(c,{headers:d})];case 2:if(200!==(h=i.sent()).status)throw new Error(h.statusText);return[4,h.json()];case 3:return 11===(f=i.sent()).length||f.length,11!==f.length&&r(X(e)),l.splice(0,l.length),f.forEach((function(e){l.push(e)})),[2,r(Q())];case 4:return g=i.sent(),[2,r(te(g.message))];case 5:return[2]}}))}))}}(t,n,a,r))}}}))(Object(qo.a)(oc)),ic=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userNames:"",wealth:"",reason:"",info:""},n.handleSubmit=n.handleSubmit.bind(n),n.handleWealthChange=n.handleWealthChange.bind(n),n}return Object(i.c)(t,e),t.prototype.handleSubmit=function(e){if(e.preventDefault(),!this.props.isLoading)try{this.props.solveError();var t=Number.parseFloat(this.state.wealth);if(!this.state.userNames)throw new Error("请输入收款人信息");if(this.state.wealth.match(/[^\d\.]/)||t<10)throw new Error("请输入合法的金额");if(!this.state.reason)throw new Error("请输入理由");var n=this.state.userNames.split(/\s+/);if(""===n[n.length-1]&&n.pop(),n=Array.from(new Set(n)),this.props.userInfo.wealth<t*n.length)throw new Error("财富值不足");this.setState({info:"转账中"}),this.props.sendWealthTo(n,t,this.state.reason)}catch(e){this.setState({info:e.message})}},t.prototype.componentWillReceiveProps=function(e){!e.isLoading&&this.props.isLoading&&this.setState({info:"成功给".concat(e.successNames.join(" "),"转账了总计").concat(Number.parseFloat(this.state.wealth)*e.successNames.length,"个财富值")}),e.isError&&!this.props.isError&&this.setState({info:e.errorMessage})},t.prototype.handleWealthChange=function(e,t){var n=Number.parseFloat(e);if(""!==t&&""!==e)if(e.match(/[^\d\.]/))this.setState({wealth:e,info:"请输入数值",userNames:t});else if(n<10)this.setState({wealth:e,info:"请输入大于10的金额",userNames:t});else{var a=t.split(/\s+/);""===a[a.length-1]&&a.pop(),a=Array.from(new Set(a));var r="你总共有".concat(this.props.userInfo.wealth,"个财富值，");r+="共将扣除".concat(n*a.length,"个财富值，"),a.length>1?r+="".concat(a.join("与"),"将各收到"):r+="".concat(a,"将收到"),r+="".concat(n-Math.max(Math.floor(.1*n),10),"个财富值"),this.setState({wealth:e,info:r,userNames:t})}else this.setState({userNames:t,wealth:e,info:""})},t.prototype.render=function(){var e=this;return c.createElement("div",{className:"user-center-transfer-wealth"},c.createElement("h2",null,"转账"),c.createElement("form",{onSubmit:this.handleSubmit},c.createElement("div",{className:"transfer-wealth-input"},c.createElement("p",null,"收款人"),c.createElement("input",{style:{width:"30rem"},type:"text",name:"user-names",value:this.state.userNames,onChange:function(t){return e.handleWealthChange(e.state.wealth,t.target.value)}})),c.createElement("div",{className:"transfer-wealth-input"},c.createElement("p",null,"金额"),c.createElement("input",{type:"text",name:"wealth",value:this.state.wealth,onChange:function(t){return e.handleWealthChange(t.target.value,e.state.userNames)}})),c.createElement("div",{className:"transfer-wealth-input"},c.createElement("p",null,"理由"),c.createElement("input",{style:{width:"30rem"},type:"text",name:"reason",value:this.state.reason,onChange:function(t){return e.setState({reason:t.target.value})}})),c.createElement("div",{className:"transfer-wealth-input"},c.createElement("p",null,"说明"),c.createElement("ul",{style:{marginLeft:"2.5rem"}},c.createElement("li",null,"转账需要收取一定的手续费，手续费金额为",c.createElement("strong",null,"10% 或者 10 中的较大值"),"。"),c.createElement("li",null,"转账手续费从转账金额中收取，因此对方实际收到的金额会少于您输入的金额。"),c.createElement("li",null,"转账的最小金额不能小于 ",c.createElement("strong",null,"10")),c.createElement("li",null,"可以对多人转账，请在收款人一栏用空格隔开每个用户。多人转账时每个用户都会收到您指定的金额并单独扣除手续费。您最多可以同时向 ",c.createElement("strong",null,"10")," 个用户进行转账。"))),c.createElement("button",{type:"submit",disabled:this.props.isLoading},"转账")),c.createElement("p",{className:"transfer-wealth-info"},this.state.info))},t}(c.Component);var cc=Object(Ia.b)((function(e){return{userInfo:e.userInfo.currentUserInfo,isLoading:e.userInfo.isLoading,isError:e.userInfo.isError,errorMessage:e.userInfo.errorMessage,successNames:e.userInfo.transferSuccessUsers}}),(function(e){return{sendWealthTo:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e(wi.apply(void 0,t))},solveError:function(){e(K())}}}))(ic),lc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"user-center-router"},c.createElement(on.a,{exact:!0,path:"/usercenter/",component:Pi}),c.createElement(on.a,{path:"/usercenter/myfollowings/:page?",component:Li}),c.createElement(on.a,{path:"/usercenter/myfans/:page?",component:Bi}),c.createElement(on.a,{path:"/usercenter/mytopics/:page?",component:zi}),c.createElement(rn.a,null,c.createElement(on.a,{path:"/usercenter/myposts/ishot/:ishot/:page?",component:Wi}),c.createElement(on.a,{path:"/usercenter/myposts"},c.createElement(gi.a,{to:"/usercenter/myposts/ishot/0"}))),c.createElement(rn.a,null,c.createElement(on.a,{path:"/usercenter/myfavorites/order/:order/:page?",exact:!0,component:sc}),c.createElement(on.a,{path:"/usercenter/myfavorites"},c.createElement(gi.a,{to:"/usercenter/myfavorites/order/0"}))),c.createElement(on.a,{path:"/usercenter/config",component:Xi}),c.createElement(on.a,{path:"/usercenter/mycustomboards",component:nc}),c.createElement(on.a,{path:"/usercenter/transferwealth",component:cc}),c.createElement(on.a,{path:"/usercenter/theme",component:xa}))},t}(c.Component),uc=lc,mc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return this.props.isLogOn?c.createElement("div",{className:"user-center"},c.createElement(an,{title:"个人中心 - CC98论坛"}),c.createElement("div",{className:"user-center-content"},c.createElement("div",{className:"user-center-head"},c.createElement("p",null,"个人中心")),c.createElement("div",{className:"user-center-body"},c.createElement(fi,null),c.createElement(uc,null)))):c.createElement(ln,null)},t}(c.Component);var pc=Object(Ia.b)((function(e){return{isLogOn:e.userInfo.isLogOn}}),null)(mc),dc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props.data;return e.lastContent||(e.lastContent=""),c.createElement("div",{className:"message-message-person"},c.createElement("img",{className:"message-message-pPortraitUrl",src:e.portraitUrl}),c.createElement("div",{className:"message-message-pInfo"},c.createElement("div",{className:"message-message-pName"},e.name),c.createElement("div",{className:"message-message-pMessage"},c.createElement(tn,{code:e.lastContent}))),c.createElement(hc,{isRead:e.isRead}))},t}(c.Component),hc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return this.props.isRead?c.createElement("div",{className:"message-counterPerson displaynone"}):c.createElement("div",{className:"message-counterPerson"})},t}(c.Component),fc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e,t="/user/id/".concat(this.props.senderId);return e=this.props.showTime?"message-message-wcTime":"displaynone",c.createElement("div",{className:"message-message-wc"},c.createElement("div",{className:e},Rn(this.props.time).format("YYYY-MM-DD HH:mm:ss")),c.createElement("div",{className:"message-message-wcSender"},c.createElement("a",{href:t,target:"_blank"},c.createElement("img",{className:"message-message-wcPortraitUrl",src:this.props.senderPortraitUrl})),c.createElement("div",{className:"message-message-wcContent"},c.createElement("div",{id:String(this.props.id),className:"message-message-wcText"},c.createElement(tn,{code:this.props.content})))))},t}(c.Component),gc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e,t="/user/id/".concat(this.props.senderId);return e=this.props.showTime?"message-message-wcTime":"displaynone",c.createElement("div",{className:"message-message-wc"},c.createElement("div",{className:e},Rn(this.props.time).format("YYYY-MM-DD HH:mm:ss")),c.createElement("div",{className:"message-message-wcReceiver"},c.createElement("a",{href:t,target:"_blank"},c.createElement("img",{className:"message-message-wcPortraitUrl",src:this.props.senderPortraitUrl})),c.createElement("div",{className:"message-message-wcContent"},c.createElement("div",{className:"message-message-wcText",id:String(this.props.id)},c.createElement(tn,{code:this.props.content})))))},t}(c.Component),bc=function(e){return function(e,t){return Object(i.b)(void 0,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),[4,fa()];case 1:return[4,ga("/me/unread-count",{headers:a.sent()})];case 2:return[4,a.sent().json()];case 3:return la("messageCount",t=a.sent()),[2,e(fe(t))];case 4:return n=a.sent(),console.error(n.message),[3,5];case 5:return[2]}}))}))}},vc=function(e){function t(t){var n=e.call(this,t)||this;return n.coverMessageProps=function(e){var t=ua(),a=n.props.data;return e.receiverId==t.id?c.createElement(gc,{id:e.id,senderName:a.name,senderId:a.id,receiverName:t.name,receiverId:t.id,senderPortraitUrl:a.portraitUrl,receiverPortraitUrl:t.portraitUrl,content:e.content,isRead:e.isRead,time:e.time,showTime:e.showTime}):e.senderId==t.id?c.createElement(fc,{id:e.id,senderName:t.name,senderId:t.id,receiverName:a.name,receiverId:a.id,senderPortraitUrl:t.portraitUrl,receiverPortraitUrl:a.portraitUrl,content:e.content,isRead:e.isRead,time:e.time,showTime:e.showTime}):void 0},n.report=function(){alert("举报他人恶意私信请到【论坛事务】按照格式发帖投诉，记得截图保留证据，管理员会及时进行处理！感谢您对CC98的支持！")},n.state={data:[]},n.getNewMessage=n.getNewMessage.bind(n),n.postMessage=n.postMessage.bind(n),n.getMoreMessage=n.getMoreMessage.bind(n),n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return this.getData(this.props),[2]}))}))},t.prototype.getData=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return e.data?[4,qa(e.data.id,0,10,this.context.router)]:[3,2];case 1:if(t=i.sent(),(n=Wo.getState().message)&&0!=n.messageCount&&Wo.dispatch(bc()),t&&t.length>0){if((a=e.data.message)&&a.length>0)for(o in t)if(t[o].id==a[0].id){t=Ja(t=t.slice(0,o).concat(a));break}if(r=ia("recentContact")){for(o in r)if(r[o].id==e.data.id){r[o].message=t;break}sa("recentContact",r)}this.setState({data:t.reverse()}),10===t.length?($("#wcGetMore").removeClass("displaynone"),$("#wcLoadingImg").addClass("displaynone"),$("#wcLoadingText").addClass("displaynone")):($("#wcGetMore").addClass("displaynone"),$("#wcLoadingImg").addClass("displaynone"),$("#wcLoadingText").removeClass("displaynone"))}i.label=2;case 2:return(s=document.getElementById("messageContent")).scrollTop=s.scrollHeight,[2]}}))}))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.getData(e),[2]}))}))},t.prototype.getMoreMessage=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s,c,l;return Object(i.d)(this,(function(i){switch(i.label){case 0:return $("#wcGetMore").addClass("displaynone"),$("#wcLoadingImg").removeClass("displaynone"),e=this.state.data.reverse(),t=document.getElementById("messageContent"),n=t.scrollHeight,[4,qa(this.props.data.id,e.length,10,this.context.router)];case 1:if(a=i.sent(),(r=Wo.getState().message)&&0!=r.messageCount&&Wo.dispatch(bc()),a&&a.length>0){if(o=Ja(o=e.concat(a)),this.setState({data:o.reverse()}),s=ia("recentContact")){for(c in s)if(s[c].id==this.props.data.id){s[c].message=o;break}sa("recentContact",s)}10===a.length?($("#wcGetMore").removeClass("displaynone"),$("#wcLoadingImg").addClass("displaynone")):($("#wcLoadingImg").addClass("displaynone"),$("#wcLoadingText").removeClass("displaynone"))}else $("#wcLoadingImg").addClass("displaynone"),$("#wcLoadingText").removeClass("displaynone");return l=t.scrollHeight,t.scrollTop=l-n-25,[2]}}))}))},t.prototype.getNewMessage=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s,c;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,qa(this.props.data.id,0,10,this.context.router)];case 1:if(e=i.sent(),t=[],n=ia("recentContact")){for(a=0;a<n.length;a++)if(n[a].id==this.props.data.id){if((t=n[a].message).length>0)for(r=0;r<e.length;r++)if(e[r].id==t[0].id){e=Ja(e=e.slice(0,r).concat(t));break}n[a].message=e,n[a].lastContent=e[0].content;break}a==n.length?((o=[this.props.data])[0].message=e,o[0].lastContent=e[0].content,sa("recentContact",n=o.concat(n)),this.props.onChange()):0==a?(sa("recentContact",n),this.setState({data:e.reverse()}),this.props.onChange()):(s=n[a],n.splice(a,1),n.unshift(s),sa("recentContact",n),this.props.onChange())}return(c=document.getElementById("messageContent")).scrollTop=c.scrollHeight,[2]}}))}))},t.prototype.handleFocus=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return $("#wPostNotice").addClass("displaynone"),$("#wPostError").addClass("displaynone"),$("#postContent")[0].focus(),[2]}))}))},t.prototype.handleBlur=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return""==$("#postContent").val()&&("none"==$("#wPostNotice").css("display")?$("#wPostNotice").removeClass("displaynone"):$("#wPostNotice").addClass("displaynone")),[2]}))}))},t.prototype.postMessage=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return""===(e=$("#postContent").val())?[2]:(t={receiverId:this.props.data.id,content:e},[4,ar(JSON.stringify(t),this.context.router)]);case 1:return 403==n.sent().status?($("#postContent").val(""),$("#wPostError").removeClass("displaynone"),[2]):(setTimeout(this.getNewMessage,200),$("#postContent").val(""),[2])}}))}))},t.prototype.render=function(){var e=this.props.data;return e?c.createElement("div",{className:"message-message-window"},c.createElement(an,{title:"与 ".concat(e.name," 的私信-CC98论坛")}),c.createElement("div",{className:"message-message-wHeader"},c.createElement("div",{className:"message-message-wReport"}),c.createElement("div",{className:"message-message-wTitle"},"与 ",e.name," 的私信"),c.createElement("div",{className:"message-message-wReport displaynone"},c.createElement("button",{onClick:this.report},"举报"))),c.createElement("div",{className:"message-message-wContent",id:"messageContent"},c.createElement("div",{className:"message-message-wcLoading"},c.createElement("div",{id:"wcGetMore",className:"message-message-wcLoadingMore",onClick:this.getMoreMessage},"点击加载更多..."),c.createElement("img",{src:"http://file.cc98.org/uploadfile/2017/11/19/2348481046.gif",id:"wcLoadingImg",className:"displaynone"}),c.createElement("div",{id:"wcLoadingText",className:"message-message-wcLoadingText displaynone"},"没有更多消息了~")),this.state.data.map(this.coverMessageProps)),c.createElement("div",{className:"message-message-wPost"},c.createElement("textarea",{className:"message-message-wPostArea",id:"postContent",onFocus:this.handleFocus,onBlur:this.handleBlur}),c.createElement("div",{id:"wPostNotice",className:"message-message-wPostNotice",onClick:this.handleFocus},"请在这里填入您要发送的私信内容"),c.createElement("div",{id:"wPostError",className:"message-message-wPostError displaynone",onClick:this.handleFocus},"您的发送过快，请稍作歇息~"),c.createElement("button",{className:"message-message-wPostBtn",onClick:this.postMessage},"发送"))):c.createElement("div",{className:"message-message-window"},c.createElement("div",{className:"message-message-wHeader"},c.createElement("div",{className:"message-message-wReport"}),c.createElement("div",{className:"message-message-wTitle"},"无当前聊天对象"),c.createElement("div",{className:"message-message-wReport displaynone"},c.createElement("button",{onClick:this.report},"举报"))),c.createElement("div",{className:"message-message-wContent",id:"messageContent"},c.createElement("div",{className:"message-message-wcLoading"},c.createElement("img",{src:"http://file.cc98.org/uploadfile/2017/11/19/2348481046.gif",id:"wcLoadingImg",className:"displaynone"}),c.createElement("div",{id:"wcLoadingText",className:"message-message-wcLoadingText displaynone"},"没有更多消息了~"))),c.createElement("div",{className:"message-message-wPost"},c.createElement("textarea",{className:"message-message-wPostArea",id:"postContent",onFocus:this.handleFocus,onBlur:this.handleBlur}),c.createElement("div",{id:"wPostNotice",className:"message-message-wPostNotice",onClick:this.handleFocus},"请在这里填入您要发送的私信内容"),c.createElement("div",{id:"wPostError",className:"message-message-wPostError displaynone",onClick:this.handleFocus},"您的发送过快，请稍作歇息~"),c.createElement("button",{className:"message-message-wPostBtn",onClick:this.postMessage},"发送")))},t}(c.Component),yc=function(e){function t(t){var n=e.call(this,t)||this;return n.coverMessagePerson=function(e){var t=n,a=ia("recentContact");return c.createElement("div",{onClick:function(){return Object(i.b)(this,void 0,void 0,(function(){var n;return Object(i.d)(this,(function(r){for(n in t.setState({chatObj:e}),$(".message-message-pList > div").removeClass("message-message-pFocus"),$("#contact_".concat(e.id)).addClass("message-message-pFocus"),a)a[n].id===e.id&&!1===a[n].isRead&&(a[n].isRead=!0,sa("recentContact",a),t.setState({data:a}));return[2]}))}))},id:"contact_".concat(e.id)},c.createElement(dc,{data:e}))},n.state={data:null,chatObj:null},n.getMoreContact=n.getMoreContact.bind(n),n.onChange=n.onChange.bind(n),n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return ma(),ua(),"message-counterNav"===$("#unreadCount-messageCount1").attr("class")&&ca("recentContact"),(e=ia("recentContact"))&&0!==e.length?[3,2]:[4,Ya(0,7,this.context.router)];case 1:sa("recentContact",e=n.sent()),n.label=2;case 2:return[4,Xa(e,this.context.router)];case 3:return(e=n.sent())&&this.setState({data:e,chatObj:e[0]}),(t=this.state.chatObj)&&$("#".concat(t.name)).addClass("message-message-pFocus"),[2]}}))}))},t.prototype.getMoreContact=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return"none"!=$("#moreDone").css("display")?[3,2]:($("#moreImg").removeClass("displaynone"),$("#moreDot").addClass("displaynone"),$("#moreShow").addClass("displaynone"),[4,Ya((e=ia("recentContact")).length,7,this.context.router)]);case 1:t=n.sent(),e=e.concat(t),this.setState({data:e}),sa("recentContact",e),t.length<7?($("#moreImg").addClass("displaynone"),$("#moreDone").removeClass("displaynone")):($("#moreImg").addClass("displaynone"),$("#moreDot").removeClass("displaynone"),$("#moreShow").removeClass("displaynone")),n.label=2;case 2:return[2]}}))}))},t.prototype.onChange=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){return e=ia("recentContact"),this.setState({data:e,chatObj:e[0]}),$(".message-message-pList > div").removeClass("message-message-pFocus"),$("#".concat(this.state.chatObj.name)).addClass("message-message-pFocus"),[2]}))}))},t.prototype.render=function(){$(".message-nav > div").removeClass("message-nav-focus"),$("#message").addClass("message-nav-focus");var e=this.state.data,t=this.state.chatObj;return e?e.length>6?c.createElement("div",{className:"message-message"},c.createElement(an,{title:"我的私信-CC98论坛"}),c.createElement("div",{className:"message-message-people"},c.createElement("div",{className:"message-message-pTitle"},"近期私信"),c.createElement("div",{className:"message-message-pList"},e.map(this.coverMessagePerson),c.createElement("div",{className:"message-message-plMore",onClick:this.getMoreContact},c.createElement("img",{id:"moreImg",src:"http://file.cc98.org/uploadfile/2017/11/19/2348481046.gif",className:"displaynone"}),c.createElement("div",{id:"moreDot"},"..."),c.createElement("div",{id:"moreShow"},"显示更多小伙伴~"),c.createElement("div",{id:"moreDone",className:"displaynone"},"小伙伴们都出来了~")))),c.createElement(vc,{data:t,onChange:this.onChange})):c.createElement("div",{className:"message-message"},c.createElement("div",{className:"message-message-people"},c.createElement("div",{className:"message-message-pTitle"},"近期私信"),c.createElement("div",{className:"message-message-pList"},e.map(this.coverMessagePerson))),c.createElement(vc,{data:t,onChange:this.onChange})):c.createElement("div",{className:"message-message"},c.createElement("div",{className:"message-message-people"},c.createElement("div",{className:"message-message-pTitle"},"近期私信"),c.createElement("div",{className:"message-message-pList"})),c.createElement(vc,{data:null,onChange:this.onChange}))},t}(c.Component),Ec=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e="[url=/board/".concat(this.props.boardId,"][color=dodgerblue]").concat(this.props.boardName,"[/color][/url]");0===this.props.boardId&&(e="[color=dodgerblue]".concat(this.props.boardName,"[/color]"));var t,n=this.props.floor/10+1,a=parseInt(n),r=this.props.floor+10-10*a,o="".concat(a,"#").concat(r);if(0===r&&(o="".concat(a-1,"#10")),this.props.isRead){var s=void 0,i=void 0;s=this.props.userId>0?"[url=/user/id/".concat(this.props.userId,"][color=gray]").concat(this.props.userName,"[/color][/url]"):"[color=gray]".concat(this.props.userName,"[/color]"),i=this.props.boardId?"[url=/topic/".concat(this.props.topicId,"/").concat(o,"][color=#0b5394]").concat(this.props.topicTitle.replace("\n",""),"[/color][/url]"):"[color=#0b5394]".concat(this.props.topicTitle.replace("\n",""),"}[/color]"),t=" ".concat(s," [color=gray]在《").concat(i,"》中回复了你。[/color]")}else{s=void 0,i=void 0;s=this.props.userId>0?"[url=/user/id/".concat(this.props.userId,"][color=gray][b]").concat(this.props.userName,"[/b][/color][/url]"):"[color=gray][b]".concat(this.props.userName,"[/b][/color]"),i=this.props.boardId?"[url=/topic/".concat(this.props.topicId,"/").concat(o,"][color=#0b5394]").concat(this.props.topicTitle,"[/color][/url]"):"[color=#0b5394]".concat(this.props.topicTitle,"[/color]"),t=" ".concat(s," [color=gray][b]在《").concat(i,"》中回复了你。[/b][/color]")}return c.createElement("div",{className:"message-response-box"},c.createElement("div",{className:"message-response-box-middle"},c.createElement("div",{className:"message-response-box-middle1"},c.createElement("div",{className:"message-response-box-middle-title"},c.createElement(tn,{code:e})),c.createElement("div",{className:"message-response-box-middle-date"},Rn(this.props.time).format("YYYY-MM-DD HH:mm:ss"))),c.createElement("div",{className:"message-response-box-middle-content"},c.createElement(tn,{code:t,options:{allowAutoPlay:!1,autoDetectUrl:!1,allowExternalUrl:!0,allowImage:!1,allowMediaContent:!1,compatibility:V.Recommended,allowEmotion:!1,allowExternalImage:!1,allowToolbox:!1}}))))},t}(c.Component),Ic=function(e){function t(t,n){var a=e.call(this,t,n)||this;return a.coverMessageResponse=function(e){return c.createElement(Ec,{id:e.id,type:e.type,time:e.time,topicId:e.topicId,topicTitle:e.topicTitle,floor:e.floor,userId:e.userId,userName:e.userName,boardId:e.boardId,boardName:e.boardName,isRead:e.isRead})},a.state={data:[],from:0,loading:!0,totalPage:1},a}return Object(i.c)(t,e),t.prototype.getData=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return t=10,$(".message-nav > div").removeClass("message-nav-focus"),$("#response").addClass("message-nav-focus"),[4,Mr(1)];case 1:return n=s.sent(),a=parseInt((n-.5)/t)+1,(!(r=e.match.params.page-1)||r<0)&&(r=0),[4,Cr(r*t,t,this.context.router)];case 2:return(o=s.sent())&&this.setState({data:o,from:r+1,totalPage:a}),0==r&&sa("responseState",{data:o,from:r+1,totalPage:a}),[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){return e=Wo.getState().message,t=ia("responseState"),0===e.replyCount&&t?this.setState(t):this.getData(this.props),[2]}))}))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.getData(e),[2]}))}))},t.prototype.render=function(){return c.createElement("div",{className:"message-right"},c.createElement(an,{title:"回复我的-CC98论坛"}),c.createElement("div",{className:"message-response"},this.state.data.map(this.coverMessageResponse)),c.createElement("div",{className:"message-pager"},c.createElement(cn,{url:"/message/response/",page:this.state.from,totalPage:this.state.totalPage})))},t}(c.Component),Cc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e="[url=/board/".concat(this.props.boardId,"][color=dodgerblue]").concat(this.props.boardName,"[/color][/url]");0===this.props.boardId&&(e="[color=dodgerblue]".concat(this.props.boardName,"[/color]"));var t,n=this.props.floor/10+1,a=parseInt(n),r=this.props.floor+10-10*a,o="".concat(a,"#").concat(r);if(0===r&&(o="".concat(a-1,"#10")),this.props.isRead){var s=void 0,i=void 0;s=this.props.userId>0?"[url=/user/id/".concat(this.props.userId,"][color=gray]").concat(this.props.userName,"[/color][/url]"):"[color=gray]".concat(this.props.userName,"[/color]"),i=this.props.boardId?"[url=/topic/".concat(this.props.topicId,"/").concat(o,"][color=#0b5394]").concat(this.props.topicTitle.replace("\n",""),"[/color][/url]"):"[color=#0b5394]".concat(this.props.topicTitle.replace("\n",""),"[/color]"),t=" ".concat(s," [color=gray]在《").concat(i,"》中@了你。[/color]")}else{s=void 0,i=void 0;s=this.props.userId>0?"[url=/user/id/".concat(this.props.userId,"][color=gray][b]").concat(this.props.userName,"[/b][/color][/url]"):"[color=gray][b]".concat(this.props.userName,"[/b][/color]"),i=this.props.boardId?"[url=/topic/".concat(this.props.topicId,"/").concat(o,"][color=#0b5394]").concat(this.props.topicTitle,"[/color][/url]"):"[color=#0b5394]".concat(this.props.topicTitle,"[/color]"),t=" ".concat(s," [color=gray][b]在《").concat(i,"》中@了你。[/b][/color]")}return c.createElement("div",{className:"message-response-box"},c.createElement("div",{className:"message-response-box-middle"},c.createElement("div",{className:"message-response-box-middle1"},c.createElement("div",{className:"message-response-box-middle-title"},c.createElement(tn,{code:e})),c.createElement("div",{className:"message-response-box-middle-date"},Rn(this.props.time).format("YYYY-MM-DD HH:mm:ss"))),c.createElement("div",{className:"message-response-box-middle-content"},c.createElement(tn,{code:t,options:{allowExternalImage:!1,allowAutoPlay:!1,autoDetectUrl:!0,allowExternalUrl:!0,allowImage:!1,allowMediaContent:!1,compatibility:V.Recommended,allowEmotion:!1,allowToolbox:!1}}))))},t}(c.Component),wc=function(e){function t(t){var n=e.call(this,t)||this;return n.coverMessageAttme=function(e){return c.createElement(Cc,{id:e.id,type:e.type,time:e.time,topicId:e.topicId,topicTitle:e.topicTitle,floor:e.floor,userId:e.userId,userName:e.userName,boardId:e.boardId,boardName:e.boardName,isRead:e.isRead})},n.state={data:[],from:0,loading:!0,totalPage:1},n}return Object(i.c)(t,e),t.prototype.getData=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return t=10,$(".message-nav > div").removeClass("message-nav-focus"),$("#attme").addClass("message-nav-focus"),[4,Mr(2)];case 1:return n=s.sent(),a=parseInt((n-.5)/t)+1,(!(r=e.match.params.page-1)||r<0)&&(r=0),[4,wr(r*t,t,this.context.router)];case 2:return(o=s.sent())&&this.setState({data:o,from:r+1,totalPage:a}),0==r&&sa("atState",{data:o,from:r+1,totalPage:a}),[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){return e=Wo.getState().message,t=ia("atState"),0===e.atCount&&t?this.setState(t):this.getData(this.props),[2]}))}))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.getData(e),[2]}))}))},t.prototype.render=function(){return c.createElement("div",{className:"message-right"},c.createElement(an,{title:"@我的-CC98论坛"}),c.createElement("div",{className:"message-response"},this.state.data.map(this.coverMessageAttme)),c.createElement("div",{className:"message-pager"},c.createElement(cn,{url:"/message/attme/",page:this.state.from,totalPage:this.state.totalPage})))},t}(c.Component),Nc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e;if(this.props.topicId)if(this.props.floor){var t=this.props.floor/10+1,n=parseInt(t),a=this.props.floor+10-10*n,r="".concat(n,"#").concat(a);0===a&&(r="".concat(n-1,"#10")),e=this.props.isRead?"[url=/topic/".concat(this.props.topicId,"/").concat(r,"][color=gray]").concat(this.props.content,"[/color][/url]"):"[url=/topic/".concat(this.props.topicId,"/").concat(r,"][b][color=black]").concat(this.props.content,"[/color][/b][/url]")}else e=this.props.isRead?"[url=/topic/".concat(this.props.topicId,"][color=gray]").concat(this.props.content,"[/color][/url]"):"[url=/topic/".concat(this.props.topicId,"][b][color=black]").concat(this.props.content,"[/color][/b][/url]");else e=this.props.isRead?"[color=gray]".concat(this.props.content,"[/color]"):"[color=black][b]".concat(this.props.content,"[/b][/color]");return c.createElement("div",{className:"message-system-box"},c.createElement("div",{className:"message-system-box-bar"},c.createElement("div",{className:"message-system-box-title"},this.props.title),c.createElement("div",{className:"message-system-box-date"},Rn(this.props.time).format("YYYY-MM-DD HH:mm:ss"))),c.createElement("div",{className:"message-system-box-content"},c.createElement(tn,{code:e,options:{allowExternalImage:!1,allowAutoPlay:!1,autoDetectUrl:!0,allowExternalUrl:!0,allowImage:!0,allowMediaContent:!1,compatibility:V.Recommended,allowEmotion:!1,allowToolbox:!1}})))},t}(c.Component),Oc=function(e){function t(t){var n=e.call(this,t)||this;return n.coverMessageSystem=function(e){return c.createElement(Nc,{id:e.id,type:e.type,title:e.title,content:e.content,time:e.time,topicId:e.topicId,floor:e.floor,isRead:e.isRead})},n.state={data:[],from:0,loading:!0,totalPage:1},n}return Object(i.c)(t,e),t.prototype.getData=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return t=10,$(".message-nav > div").removeClass("message-nav-focus"),$("#system").addClass("message-nav-focus"),[4,Mr(3)];case 1:return n=s.sent(),a=parseInt((n-.5)/t)+1,(!(r=e.match.params.page-1)||r<0)&&(r=0),[4,Ir(r*t,t,this.context.router)];case 2:return(o=s.sent())&&this.setState({data:o,from:r+1,totalPage:a}),0==r&&sa("systemState",{data:o,from:r+1,totalPage:a}),[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){return e=Wo.getState().message,t=ia("systemState"),0===e.systemCount&&t?this.setState(t):this.getData(this.props),[2]}))}))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.getData(e),[2]}))}))},t.prototype.render=function(){return c.createElement("div",{className:"message-right"},c.createElement(an,{title:"系统通知-CC98论坛"}),c.createElement("div",{className:"message-system"},this.state.data.map(this.coverMessageSystem)),c.createElement("div",{className:"message-pager"},c.createElement(cn,{url:"/message/system/",page:this.state.from,totalPage:this.state.totalPage})))},t}(c.Component),jc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){return(e=pa("noticeSetting"))?("否"===e.response?($("#responseSetting1").removeAttr("checked"),$("#responseSetting2").attr("checked","checked")):($("#responseSetting1").attr("checked","checked"),$("#responseSetting2").removeAttr("checked")),"否"===e.attme?($("#attmeSetting1").removeAttr("checked"),$("#attmeSetting2").attr("checked","checked")):($("#attmeSetting1").attr("checked","checked"),$("#attmeSetting2").removeAttr("checked")),"否"===e.system?($("#systemSetting1").removeAttr("checked"),$("#systemSetting2").attr("checked","checked")):($("#systemSetting1").attr("checked","checked"),$("#systemSetting2").removeAttr("checked")),"否"===e.message?($("#messageSetting1").removeAttr("checked"),$("#messageSetting2").attr("checked","checked")):($("#messageSetting1").attr("checked","checked"),$("#messageSetting2").removeAttr("checked")),"否"===e.post?($("#postSetting1").removeAttr("checked"),$("#postSetting2").attr("checked","checked")):($("#postSetting1").attr("checked","checked"),$("#postSetting2").removeAttr("checked"))):la("noticeSetting",{response:"是",attme:"是",system:"是",message:"是",post:"否"}),[2]}))}))},t.prototype.setMessageSetting=function(){la("noticeSetting",{response:$('input:radio[name="responseSetting"]:checked').val(),attme:$('input:radio[name="attmeSetting"]:checked').val(),system:$('input:radio[name="systemSetting"]:checked').val(),message:$('input:radio[name="messageSetting"]:checked').val(),post:$('input:radio[name="postSetting"]:checked').val()}),fo("saveSuccess")},t.prototype.render=function(){return c.createElement("div",{className:"message-right"},c.createElement(an,{title:"消息设置-CC98论坛"}),c.createElement("div",{className:"message-setting"},c.createElement("div",{className:"message-settingbox"},c.createElement("div",{className:"radioTitle"},"是否显示回复通知"),c.createElement("input",{type:"radio",name:"responseSetting",id:"responseSetting1",value:"是",checked:!0}),c.createElement("div",null,"是"),c.createElement("input",{type:"radio",name:"responseSetting",id:"responseSetting2",value:"否"}),c.createElement("div",null,"否")),c.createElement("div",{className:"message-settingbox"},c.createElement("div",{className:"radioTitle"},"是否显示@通知"),c.createElement("input",{type:"radio",name:"attmeSetting",id:"attmeSetting1",value:"是",checked:!0}),c.createElement("div",null,"是"),c.createElement("input",{type:"radio",name:"attmeSetting",id:"attmeSetting2",value:"否"}),c.createElement("div",null,"否")),c.createElement("div",{className:"message-settingbox"},c.createElement("div",{className:"radioTitle"},"是否显示系统通知"),c.createElement("input",{type:"radio",name:"systemSetting",id:"systemSetting1",value:"是",checked:!0}),c.createElement("div",null,"是"),c.createElement("input",{type:"radio",name:"systemSetting",id:"systemSetting2",value:"否"}),c.createElement("div",null,"否")),c.createElement("div",{className:"message-settingbox"},c.createElement("div",{className:"radioTitle"},"是否显示私信通知"),c.createElement("input",{type:"radio",name:"messageSetting",id:"messageSetting1",value:"是",checked:!0}),c.createElement("div",null,"是"),c.createElement("input",{type:"radio",name:"messageSetting",id:"messageSetting2",value:"否"}),c.createElement("div",null,"否")),c.createElement("div",{className:"message-settingbox"},c.createElement("div",{className:"radioTitle"},"回帖是否跳至最新回复"),c.createElement("input",{type:"radio",name:"postSetting",id:"postSetting1",value:"是"}),c.createElement("div",null,"是"),c.createElement("input",{type:"radio",name:"postSetting",id:"postSetting2",value:"否",checked:!0}),c.createElement("div",null,"否")),c.createElement("button",{className:"message-setting-btn",onClick:this.setMessageSetting},"保存消息设置"),c.createElement(Es,{text:"保存成功",id:"saveSuccess",top:"31%",left:"43%"})))},t}(c.Component),Tc=n(1284),Sc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=Wo.getState().message;return c.createElement("div",{className:"message-root"},c.createElement(an,{title:"CC98论坛-我的消息"}),c.createElement("div",{className:"message"},c.createElement("div",{className:"readAllMessage"},c.createElement("button",{className:"message-message-wPostBtn",onClick:ho},"全部标为已读")),c.createElement("div",{className:"message-title"},"我的消息"),c.createElement(Tc.a,null,c.createElement("div",{className:"message-content"},c.createElement("div",{className:"message-nav"},c.createElement(hi.a,{to:"/message/response"},c.createElement("div",{id:"response",className:"nav-div"},"回复我的",c.createElement("div",{className:"message-counterNav displaynone",id:"unreadCount-replyCount1"},e.replyCount))),c.createElement("hr",null),c.createElement(hi.a,{to:"/message/attme"},c.createElement("div",{id:"attme",className:"nav-div"},"@ 我的",c.createElement("div",{className:"message-counterNav displaynone",id:"unreadCount-atCount1"},e.atCount))),c.createElement("hr",null),c.createElement(hi.a,{to:"/message/system"},c.createElement("div",{id:"system",className:"nav-div"},"系统通知",c.createElement("div",{className:"message-counterNav displaynone",id:"unreadCount-systemCount1"},e.systemCount))),c.createElement("hr",null),c.createElement(hi.a,{to:"/message/message"},c.createElement("div",{id:"message",className:"nav-div"},"我的私信",c.createElement("div",{className:"message-counterNav displaynone",id:"unreadCount-messageCount1"},e.messageCount))),c.createElement("hr",null),c.createElement(hi.a,{to:"/message/setting"},c.createElement("div",{id:"setting",className:"nav-div"},"消息设置"))),c.createElement(on.a,{exact:!0,path:"/message",component:Ic}),c.createElement(on.a,{path:"/message/response/:page?",exact:!0,component:Ic}),c.createElement(on.a,{path:"/message/attme/:page?",component:wc}),c.createElement(on.a,{path:"/message/system/:page?",component:Oc}),c.createElement(on.a,{path:"/message/message/:page?",component:yc}),c.createElement(on.a,{path:"/message/setting",component:jc})))))},t}(c.Component),kc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){this.props.userId||($("#user_".concat(this.props.id)).removeAttr("href"),$("#user_".concat(this.props.id)).removeAttr("target"),$("#lastpost_".concat(this.props.id)).removeAttr("href"),$("#lastpost_".concat(this.props.id)).removeAttr("target"))},t.prototype.render=function(){var e="/topic/".concat(this.props.id,"/1"),t="/user/id/".concat(this.props.userId),n="/board/".concat(this.props.boardId),a=this.props.floorCount/10+1,r=parseInt(a),o=this.props.floorCount+10-10*r,s="".concat(r,"#").concat(o);0===o&&(s="".concat(r-1,"#10"));var i="/topic/".concat(this.props.id,"/").concat(s),l="/user/name/".concat(encodeURI(this.props.lastPostUser)),u="",m=this.props.userName;return this.props.tag1?(u=this.props.tag2?"标签：".concat(this.props.tag1," / ").concat(this.props.tag2):"标签：".concat(this.props.tag1),c.createElement("div",{className:"focus-topic"},c.createElement("a",{className:"focus-topic-left",href:t,target:"_blank",id:"user_".concat(this.props.id)},c.createElement("img",{className:"focus-topic-portraitUrl",src:this.props.portraitUrl}),c.createElement("div",{className:"focus-topic-userName"},m)),c.createElement("div",{className:"focus-topic-middle"},c.createElement("a",{className:"focus-topic-title",href:e,target:"_blank"},this.props.title),c.createElement("div",{className:"focus-topic-info"},c.createElement("div",null,u),c.createElement("div",null,c.createElement("i",{className:"fa fa-clock-o fa-lg"}),this.props.time),c.createElement("div",null,c.createElement("i",{className:"fa fa-eye fa-lg"})," ",this.props.hitCount),c.createElement("div",null,"最后回复：",c.createElement("a",{href:l,target:"_blank",id:"lastpost_".concat(this.props.id)},this.props.lastPostUser)),c.createElement("div",null,c.createElement("a",{href:i,target:"_blank"},this.props.lastPostTime)))),c.createElement("div",{className:"focus-topic-rightBar"}),c.createElement("a",{className:"focus-topic-right",href:n,target:"_blank"},c.createElement("div",{className:"focus-topic-board"},this.props.boardName)))):c.createElement("div",{className:"focus-topic"},c.createElement("a",{className:"focus-topic-left",href:t,target:"_blank",id:"user_".concat(this.props.id)},c.createElement("img",{className:"focus-topic-portraitUrl",src:this.props.portraitUrl}),c.createElement("div",{className:"focus-topic-userName"},this.props.userName)),c.createElement("div",{className:"focus-topic-middle"},c.createElement("a",{className:"focus-topic-title",href:e,target:"_blank"},this.props.title),c.createElement("div",{className:"focus-topic-info"},c.createElement("div",null,c.createElement("i",{className:"fa fa-clock-o fa-lg"}),this.props.time),c.createElement("div",null,c.createElement("i",{className:"fa fa-eye fa-lg"})," ",this.props.hitCount),c.createElement("div",null,"最后回复：",c.createElement("a",{href:l,target:"_blank",id:"lastpost_".concat(this.props.id)},this.props.lastPostUser)),c.createElement("div",null,c.createElement("a",{href:i,target:"_blank"},this.props.lastPostTime)))),c.createElement("div",{className:"focus-topic-rightBar"}),c.createElement("a",{className:"focus-topic-right",href:n,target:"_blank"},c.createElement("div",{className:"focus-topic-board"},this.props.boardName)))},t}(c.Component),xc=n(392),Pc=function(e){function t(t){var n=e.call(this,t)||this;return n.imageCount=0,n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){this.props.userId||($("#card_portrait_".concat(this.props.id)).removeAttr("href"),$("#card_portrait_".concat(this.props.id)).removeAttr("target"),$("#card_username_".concat(this.props.id)).removeAttr("href"),$("#card_username_".concat(this.props.id)).removeAttr("target"),$("#card_lastpost_".concat(this.props.id)).removeAttr("href"),$("#card_lastpost_".concat(this.props.id)).removeAttr("target"),$("#card_portrait_image_".concat(this.props.id)).addClass("card-topic-anonymous"))},t.prototype.showOriginalImage=function(e,t){var n=this;void 0===t&&(t=0);var a=e.replace("thumbnail/earlier/","").replace("thumbnail/","");$("#card_original_image_".concat(this.props.id)).attr("src",a),$("#card_original_image_area_".concat(this.props.id)).show(),$("#card_thumbnail_area_".concat(this.props.id)).hide(),this.imageCount>1&&($("#card_thumbnail_mini_area_".concat(this.props.id)).show(),$("#card_thumbnail_mini_image_".concat(this.props.id,"_").concat(t)).addClass("card-topic-thumbnail-mini-clicked"),this.props.mediaContent.thumbnail.forEach((function(e,a,r){t!==a&&$("#card_thumbnail_mini_image_".concat(n.props.id,"_").concat(a)).removeClass("card-topic-thumbnail-mini-clicked")})))},t.prototype.hideOriginalImage=function(){$("#card_original_image_area_".concat(this.props.id)).hide(),$("#card_thumbnail_area_".concat(this.props.id)).show(),this.imageCount>1&&$("#card_thumbnail_mini_area_".concat(this.props.id)).hide()},t.prototype.changeMiniImage=function(e,t){var n=this,a=e.replace("thumbnail/earlier/","").replace("thumbnail/","");$("#card_original_image_".concat(this.props.id)).attr("src",a),$("#card_thumbnail_mini_image_".concat(this.props.id,"_").concat(t)).addClass("card-topic-thumbnail-mini-clicked"),this.props.mediaContent.thumbnail.forEach((function(e,a,r){t!==a&&$("#card_thumbnail_mini_image_".concat(n.props.id,"_").concat(a)).removeClass("card-topic-thumbnail-mini-clicked")}))},t.prototype.convertThumbnail=function(e,t){var n=this;return c.createElement("img",{key:"thumbnail_".concat(e),src:e,onClick:function(){n.showOriginalImage(e,t)}})},t.prototype.render=function(){var e=this,t="/topic/".concat(this.props.id,"/1"),n="/user/id/".concat(this.props.userId),a="/board/".concat(this.props.boardId),r=this.props.floorCount/10+1,o=parseInt(r),s=this.props.floorCount+10-10*o,i="".concat(o,"#").concat(s);0===s&&(i="".concat(o-1,"#10"));var l="/topic/".concat(this.props.id,"/").concat(i),u="/user/name/".concat(encodeURI(this.props.lastPostUser)),m=this.props.userName;this.imageCount=this.props.mediaContent&&this.props.mediaContent.thumbnail?this.props.mediaContent.thumbnail.length>6?6:this.props.mediaContent.thumbnail.length:0;var p,d=null;if(4===this.props.contentType)switch(this.imageCount){case 1:d=c.createElement("div",{className:"card-topic-thumbnail-1"},this.props.mediaContent.thumbnail.map((function(t,n){return c.createElement("img",{key:"thumbnail_".concat(e.props.id,"_").concat(n),src:t,onClick:function(){e.showOriginalImage(t,n)}})})));break;case 2:case 4:d=c.createElement("div",{className:"card-topic-thumbnail-2"},this.props.mediaContent.thumbnail.map((function(t,n){return c.createElement("img",{key:"thumbnail_".concat(e.props.id,"_").concat(n),src:t,onClick:function(){e.showOriginalImage(t,n)}})})));break;case 3:case 5:case 6:d=c.createElement("div",{className:"card-topic-thumbnail-3"},this.props.mediaContent.thumbnail.map((function(t,n){return c.createElement("img",{key:"thumbnail_".concat(e.props.id,"_").concat(n),src:t,onClick:function(){e.showOriginalImage(t,n)}})})))}return c.createElement("div",{className:"card-topic"},c.createElement("a",{className:"card-topic-left",href:n,target:"_blank",id:"card_portrait_".concat(this.props.id)},c.createElement("img",{className:"card-topic-portraitUrl",id:"card_portrait_image_".concat(this.props.id),src:this.props.portraitUrl})),c.createElement("div",{className:"card-topic-middle"},c.createElement("a",{className:"card-topic-userName",href:n,target:"_blank",id:"card_username_".concat(this.props.id)},m),c.createElement("a",{className:"card-topic-time",href:t,target:"_blank"},this.props.time),c.createElement("a",{className:"card-topic-title",href:t,target:"_blank"},this.props.title),c.createElement("div",{className:"card-topic-thumbnail-mini",id:"card_thumbnail_mini_area_".concat(this.props.id)},this.imageCount>1?this.props.mediaContent.thumbnail.map((function(t,n){return c.createElement("img",{key:"thumbnail_mini_".concat(e.props.id,"_").concat(n),id:"card_thumbnail_mini_image_".concat(e.props.id,"_").concat(n),src:t,onClick:function(){e.changeMiniImage(t,n)}})})):null),c.createElement("div",{className:"card-topic-original-image",id:"card_original_image_area_".concat(this.props.id)},c.createElement("img",{src:"",id:"card_original_image_".concat(this.props.id),onClick:function(){e.hideOriginalImage()}})),c.createElement("div",{className:"card-topic-thumbnail",id:"card_thumbnail_area_".concat(this.props.id)},d),3===this.props.contentType?(p=this.props,c.createElement(Uc,{key:"card_audio_".concat(p.id),title:p.title,src:p.mediaContent.audio,userName:p.userName,topicId:p.id})):null,c.createElement("div",{className:"card-topic-board"},c.createElement("div",{className:"card-topic-boardName"},c.createElement("a",{href:a,target:"_blank"},this.props.boardName)),this.props.tag1?c.createElement("div",{className:"card-topic-tag"},this.props.tag1):null,this.props.tag2?c.createElement("div",{className:"card-topic-tag"},this.props.tag2):null),c.createElement("div",{className:"card-topic-info"},c.createElement("div",null,c.createElement("a",{href:t,target:"_blank"},c.createElement("i",{className:"fa fa-eye fa-lg"}),this.props.hitCount)),c.createElement("div",null,c.createElement("a",{href:t,target:"_blank"},c.createElement("i",{className:"fa fa-commenting-o fa-lg"}),this.props.replyCount)),c.createElement("div",null,"最后回复：",c.createElement("a",{href:u,target:"_blank",id:"card_lastpost_".concat(this.props.id)},this.props.lastPostUser)),c.createElement("div",null,c.createElement("a",{href:l,target:"_blank"},this.props.lastPostTime)))))},t}(c.Component),Uc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){try{1,this.ap=new xc({element:this.div,autoplay:!1,preload:"metadata",loop:"none",music:{url:encodeURI(this.props.src),title:this.props.title,author:this.props.userName,pic:"/static/images/audio_cover.png"}})}catch(e){}},t.prototype.componentWillUnmount=function(){this.ap&&this.ap.destroy()},t.prototype.render=function(){var e=this;return c.createElement("div",{className:"aplayer",style:{whiteSpace:"normal",margin:"0 0 15px 0"},ref:function(t){return e.div=t}})},t}(c.Component);var Mc=xs.a.Panel,_c=[{id:763,name:"置顶",order:1,masters:[],boards:[{id:758,name:"似水流年·暑假"},{id:182,name:"心灵之约"},{id:198,name:"新生宝典·军训"},{id:184,name:"论坛指南"}]}],Rc=function(e){var t=e.map((function(e){return Dc(e.name)}));return c.createElement("div",{style:{display:"flex",flexWrap:"wrap",width:"100%"}},e.map((function(e,n){return c.createElement("div",{key:n,style:{width:t[n]?"100%":"50%",paddingBottom:"4px",whiteSpace:"nowrap"},className:"card-topic-area-left-content-collapse-item"},c.createElement(vt.a,{target:"_blank",to:"/board/".concat(e.id),style:{fontSize:"14px"}},"· ",e.name.replace("（","(").replace("）",")")))})))},Dc=function(e){return e.includes("（")?(e=e.replace("（","(").replace("）",")")).length>8:e.length>7},Lc=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:_c},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,gr()];case 1:return null==(e=t.sent())&&null==e||this.setState({data:e}),Fc(),[2]}}))}))},t.prototype.render=function(){return c.createElement("div",{className:""},c.createElement(xs.a,{defaultActiveKey:["1"],bordered:!1},this.state.data.map((function(e){return t=e,c.createElement(Mc,{header:c.createElement("div",{style:{color:"black"}},t.name),key:t.order,className:"card-topic-area-left-content-collapse"},c.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",paddingLeft:t.order<=7?"25px":"0px"}},Rc(t.boards)));var t}))))},t}(c.Component),Fc=function(){var e="down",t="up",n=0,a=0,r=document.querySelector(".card-topic-area-left-content");window.addEventListener("scroll",(function(){var o=document.documentElement.scrollTop||document.body.scrollTop,s=document.documentElement.clientHeight||document.body.clientHeight,i=e;if(a>o&&(i=t),r)if(r.offsetHeight<s)r.style.transform="none";else{if(r.classList.toggle("sticky",o>161.2)){switch(i){case e:(n-=o-a)<-(r.offsetHeight-s+40)&&(n=-(r.offsetHeight-s+40));break;case t:(n+=a-o)>0&&(n=0)}r.style.transform="translateY(".concat(n,"px)")}else n=0,r.style.transform="none";a=o}}))},Bc=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:[]},n.isLoadable=!0,n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:if(null!=(e=ia("CurrentRandomTopics"))&&"undefined"!==e)return[3,5];this.isLoadable=!1,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,_o(10)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),this.isLoadable=!0,[2];case 4:return sa("CurrentRandomTopics",e),this.setState({data:e}),this.isLoadable=!0,[3,6];case 5:this.setState({data:e}),t.label=6;case 6:return[2]}}))}))},t.prototype.getNewRandomTopics=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:if(!this.isLoadable)return[3,5];this.isLoadable=!1,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,_o(10)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),this.isLoadable=!0,[2];case 4:sa("LastRandomTopics",ia("CurrentRandomTopics")),sa("CurrentRandomTopics",e),this.setState({data:e}),document.getElementById("card-recommendation-last").style.visibility="visible",this.isLoadable=!0,t.label=5;case 5:return[2]}}))}))},t.prototype.getLastRandomTopics=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){return null==(e=ia("LastRandomTopics"))&&null==e&&"undefined"==e||(document.getElementById("card-recommendation-last").style.visibility="hidden",this.setState({data:e}),sa("CurrentRandomTopics",e),ca("LastRandomTopics")),[2]}))}))},t.prototype.render=function(){var e=this;return c.createElement(c.Fragment,null,c.createElement("div",{className:"card-recommendation-button-area"},c.createElement("div",{className:"card-user-may-mising-title"},"可能错过"),c.createElement("button",{className:"card-recommendation-button",id:"card-recommendation-last",style:{height:"fit-content",visibility:"hidden",paddingRight:"0",marginRight:"0",marginLeft:"50px"},onClick:function(){return e.getLastRandomTopics()}},c.createElement("i",{className:"fa fa-hand-o-left fa-md"}),"上一批"),c.createElement("button",{className:"card-recommendation-button",id:"card-recommendation-refresh",style:{height:"fit-content",marginRight:"12px"},onClick:function(){return e.getNewRandomTopics()}},c.createElement("i",{className:"fa fa-refresh fa-md"}),"换一换")),null!=this.state.data||null!=this.state.data?Ac(this.state.data):"")},t}(c.Component),Ac=function(e){return e.map((function(e,t){return c.createElement("div",{className:"card-recommendation-topic-container"},c.createElement("div",{className:"card-recommendation-topic-container-item"},c.createElement("div",{className:"card-recommendation-topic"},c.createElement("i",{className:"fa fa-commenting-o","aria-hidden":"true"}),c.createElement("div",{className:"card-recommendation-topic-title"},c.createElement(vt.a,{to:"/topic/".concat(e.id),target:"_blank"},zc(e.title))),c.createElement("div",{className:"card-recommendation-topic-detail"},c.createElement(vt.a,{target:"_blank",to:"/board/".concat(e.boardId)},e.boardName," ")," ",e.hitCount,"浏览 ",e.replyCount,"回复"))))}))},zc=function(e){return e.length>30?e.slice(0,28)+"...":e},Vc=function(e){function t(t){var n=e.call(this,t)||this;return n.isLoadable=!0,n.myInfo=Wa()?ua():null,n.state={data:[],from:0},n.handleScroll=n.handleScroll.bind(n),n.handleFetchNewTopics=n.handleFetchNewTopics.bind(n),n}return Object(i.c)(t,e),t.prototype.getAndSetTopic=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:return this.isLoadable=!1,t=(new Date).getTime(),[4,za(e,this.mediaOnly)];case 1:return(n=o.sent())&&(sa(this.mediaOnly?"AllNewMediaTopic":"AllNewTopic",n),this.setState({data:n,from:n.length})),a=(new Date).getTime(),(r=a-t)<1e3?[4,new Promise((function(e){return setTimeout(e,1e3-r)}))]:[3,3];case 2:o.sent(),o.label=3;case 3:return this.isLoadable=!0,[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){if(!this.myInfo)return[2];switch(this.myInfo.topicViewMode){case 1:this.cardMode(!0);break;case 2:this.mediaOnlyMode(!0);break;default:this.classicMode(!0)}return document.addEventListener("wheel",this.handleFetchNewTopics,{passive:!0}),document.addEventListener("touchmove",this.handleFetchNewTopics,{passive:!0}),document.addEventListener("scroll",this.handleFetchNewTopics,{passive:!0}),document.addEventListener("scroll",this.handleScroll),[2]}))}))},t.prototype.componentWillUnmount=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return document.removeEventListener("scroll",this.handleScroll),document.removeEventListener("scroll",this.handleFetchNewTopics),document.removeEventListener("touchmove",this.handleFetchNewTopics),document.removeEventListener("wheel",this.handleFetchNewTopics),[2]}))}))},t.prototype.scrollToTop=function(){$("body,html").animate({scrollTop:0},500)},t.prototype.handleScroll=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return window.scrollY>234&&($("#scroll-to-top-button").removeClass("btn-disappear"),$("#scroll-to-top-button").addClass("btn-show")),window.scrollY<234&&($("#scroll-to-top-button").removeClass("btn-show"),$("#scroll-to-top-button").addClass("btn-disappear")),[2]}))}))},t.prototype.handleFetchNewTopics=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r=this;return Object(i.d)(this,(function(o){switch(o.label){case 0:if(!rr()||!this.isLoadable)return[3,5];if(this.state.from>199)return $("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),[2];this.isLoadable=!1,o.label=1;case 1:return o.trys.push([1,3,,4]),e=function(e,t,n){if(void 0===n&&(n={}),!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");var a,r,o=[];return function(){for(var s=this,i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return new Promise((function(c){var l=n.leading&&!r;clearTimeout(r),r=setTimeout((function(){r=null;for(var t=n.leading?a:e.apply(s,i),l=0,u=o;l<u.length;l++)(c=u[l])(t);o=[]}),t),l?(a=e.apply(s,i),c(a)):o.push(c)}))}}(za,1e3),[4,e(this.state.from,this.mediaOnly)];case 2:return t=o.sent(),[3,4];case 3:return o.sent(),this.isLoadable=!0,[2];case 4:if(!(t&&t.length>0))return this.isLoadable=!0,[2];for(n=this.state.data,a=0;a<n.length&&n[a].id!==t[0].id;a++);n=n.slice(0,a).concat(t),this.setState({data:n,from:n.length},(function(){r.isLoadable=!0})),sa(this.mediaOnly?"AllNewMediaTopic":"AllNewTopic",n),o.label=5;case 5:return[2]}}))}))},t.prototype.classicMode=function(e){return void 0===e&&(e=!1),Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){switch(t.label){case 0:return this.isLoadable?(e||Mo(0),$("#classic-mode-area").show(),$("#card-mode-area").hide(),$("#new-topic-classic-button").addClass("focus-hover"),$("#new-topic-card-button").removeClass("focus-hover"),$("#new-topic-media-only-button").removeClass("focus-hover"),this.mediaOnly=!1,[4,this.getAndSetTopic(0)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.cardMode=function(e){return void 0===e&&(e=!1),Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){switch(t.label){case 0:return this.isLoadable?(e||Mo(1),$("#classic-mode-area").hide(),$("#card-mode-area").show(),$("#new-topic-classic-button").removeClass("focus-hover"),$("#new-topic-card-button").addClass("focus-hover"),$("#new-topic-media-only-button").removeClass("focus-hover"),this.mediaOnly=!1,[4,this.getAndSetTopic(0)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.mediaOnlyMode=function(e){return void 0===e&&(e=!1),Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){switch(t.label){case 0:return this.isLoadable?(e||Mo(2),$("#classic-mode-area").hide(),$("#card-mode-area").show(),$("#new-topic-classic-button").removeClass("focus-hover"),$("#new-topic-card-button").removeClass("focus-hover"),$("#new-topic-media-only-button").addClass("focus-hover"),this.mediaOnly=!0,[4,this.getAndSetTopic(0)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.getCountString=function(e){if(e>99999)return"".concat(Math.floor(e/1e4),"万");if(e>9999){var t=Math.floor(e/1e4),n=Math.floor(e%1e4/1e3);return"".concat(t,".").concat(n,"万")}return Math.floor(e).toString()},t.prototype.render=function(){var e=this;return c.createElement("div",{className:"focus-root"},c.createElement(an,{title:"查看新帖 - CC98论坛"}),c.createElement("div",{className:"focus"},c.createElement(Yc,null),c.createElement("div",{className:"focus-board-area"},c.createElement("button",{className:"focus-board new-topic focus-hover",id:"new-topic-classic-button",onClick:function(){e.classicMode()}},"经典模式"),c.createElement("button",{className:"focus-board new-topic",id:"new-topic-card-button",onClick:function(){e.cardMode()}},"卡片模式"),c.createElement("button",{className:"focus-board new-topic",id:"new-topic-media-only-button",onClick:function(){e.mediaOnlyMode()}},"只看媒体"),c.createElement("button",{className:"refresh-button",id:"new-topic-refresh-button",onClick:function(){e.isLoadable&&e.getAndSetTopic(0)}},c.createElement("i",{className:"fa fa-refresh fa-md"}),"刷新")),c.createElement("div",{className:"focus-topic-area",id:"classic-mode-area"},c.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(Hc))),c.createElement("div",{className:"card-topic-area",id:"card-mode-area"},c.createElement("div",{className:"card-topic-area-left"},c.createElement("div",{className:"card-topic-area-left-content"},c.createElement("div",{className:"card-user"},c.createElement("div",{className:"card-user-background"}),c.createElement("div",{className:"card-user-portrait"},c.createElement("img",{src:this.myInfo?this.myInfo.portraitUrl:""}),c.createElement("a",{href:"../usercenter",target:"_blank"},this.myInfo?this.myInfo.name:"")),c.createElement("div",{className:"card-user-stats"},c.createElement("div",{className:"card-user-stats-item"},c.createElement("a",{href:"../usercenter",target:"_blank"},this.myInfo?this.getCountString(this.myInfo.postCount):""),"帖数"),c.createElement("div",{className:"card-user-stats-item"},c.createElement("a",{href:"../usercenter/myfollowings",target:"_blank"},this.myInfo?this.getCountString(this.myInfo.followCount):""),"关注"),c.createElement("div",{className:"card-user-stats-item"},c.createElement("a",{href:"../usercenter/myfans",target:"_blank"},this.myInfo?this.getCountString(this.myInfo.fanCount):""),"粉丝"),c.createElement("div",{className:"card-user-stats-item"},c.createElement("a",{href:"../usercenter/myposts/ishot/1/1",target:"_blank"},this.myInfo?this.getCountString(this.myInfo.receivedLikeCount):""),"获赞"))),c.createElement("div",{className:"card-board"},c.createElement("div",{className:"card-board-title"},"版面列表"),c.createElement(Lc,null)))),c.createElement("div",{className:"card-topic-area-middle"},this.mediaOnly?this.state.data.map(Wc):this.state.data.map($c)),c.createElement("div",{className:"card-topic-area-right"},c.createElement("div",{className:"card-user-may-mising"},c.createElement(Bc,null)))),c.createElement("div",{className:"focus-topic-loading",id:"focus-topic-loading"},c.createElement(An.a,{size:"large"})),c.createElement("div",{className:"focus-topic-loaddone displaynone",id:"focus-topic-loaddone"},"无法加载更多了，小水怡情，可不要沉迷哦~"),c.createElement("button",{type:"button",id:"scroll-to-top-button",className:"top-button",onClick:this.scrollToTop},c.createElement("div",{className:"top-button-text"},"回到顶部"))))},t}(c.Component);function Hc(e,t){return c.createElement(kc,{key:"classic_topic_".concat(e.id),title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,lastPostUser:e.lastPostUser,lastPostTime:e.lastPostTime,tag1:e.tag1,tag2:e.tag2,floorCount:e.floorCount,contentType:e.contentType,mediaContent:e.mediaContent})}function $c(e,t){return c.createElement(Pc,{key:"card_topic_".concat(e.id),title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,lastPostUser:e.lastPostUser,lastPostTime:e.lastPostTime,tag1:e.tag1,tag2:e.tag2,floorCount:e.floorCount,contentType:e.contentType,mediaContent:e.mediaContent})}function Wc(e,t){return c.createElement(Pc,{key:"card_topic_media_only_".concat(e.id),title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,lastPostUser:e.lastPostUser,lastPostTime:e.lastPostTime,tag1:e.tag1,tag2:e.tag2,floorCount:e.floorCount,contentType:e.contentType,mediaContent:e.mediaContent})}var Yc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"row",style:{alignItems:"baseline",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement("div",{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"}},"查看新帖"))},t}(c.Component),qc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){this.props.topic.userId||($("#user_".concat(this.props.topic.id)).removeAttr("href"),$("#user_".concat(this.props.topic.id)).removeAttr("target"))},t.prototype.render=function(){var e="/topic/".concat(this.props.topic.id,"/1"),t="/user/id/".concat(this.props.topic.userId),n="/board/".concat(this.props.topic.boardId),a=this.props.topic.floorCount/10+1,r=parseInt(a),o=this.props.topic.floorCount+10-10*r;"".concat(r,"#").concat(o);0===o&&"".concat(r-1,"#10");this.props.topic.userName;return c.createElement("div",{className:"focus-topic"},c.createElement("a",{className:"focus-topic-left",href:t,target:"_blank",id:"user_".concat(this.props.topic.id)},c.createElement("img",{className:"focus-topic-portraitUrl",src:this.props.topic.portraitUrl}),c.createElement("div",{className:"focus-topic-userName"},this.props.topic.userName)),c.createElement("div",{className:"focus-topic-middle"},c.createElement("a",{className:"focus-topic-title",href:e,target:"_blank"},this.props.topic.title),c.createElement("div",{className:"focus-topic-info"},c.createElement("div",null,c.createElement("i",{className:"fa fa-clock-o fa-lg"}),this.props.topic.time),c.createElement("div",{className:"focus-topic-content"},c.createElement("i",{className:"fa fa-commenting-o fa-lg"}),this.props.content))),c.createElement("div",{className:"focus-topic-rightBar"}),c.createElement("a",{className:"focus-topic-right",href:n,target:"_blank"},c.createElement("div",{className:"focus-topic-board"},this.props.topic.boardName)))},t}(c.Component),Jc=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:[]},n.isLoadable=!0,n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:if(e=ia("CurrentRecommendedTopics"))return[3,5];this.isLoadable=!1,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Aa(10)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),this.isLoadable=!0,[2];case 4:return sa("CurrentRecommendedTopics",e),this.setState({data:e}),this.isLoadable=!0,[3,6];case 5:this.setState({data:e}),t.label=6;case 6:return[2]}}))}))},t.prototype.getNewRandomRecommendedTopics=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:if(!this.isLoadable)return[3,5];this.isLoadable=!1,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Aa(10)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),this.isLoadable=!0,[2];case 4:sa("LastRecommendedTopics",ia("CurrentRecommendedTopics")),sa("CurrentRecommendedTopics",e),this.setState({data:e}),document.getElementById("recommendation-last").hidden=!1,this.isLoadable=!0,t.label=5;case 5:return[2]}}))}))},t.prototype.getLastRemcommendedTopics=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){return(e=ia("LastRecommendedTopics"))&&(document.getElementById("recommendation-last").hidden=!0,this.setState({data:e}),sa("CurrentRecommendedTopics",e),ca("LastRecommendedTopics")),[2]}))}))},t.prototype.render=function(){var e=this;return c.createElement("div",{className:"focus-root"},c.createElement(an,{title:"随机精选 - CC98论坛"}),c.createElement("div",{className:"focus"},c.createElement(Qc,null),c.createElement("div",{className:"recommendation-button-area"},c.createElement("button",{className:"recommendation-button",id:"recommendation-refresh",onClick:function(){return e.getNewRandomRecommendedTopics()}},c.createElement("i",{className:"fa fa-refresh fa-md"}),"换一换"),c.createElement("button",{className:"recommendation-button",id:"recommendation-last",hidden:!0,onClick:function(){return e.getLastRemcommendedTopics()}},c.createElement("i",{className:"fa fa-hand-o-left fa-md"}),"上一批")),c.createElement("div",{className:"focus-topic-area"},c.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(Gc)))))},t}(c.Component);function Gc(e,t){return c.createElement(qc,{key:e.topic.id,topic:e.topic,content:e.content})}var Qc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"row",style:{alignItems:"baseline",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement("div",{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"}},"随机精选"))},t}(c.Component),Kc=function(e){function t(t){var n=e.call(this,t)||this,a=ia("focusBoard_".concat(n.props.id));return a||(a=[]),n.isLoadable=!0,n.state={data:a,from:0,stop:!1},n.handleScroll=n.handleScroll.bind(n),n.handleFetchNewTopics=n.handleFetchNewTopics.bind(n),n}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.getData(e),[2]}))}))},t.prototype.scrollToTop=function(){$("body,html").animate({scrollTop:0},500)},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return this.getData(this.props),[2]}))}))},t.prototype.getData=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,Va(e.id,e.name,0,this.context.router)];case 1:return(t=n.sent())&&(this.setState({data:t,from:t.length}),sa("focusBoard_".concat(e.id),t)),document.addEventListener("wheel",this.handleFetchNewTopics,{passive:!0}),document.addEventListener("touchmove",this.handleFetchNewTopics,{passive:!0}),document.addEventListener("scroll",this.handleFetchNewTopics,{passive:!0}),document.addEventListener("scroll",this.handleScroll),[2]}}))}))},t.prototype.componentWillUnmount=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return document.removeEventListener("scroll",this.handleScroll),document.removeEventListener("scroll",this.handleFetchNewTopics),document.removeEventListener("touchmove",this.handleFetchNewTopics),document.removeEventListener("wheel",this.handleFetchNewTopics),[2]}))}))},t.prototype.handleScroll=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return window.scrollY>234&&($("#scroll-to-top-button").removeClass("btn-disappear"),$("#scroll-to-top-button").addClass("btn-show")),window.scrollY<234&&($("#scroll-to-top-button").removeClass("btn-show"),$("#scroll-to-top-button").addClass("btn-disappear")),[2]}))}))},t.prototype.handleFetchNewTopics=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a=this;return Object(i.d)(this,(function(r){switch(r.label){case 0:if(this.isLoadable,!rr()||!this.isLoadable)return[3,6];if(this.state.stop||this.state.from>199)return $("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),[2];this.isLoadable=!1,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,Va(this.props.id,this.props.name,this.state.from,this.context.router)];case 2:return e=r.sent(),[3,5];case 3:return r.sent(),this.isLoadable=!0,[2];case 4:return 0===e.length&&this.setState({stop:!0}),[7];case 5:if(e&&e.length>0){for(t=this.state.data,n=0;n<t.length&&t[n].id!==e[0].id;n++);t=t.slice(0,n).concat(e),this.setState({data:t,from:t.length},(function(){a.isLoadable=!0})),sa("focusBoard_".concat(this.props.id),t)}return this.isLoadable=!0,[2];case 6:return[2]}}))}))},t.prototype.render=function(){return c.createElement("div",null,c.createElement("div",{className:"focus-topic-area"},c.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(Xc)),c.createElement("div",{className:"focus-topic-loading",id:"focus-topic-loading"},c.createElement(An.a,{size:"large"})),c.createElement("div",{className:"focus-topic-loaddone displaynone",id:"focus-topic-loaddone"},"无法加载更多了，小水怡情，可不要沉迷哦~"),c.createElement("button",{type:"button",id:"scroll-to-top-button",className:"top-button",onClick:this.scrollToTop},c.createElement("div",{style:{display:"flex"}},"回到顶部"))))},t}(c.Component);function Xc(e){return c.createElement(kc,{key:e.id,title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,lastPostUser:e.lastPostUser,lastPostTime:e.lastPostTime,tag1:e.tag1,tag2:e.tag2,floorCount:e.floorCount,contentType:e.contentType,mediaContent:e.mediaContent})}var Zc=function(e){function t(t){var n=e.call(this,t)||this;n.convertFocusBoard=function(e){return c.createElement("div",{key:e.id,className:"focus-board",id:"focusBoard_".concat(e.id)},e.name)};var a=ia("focusBoardList");a||(a=[]);var r=ia("currentFocusBoard"),o=0,s="全站帖子";return r&&(o=r.boardId,s=r.boardName),n.state={data:a,currentBoardId:o,currentBoardName:s},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s,c,l;return Object(i.d)(this,(function(i){switch(i.label){case 0:e=[],t=ma(),n=ua(),a=n.customBoards,(new Headers).append("Authorization",t),r=0,o=a,i.label=1;case 1:return r<o.length?[4,$a(s=o[r])]:[3,4];case 2:c=i.sent(),e.push({id:s,name:c}),i.label=3;case 3:return r++,[3,1];case 4:return this.setState({data:e}),sa("focusBoardList",e),$("#focusBoard_".concat(this.state.currentBoardId)).addClass("focus-hover"),l=this,$(".focus-board").click((function(){var e=this.id.slice(11);sa("currentFocusBoard",{boardId:e,boardName:this.innerHTML}),$(".focus-board").removeClass("focus-hover"),$(this).addClass("focus-hover"),l.setState({currentBoardId:parseInt(e),currentBoardName:this.innerHTML})})),$(".focus-board").dblclick((function(){var e=this.id.slice(11);proxyLoc(window.location).href="/board/".concat(e)})),$("#myFocusUser").removeClass("focus-title-hover"),$("#myFocusFavorite").removeClass("focus-title-hover"),$("#myFocusBoard").addClass("focus-title-hover"),[2]}}))}))},t.prototype.render=function(){return c.createElement("div",null,c.createElement("div",{className:"focus-board-area"},c.createElement("div",{className:"focus-board",id:"focusBoard_0"},"全部帖子"),this.state.data.map(this.convertFocusBoard),c.createElement("div",{className:"focus-boardTip"},"提示：单击版面标签可切换下方展示内容，双击可直接进入版面")),c.createElement(Kc,{id:this.state.currentBoardId,name:this.state.currentBoardName}))},t}(c.Component),el=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){$("#myFocusBoard").removeClass("focus-title-hover"),$("#myFocusFavorite").removeClass("focus-title-hover"),$("#myFocusUser").addClass("focus-title-hover")},t.prototype.render=function(){return c.createElement("div",null,c.createElement(Kc,{id:-1,name:"关注用户"}))},t}(c.Component),tl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){$("#myFocusBoard").removeClass("focus-title-hover"),$("#myFocusUser").removeClass("focus-title-hover"),$("#myFocusFavorite").addClass("focus-title-hover")},t.prototype.render=function(){return c.createElement("div",null,c.createElement(Kc,{id:-2,name:"收藏主题"}))},t}(c.Component),nl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"focus-root"},c.createElement(an,{title:"我的关注 - CC98论坛"}),c.createElement(Tc.a,null,c.createElement("div",{className:"focus"},c.createElement("div",{className:"focus-nav"},c.createElement(vt.a,{style:{textDecoration:"none"},to:"/focus/board"}," ",c.createElement("div",{className:"focus-title",id:"myFocusBoard"},"关注版面")),c.createElement(vt.a,{style:{textDecoration:"none"},to:"/focus/user"}," ",c.createElement("div",{className:"focus-title",id:"myFocusUser"},"关注用户")),c.createElement(vt.a,{style:{textDecoration:"none"},to:"/focus/favorite"}," ",c.createElement("div",{className:"focus-title",id:"myFocusFavorite"},"收藏更新"))),c.createElement(on.a,{exact:!0,path:"/focus",component:Zc}),c.createElement(on.a,{path:"/focus/board",component:Zc}),c.createElement(on.a,{path:"/focus/user",component:el}),c.createElement(on.a,{path:"/focus/favorite",component:tl}))))},t}(c.Component),al=nl,rl=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hoverElement:null},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){var e=this;window.addEventListener("storage",(function(t){if("userInfo"===t.key){if(t.oldValue===t.newValue)return;t.newValue?e.props.reLogOn(JSON.parse(t.newValue.slice(4))):e.props.logOff()}})),Wa()&&this.props.refreshCurrentMessageCount(),Wa()&&!pa("shouldNotRefreshUserInfo")&&(this.props.refreshUserInfo(),la("shouldNotRefreshUserInfo",!0,86400))},t.prototype.logOff=function(){this.handleMouseEvent("mouseout","userName"),da("accessToken"),da("refresh_token"),da("userInfo"),da("usePWA"),ca("all"),Eo(0),this.props.logOff()},t.prototype.handleMouseEvent=function(e,t){switch(e){case"mouseover":this.setState({hoverElement:t});break;case"mouseout":this.setState({hoverElement:null})}},t.prototype.render=function(){var e=this;if(this.props.isLogOn){var t=this.props.messageCount.atCount+this.props.messageCount.messageCount+this.props.messageCount.replyCount+this.props.messageCount.systemCount,n={display:"block",transitionDuration:".2s",height:"0px"},a="管理员"===this.props.userInfo.privilege?c.createElement(vt.a,{to:"/sitemanage",style:{color:"#fff"}},c.createElement("li",null,"全站管理")):null,r="topBarUserCenter";"/"===location.pathname&&(r="topBarUserCenter-mainPage");var o="topBarMessageDetails";"/"===location.pathname&&(o="topBarMessageDetails-mainPage");var s="签到",l=ua();return l&&pa("signin_".concat(l.id))&&(s="已签到"),c.createElement("div",{className:"topBarRight"},c.createElement("div",{className:"topBarUserInfo"},c.createElement("div",{className:"topBarMessage",id:"userMessage",onMouseOut:function(t){e.handleMouseEvent(t.type,"message")},onMouseOver:function(t){e.handleMouseEvent(t.type,"message")}},c.createElement(vt.a,{to:"/message/response",className:"messageTopBar"},c.createElement("div",{className:"topBarBell"}," ",c.createElement("i",{className:"fa fa-bell-o"})),t?c.createElement("div",{className:"message-counter",id:"unreadCount-totalCount"},t):null)),c.createElement("div",{className:"topBarUserImg",onMouseOut:function(t){e.handleMouseEvent(t.type,"userName")},onMouseOver:function(t){e.handleMouseEvent(t.type,"userName")}},c.createElement("img",{src:this.props.userInfo.portraitUrl})),c.createElement("div",{className:"topBarUserName",onMouseOut:function(t){e.handleMouseEvent(t.type,"userName")},onMouseOver:function(t){e.handleMouseEvent(t.type,"userName")}},this.props.userInfo.name)),c.createElement("div",{className:r,onMouseOut:function(t){e.handleMouseEvent(t.type,"userName")},onMouseOver:function(t){e.handleMouseEvent(t.type,"userName")},style:Object(i.a)(Object(i.a)({},n),{overflow:"hidden",height:"userName"===this.state.hoverElement?"8rem":"0"})},c.createElement("ul",{style:{display:"inherit"}},c.createElement(vt.a,{to:"/usercenter"}," ",c.createElement("li",null,"个人中心")),a,c.createElement(vt.a,{to:"/signin"},c.createElement("li",null,s)),c.createElement("li",{onClick:this.logOff.bind(this)},"注销"))),c.createElement("div",{className:o,onMouseOut:function(t){e.handleMouseEvent(t.type,"message")},onMouseOver:function(t){e.handleMouseEvent(t.type,"message")},style:Object(i.a)(Object(i.a)({},n),{overflow:"hidden",height:"message"===this.state.hoverElement?"8rem":"0"})},c.createElement("ul",{style:{display:"inherit"}},c.createElement(vt.a,{to:"/message/response"},c.createElement("li",null,"回复我的",this.props.messageCount.replyCount?c.createElement("div",{className:"message-counterLi"},this.props.messageCount.replyCount):null)),c.createElement(vt.a,{to:"/message/attme"},c.createElement("li",null,"@ 我的",this.props.messageCount.atCount?c.createElement("div",{className:"message-counterLi"},this.props.messageCount.atCount):null)),c.createElement(vt.a,{to:"/message/system"},c.createElement("li",null,"系统通知",this.props.messageCount.systemCount?c.createElement("div",{className:"message-counterLi"},this.props.messageCount.systemCount):null)),c.createElement(vt.a,{to:"/message/message"},c.createElement("li",null,"我的私信",this.props.messageCount.messageCount?c.createElement("div",{className:"message-counterLi"},this.props.messageCount.messageCount):null)))))}return c.createElement("div",{className:"topBarUserInfo"},c.createElement("div",{className:"topBarText"}," ",c.createElement(vt.a,{onClick:function(){localStorage.setItem("logOnRedirectUrl",proxyLoc(window.location).href)},to:"/logOn"},"登录")),c.createElement("div",{className:"topBarText"},c.createElement("a",{href:"https://account.cc98.org/"},"注册")))},t}(c.Component);var ol=Object(Ia.b)((function(e){return{userInfo:e.userInfo.currentUserInfo,isLogOn:e.userInfo.isLogOn,messageCount:e.message}}),(function(e){return{logOff:function(){e(zo.userLogOff())},reLogOn:function(t){Eo(t.theme),e(zo.changeUserInfo(t)),e(zo.userLogIn())},refreshUserInfo:function(){e(Ci())},refreshCurrentMessageCount:function(){e(bc())}}}))(rl),sl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o=this;return Object(i.d)(this,(function(s){return e=ve(".searchBoxSelect"),t=ve(".caret-down"),n=ve(".searchBoxSub"),a=ve(".searchIco"),r=n.find("li"),ve(document).click((function(){n.css("display","none")})),e.click((function(){return"block"===n.css("display")?n.css("display","none"):n.css("display","block"),!1})),t.click((function(){return"block"===n.css("display")?n.css("display","none"):n.css("display","block"),!1})),r.click((function(){e.text(ve(this).text())})),r.mouseover((function(){this.className="hover"})),r.mouseout((function(){this.className=""})),this,a.click((function(){return Object(i.b)(o,void 0,void 0,(function(){var t,n,a,r,o,s,c;return Object(i.d)(this,(function(i){switch(i.label){case 0:return(t=ve("#searchText").val())&&""!=t?"主题"!==e.text()&&"全站"!==e.text()?[3,1]:(this.props.history.push("/search?boardId=0&keyword=".concat(encodeURI(encodeURI(t)))),[3,8]):[3,8];case 1:return"版内"!==e.text()?[3,5]:(n=proxyLoc(location).href.match(/\/topic\/(\d+)/),a=proxyLoc(location).href.match(/\/board\/(\d+)/),r=proxyLoc(location).href.match(/\/search\?boardId=(\d+)&/),o=0,n?[4,$r(n[1])]:[3,3]);case 2:return s=i.sent(),o=s.boardId,[3,4];case 3:a?o=parseInt(a[1]):r&&(o=parseInt(r[1]),r[1]),i.label=4;case 4:return this.props.history.push("/search?boardId=".concat(o,"&keyword=").concat(encodeURI(encodeURI(t)))),[3,8];case 5:return"用户"!==e.text()?[3,7]:[4,va(t)];case 6:return(c=i.sent())?this.props.history.push("/user/id/".concat(c.id)):this.props.history.push("/search"),[3,8];case 7:"版面"===e.text()&&this.props.history.push("/searchBoard?keyword=".concat(encodeURI(encodeURI(t)))),i.label=8;case 8:return[2]}}))}))})),[2]}))}))},t.prototype.keypress_submit=function(e){var t=e||window.event;(13===(t.which||t.keyCode||t.charCode)||"Enter"===t.key)&&ve(".searchIco").click()},t.prototype.render=function(){var e=proxyLoc(location).href.match(/\/topic\/(\d+)/),t=proxyLoc(location).href.match(/\/board\/(\d+)/),n=proxyLoc(location).href.match(/\/(searchBoard)/),a=proxyLoc(location).href.match(/\/search\?boardId=(\d+)/),r=1;return e||t?r=0:n||a&&0!==parseInt(a[1])&&(r=0),r?c.createElement("div",{id:"search"},c.createElement("div",{className:"box"},c.createElement("div",{className:"searchBoxSelect"},"主题"),c.createElement("div",{className:"caret-down"},c.createElement("i",{className:"fa fa-caret-down"})),c.createElement("input",{id:"searchText",type:"text",placeholder:"请输入搜索内容",onKeyPress:this.keypress_submit}),c.createElement("div",{className:"searchIco"},c.createElement("i",{className:"fa fa-search"}))),c.createElement("ul",{className:"searchBoxSub"},c.createElement("li",null,"主题"),c.createElement("li",null,"用户"),c.createElement("li",null,"版面"),c.createElement("li",{style:{display:"none"}}))):c.createElement("div",{id:"search"},c.createElement("div",{className:"box"},c.createElement("div",{className:"searchBoxSelect"},"版内"),c.createElement("div",{className:"caret-down"},c.createElement("i",{className:"fa fa-caret-down"})),c.createElement("input",{id:"searchText",type:"text",placeholder:"请输入搜索内容",onKeyPress:this.keypress_submit}),c.createElement("div",{className:"searchIco"},c.createElement("i",{className:"fa fa-search"}))),c.createElement("ul",{className:"searchBoxSub"},c.createElement("li",null,"版内"),c.createElement("li",null,"全站"),c.createElement("li",null,"用户"),c.createElement("li",null,"版面")))},t}(c.Component),il=Object(qo.a)(sl),cl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return"/"===location.pathname?c.createElement("div",{className:"header"},c.createElement("div",{className:"topBar-mainPage"},c.createElement("div",{className:"topBarRow"},c.createElement("div",{className:"row",style:{display:"flex",flexDirection:"row",alignItems:"center"}},c.createElement("div",{className:"topBarLogo"},c.createElement(vt.a,{to:"/"},c.createElement("img",{src:"/static/images/98LOGO.ico"}))),c.createElement("div",{className:"topBarCC98"},c.createElement(vt.a,{to:"/"},"CC98论坛")),c.createElement("div",{className:"topBarText"},"|"),c.createElement("div",{className:"topBarText"},c.createElement(vt.a,{to:"/boardList"},"版面列表")),c.createElement("div",{className:"topBarText"},c.createElement(vt.a,{to:"/newTopics"},"新帖")),c.createElement("div",{className:"topBarText"},c.createElement(vt.a,{to:"/focus"},"关注")),c.createElement("div",{className:"topBarText"},c.createElement(vt.a,{to:"/recommendedTopics"},"精选")),c.createElement(on.a,{component:il})),c.createElement(ol,null)))):c.createElement("div",{className:"headerWithoutImage"},c.createElement("div",{className:"topBar"},c.createElement("div",{className:"topBarRow"},c.createElement("div",{className:"row",style:{display:"flex",flexDirection:"row",alignItems:"center"}},c.createElement("div",{className:"topBarLogo"},c.createElement(vt.a,{to:"/"},c.createElement("img",{src:"/static/images/98LOGO.ico"}))),c.createElement("div",{className:"topBarCC98"},c.createElement(vt.a,{to:"/"},"CC98论坛")),c.createElement("div",{className:"topBarText"},"|"),c.createElement("div",{className:"topBarText"},c.createElement(vt.a,{to:"/boardList"},"版面列表")),c.createElement("div",{className:"topBarText"},c.createElement(vt.a,{to:"/newTopics"},"新帖")),c.createElement("div",{className:"topBarText"},c.createElement(vt.a,{to:"/focus"},"关注")),c.createElement("div",{className:"topBarText"},c.createElement(vt.a,{to:"/recommendedTopics"},"精选")),c.createElement(on.a,{component:il})),c.createElement(ol,null))))},t}(c.Component),ll=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"footer"},c.createElement("div",{className:"column"},c.createElement("div",{className:"footerRow"},c.createElement("div",{style:{marginRight:"15px",color:"#000"}},"友情链接"),c.createElement("a",{href:"http://www.zju.edu.cn",target:"_blank"},"浙江大学"),"|",c.createElement("a",{href:"http://xcb.zju.edu.cn",target:"_blank"},"党委宣传部"),"|",c.createElement("a",{href:"http://www.cs.zju.edu.cn",target:"_blank"},"计算机学院"),"|",c.createElement("a",{href:"http://www.nexushd.org",target:"_blank"},"NexusHD高清社区"),"|",c.createElement("a",{href:"http://www.qsc.zju.edu.cn",target:"_blank"},"求是潮"),"|",c.createElement("a",{href:"https://zjuers.com",target:"_blank"},"ZJUers轻首页")),c.createElement("div",{className:"footerRowLight"},c.createElement("a",{href:"https://www.zdgd.zju.edu.cn",target:"_blank"},"浙江大学广播电视网"),"|",c.createElement("a",{href:"http://www.zju88.org/agent/index.do",target:"_blank"},"飘渺水云间"),"|",c.createElement("a",{href:"http://luckweb.057101.com/bt2/index.asp",target:"_blank"},"缘网")),c.createElement("div",{className:"footerRow"},"Copyright © 2003-",(new Date).getFullYear()," CC98 Durian v3.5.0 | ",c.createElement("a",{href:"mailto:contact@cc98.org"},"Email: contact@cc98.org"))))},t}(c.Component),ul=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"user-center-navigation",id:"userCenterNavigation"},c.createElement("ul",null,c.createElement("li",null,c.createElement(vt.a,{to:"/user/id/".concat(this.props.id),className:"exact"===this.props.currentVisitingUserPage?"user-center-navigation-active fa-home":"fa-home"},c.createElement("span",{style:{width:"0.5rem"}}),"主页")),c.createElement("hr",null),"管理员"===this.props.isManager?c.createElement("li",null,c.createElement(vt.a,{to:"/user/id/".concat(this.props.id,"/manage"),className:"manage"===this.props.currentVisitingUserPage?"user-center-navigation-active fa-cog":"fa-cog"},c.createElement("span",{style:{width:"0.5rem"}}),"管理")):null))},t}(c.Component);var ml=Object(Ia.b)((function(e){return{isManager:e.userInfo.currentUserInfo.privilege,currentVisitingUserPage:e.userInfo.currentVisitingUserPage,id:e.userInfo.currentVisitingUserId}}))(ul),pl=function(){},dl=function(e){function t(t){var n=e.call(this,t)||this;return n.state={ForumUserOperation:new pl,info:""},n}return Object(i.c)(t,e),t.prototype.handleForumUserOperationChange=function(e,t){this.setState((function(n){var a;return{ForumUserOperation:Object(i.a)(Object(i.a)({},n.ForumUserOperation),(a={},a[e]=t,a))}}))},t.prototype.handleSubmit=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l;return Object(i.d)(this,(function(u){switch(u.label){case 0:t=this.state.ForumUserOperation,n=t.Days,a=t.PunishmentType,u.label=1;case 1:if(u.trys.push([1,4,,5]),!this.state.ForumUserOperation.Reason)throw new Error("请填写理由");if(!e&&3===a&&(n<-1||n>1e3||n<7&&n>-1))throw new Error("不合法的TP天数");return r="/user/".concat(this.props.id,"/operation"),[4,ha()];case 2:return o=u.sent(),(s=new Headers).append("Authorization",o),s.append("Content-Type","application/json"),[4,ga(r,{method:"PUT",headers:s,body:JSON.stringify(Object(i.a)(Object(i.a)({},this.state.ForumUserOperation),{OperationType:e?0:1}))})];case 3:if(!(c=u.sent()).ok)throw new Error(c.statusText);return this.setState({info:"操作成功"}),[3,5];case 4:return l=u.sent(),this.setState({info:l.message}),[3,5];case 5:return[2]}}))}))},t.prototype.render=function(){var e=this;return c.createElement("div",null,c.createElement("h2",null,"TP"),c.createElement("div",{className:"user-manager"},c.createElement("p",null,"OperationType: "),c.createElement("select",{value:this.state.ForumUserOperation.PunishmentType||0,onChange:function(t){e.handleForumUserOperationChange("PunishmentType",Number.parseInt(t.target.value))}},c.createElement("option",{value:0,disabled:!0},"未选择"),c.createElement("option",{value:1},"锁定"),c.createElement("option",{value:2},"屏蔽"),c.createElement("option",{value:3},"TP")),c.createElement("p",null,"Reason: "),c.createElement("input",{type:"text",onChange:function(t){e.handleForumUserOperationChange("Reason",t.target.value)},value:this.state.ForumUserOperation.Reason}),c.createElement("p",null,"Days: "),c.createElement("input",{type:"number",onChange:function(t){e.handleForumUserOperationChange("Days",Number.parseInt(t.target.value))},value:this.state.ForumUserOperation.Days}),c.createElement("button",{type:"button",onClick:function(){e.handleSubmit(!1)}},"提交"),c.createElement("button",{type:"button",onClick:function(){e.handleSubmit(!0)}},"解除")),c.createElement("p",{className:"user-manage-return"},this.state.info))},t}(c.Component),hl=function(e){function t(t){var n=e.call(this,t)||this;return n.state={days:0,info:""},n}return Object(i.c)(t,e),t.prototype.handleSubmit=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,4,,5]),t=e?"post":"topic",n=this.props.id,(a=this.state.days)<1||a>365)throw new Error("请检查日期");return r="/user/".concat(n,"/").concat(t,"?days=").concat(a),[4,ha()];case 1:return o=i.sent(),(s=new Headers).append("Authorization",o),[4,ga(r,{method:"DELETE",headers:s})];case 2:return[4,i.sent().json()];case 3:return c=i.sent(),this.setState({info:"删掉了".concat(c,"条").concat(t)}),[3,5];case 4:return l=i.sent(),this.setState({info:l.message}),[3,5];case 5:return[2]}}))}))},t.prototype.render=function(){var e=this;return c.createElement("div",null,c.createElement("h2",null,"删除用户最近主题与回帖"),c.createElement("div",{className:"user-manager"},c.createElement("p",null,"天数："),c.createElement("input",{type:"number",onChange:function(t){e.setState({days:Number.parseInt(t.target.value)})},value:this.state.days}),c.createElement("button",{type:"button",onClick:function(){e.handleSubmit(!1)}},"删主题"),c.createElement("button",{type:"button",onClick:function(){e.handleSubmit(!0)}},"删回复")),c.createElement("p",{className:"user-manage-return"},this.state.info))},t}(c.Component),fl=function(e){function t(t){var n=e.call(this,t)||this;return n.state={info:"",count:0,from:0,isLoading:!1,days:1,posts:[]},n}return Object(i.c)(t,e),t.prototype.handleSubmit=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u=this;return Object(i.d)(this,(function(m){switch(m.label){case 0:return m.trys.push([0,5,,6]),this.setState({isLoading:!0}),[4,ha()];case 1:return t=m.sent(),n=this.props.id,a=this.state.days,r="/User/".concat(n,"/post?days=").concat(a,"&from=").concat(e,"&size=10"),(o=new Headers).append("Authorization",t),[4,ga(r,{headers:o})];case 2:return[4,m.sent().json()];case 3:return s=m.sent(),c=s.postInfos.map((function(e){return Object(i.b)(u,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return t=[Object(i.a)({},e)],n={},[4,$a(e.boardId)];case 1:return[2,i.a.apply(void 0,t.concat([(n.boardName=a.sent(),n)]))]}}))}))})),[4,Promise.all(c)];case 4:return c=m.sent(),this.setState({posts:c,isLoading:!1,count:s.count,info:0===c.length?"啥也没有":"",from:e}),[3,6];case 5:return l=m.sent(),this.setState({info:l.message,isLoading:!1}),[3,6];case 6:return[2]}}))}))},t.prototype.render=function(){var e=this;return c.createElement("div",null,c.createElement("h2",null,"查看用户最近发言"),c.createElement("div",{className:"user-manager"},c.createElement("p",null,"天数："),c.createElement("input",{type:"number",onChange:function(t){e.setState({days:Number.parseInt(t.target.value)})},value:this.state.days}),c.createElement("button",{type:"button",onClick:function(){e.handleSubmit(0)}},"查看"),c.createElement("button",{type:"button",disabled:0===this.state.from,onClick:function(){e.handleSubmit(e.state.from-10)}},"上一页"),c.createElement("button",{type:"button",disabled:this.state.from+this.state.posts.length===this.state.count,onClick:function(){e.handleSubmit(e.state.from+10)}},"下一页")),c.createElement("div",{className:"user-manage-return"},c.createElement("p",null,this.state.info)),this.state.isLoading?c.createElement("div",{className:"user-center-loading"},c.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"})):c.createElement("div",null,this.state.posts.map((function(e){return c.createElement("div",{className:"user-manage-post",key:e.topicId},c.createElement("p",{className:"user-manage-post-date"},e.time.slice(0,19).replace("T"," ")),-1===e.floor?c.createElement("p",{className:"user-manage-post-content",title:e.content.slice(0,1e3)},e.content):c.createElement(vt.a,{className:"user-manage-post-content",to:"/topic/".concat(e.topicId,"/").concat(Math.floor((e.floor-1)/10)+1,"#").concat(e.floor%10==0?10:e.floor%10),title:e.content.slice(0,1e3),target:"_blank"},e.content),c.createElement(vt.a,{className:"user-manage-post-board",to:"/board/".concat(e.boardId),target:"_blank"},e.boardName),c.createElement("p",{className:"user-manage-post-floor"},-1===e.floor?"已删除":e.floor),c.createElement("p",{className:"user-manage-post-ip"},e.ip))})),this.state.posts.length>0?c.createElement("p",{style:{textAlign:"right"}},"总共有",this.state.count,"条帖子，当前显示第",Math.floor(this.state.from/10)+1,"页，共",Math.floor(this.state.count/10)+1,"页"):null))},t}(c.Component),gl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:e=0===this.props.id?Number.parseInt(this.props.match.params.id):this.props.id,this.props.changePage("manage",e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,va(e)];case 2:return t=n.sent(),this.setState({userInfo:t}),[3,4];case 3:return n.sent(),this.props.notFoundUser(),[3,4];case 4:return[2]}}))}))},t.prototype.render=function(){return this.state?c.createElement("div",{className:"user-manage"},c.createElement("div",{className:"user-manage-infos"},c.createElement("h2",null,"用户信息"),c.createElement("div",{className:"user-manage-info"},c.createElement("p",null,"id:",this.state.userInfo.id),c.createElement("p",null,"name: ",this.state.userInfo.name))),c.createElement(dl,{id:this.props.id}),c.createElement(hl,{id:this.props.id}),c.createElement(fl,{id:this.props.id})):c.createElement("div",{className:"user-center-loading"},c.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}))},t}(c.Component);var bl=Object(Ia.b)((function(e){return{id:e.userInfo.currentVisitingUserId}}),(function(e){return{changePage:function(t,n){e(ee(t,n))},notFoundUser:function(){e(J())}}}))(Object(qo.a)(gl)),vl=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isFollowing:t.userInfo.isFollowing,buttonIsDisabled:!1,buttonInfo:t.userInfo.isFollowing?"已关注":"关注"},n.unfollow=n.unfollow.bind(n),n.follow=n.follow.bind(n),n}return Object(i.c)(t,e),t.prototype.getPrivilegeColor=function(){switch(this.props.userInfo.privilege){case"注册用户":return"grey";case"超级版主":return"pink";case"全站贵宾":return"blue";case"管理员":return"red"}},t.prototype.follow=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return this.setState({buttonIsDisabled:!0,buttonInfo:"关注中"}),[4,ir(this.props.userInfo.id)];case 1:return!0===(e=t.sent())?this.setState({buttonIsDisabled:!1,buttonInfo:"已关注",isFollowing:!0}):"follow_count_limited"===e?this.setState({buttonIsDisabled:!1,buttonInfo:"已达上限",isFollowing:!1}):this.setState({buttonIsDisabled:!1,buttonInfo:"关注失败",isFollowing:!1}),[2]}}))}))},t.prototype.unfollow=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return this.setState({buttonIsDisabled:!0,buttonInfo:"取关中"}),[4,cr(this.props.userInfo.id)];case 1:return!0===e.sent()?this.setState({buttonIsDisabled:!1,buttonInfo:"重新关注",isFollowing:!1}):this.setState({buttonIsDisabled:!1,buttonInfo:"取关失败",isFollowing:!0}),[2]}}))}))},t.prototype.render=function(){var e=this,t=!1;if(this.props.userInfo.birthday){var n=this.props.userInfo.birthday.match(/\d+-(\d+)-(\d+)/),a=new Date;Number.parseInt(n[1])===a.getMonth()+1&&Number.parseInt(n[2])===a.getDate()&&(t=!0)}return c.createElement("div",{className:"user-profile"},c.createElement("div",{id:"userId"},c.createElement("div",{id:"userId"},c.createElement("p",null,this.props.userInfo.name,c.createElement("span",{style:{fontSize:"12px",color:this.getPrivilegeColor(),marginLeft:"2rem"}},this.props.userInfo.privilege)),c.createElement("div",{className:"row"},c.createElement(As.a,{color:"grey",style:{width:"5rem",textAlign:"center",marginRight:0,height:"2rem",borderTopRightRadius:0,borderBottomRightRadius:0,fontSize:16,lineHeight:"2rem"}},"收到的赞"),c.createElement(As.a,{className:"board-head-information",style:{width:"5rem",height:"2rem",textAlign:"center",marginRight:0,borderLeft:0,borderTopLeftRadius:0,borderBottomLeftRadius:0,fontSize:16,lineHeight:"2rem"}},this.props.userInfo.receivedLikeCount)),c.createElement(vt.a,{to:"/message/message?id=".concat(this.props.userInfo.id)},c.createElement("button",{type:"button"},"私信")),c.createElement("button",{type:"button",id:this.state.isFollowing?"unfollow":"",onClick:this.state.isFollowing?this.unfollow:this.follow,disabled:this.state.buttonIsDisabled,onMouseOver:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"取消关注"})},onMouseLeave:function(){e.state.isFollowing&&!e.state.buttonIsDisabled&&e.setState({buttonInfo:"已关注"})}},this.state.buttonInfo))),c.createElement("div",{id:"userIntroducion"},this.props.userInfo.introduction),c.createElement("div",{id:"userGenderAndBirthday"},c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"性别"),1===this.props.userInfo.gender?"男":"女"," "),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"发帖数"),this.props.userInfo.postCount),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"威望"),this.props.userInfo.prestige),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"粉丝数"),this.props.userInfo.fanCount),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"风评"),this.props.userInfo.popularity),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"注册时间"),this.props.userInfo.registerTime.replace("T"," ")),c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"最后登录"),this.props.userInfo.lastLogOnTime.replace("T"," ")),null===this.props.userInfo.birthday?null:c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"生日"),this.props.userInfo.birthday.slice(0,this.props.userInfo.birthday.indexOf("T")).replace("9999-",""),t?c.createElement("span",{style:{fontFamily:"FontAwesome",marginLeft:"1rem"},className:"fa-birthday-cake",title:"生日快乐~"}):null),this.props.userInfo.displayTitle?c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"用户组"),this.props.userInfo.displayTitle):null,this.props.userInfo.emailAddress?c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"邮箱"),this.props.userInfo.emailAddress):null,this.props.userInfo.qq?c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"QQ"),this.props.userInfo.qq):null,c.createElement("p",null,c.createElement("span",{className:"user-profile-info"},"被删帖数"),-this.props.userInfo.deleteCount)),this.props.userInfo.signatureCode?c.createElement("div",{className:"user-description"},c.createElement("p",null,"个性签名"),c.createElement(tn,{code:this.props.userInfo.signatureCode,options:Object(i.a)(Object(i.a)({},new Ie),{allowExternalImage:!1})})):null)},t}(c.Component),yl=function(e){function t(t){var n=e.call(this,t)||this;return n.state={userRecentPosts:[],isLoading:!1},n.scrollHandler=n.scrollHandler.bind(n),n}return Object(i.c)(t,e),t.prototype.scrollHandler=function(e){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:if(!(document.body.scrollHeight-window.pageYOffset<1500&&!1===this.state.isLoading))return[3,8];s.label=1;case 1:return s.trys.push([1,7,,8]),this.setState({isLoading:!0}),e="/user/".concat(this.props.id,"/recent-topic?userid=").concat(this.props.id,"&from=").concat(this.state.userRecentPosts.length,"&size=11"),[4,ha()];case 2:return t=s.sent(),(n=new Headers).append("Authorization",t),[4,ga(e,{headers:n})];case 3:return 200!==(a=s.sent()).status?[3,5]:[4,a.json()];case 4:return r=s.sent(),o=11===r.length?10:r.length,this.setState((function(e){return{userRecentPosts:e.userRecentPosts.concat(r.slice(0,o)),isLoading:!1}})),[3,6];case 5:throw{};case 6:return[3,8];case 7:return s.sent(),this.setState({isLoading:!1}),[3,8];case 8:return[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,6,,7]),e="/user/".concat(this.props.id,"/recent-topic?userid=").concat(this.props.id,"&from=").concat(this.state.userRecentPosts.length,"&size=11"),[4,ha()];case 1:return t=s.sent(),(n=new Headers).append("Authorization",t),[4,ga(e,{headers:n})];case 2:return 200!==(a=s.sent()).status?[3,4]:[4,a.json()];case 3:return r=s.sent(),o=11===r.length?10:r.length,this.setState({userRecentPosts:r.slice(0,o)}),11===r.length&&window.addEventListener("scroll",this.scrollHandler),[3,5];case 4:throw new Error;case 5:return[3,7];case 6:return s.sent(),[3,7];case 7:return[2]}}))}))},t.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.scrollHandler)},t.prototype.componentWillReceiveProps=function(e){e.id!==this.props.id&&(this.setState({userRecentPosts:[],isLoading:!1}),window.removeEventListener("scroll",this.scrollHandler),window.addEventListener("scroll",this.scrollHandler))},t.prototype.render=function(){if(0===this.state.userRecentPosts.length){return c.createElement("div",{className:"user-activities"},c.createElement("p",null,"发表的主题"),c.createElement("div",{className:"user-posts",style:{marginLeft:"2rem"}},"没有主题"))}for(var e=this.state.userRecentPosts.map((function(e){return c.createElement(Ei,{userRecentTopic:e})})),t=1;t<e.length;t+=2)e.splice(t,0,c.createElement("hr",null));return c.createElement("div",{className:"user-activities"},c.createElement("p",null,"发表的主题"),c.createElement("div",{className:"user-posts"},e))},t}(c.Component),El=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"user-center-router"},c.createElement(on.a,{path:"/user/:method/:id?",exact:!0,component:wl}),c.createElement(on.a,{path:"/user/:method/:id/manage",component:bl}))},t}(c.Component),Il=El,Cl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return this.getInfo(this.props),[2]}))}))},t.prototype.componentWillReceiveProps=function(e){this.props.match.params.id!==e.match.params.id&&this.getInfo(e)},t.prototype.getInfo=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u,m,p;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,5,,6]),t=void 0,n=e.match.params,a=n.id,r=n.method,o=new Headers,s=void 0,!a)throw new Error;return"name"===r?s=a:"id"===r&&(s=Number.parseInt(a)),l=(c=o).append,u=["Authorization"],[4,ha()];case 1:return l.apply(c,u.concat([i.sent()])),t="number"==typeof s?"/user/".concat(s):"/user/name/".concat(s),[4,fa()];case 2:return m=i.sent(),[4,ga(t,{headers:m})];case 3:return[4,i.sent().json()];case 4:return p=i.sent(),this.props.history.replace("/user/id/".concat(p.id)),this.props.changePage("exact",p.id),this.setState({userInfo:p}),[3,6];case 5:return i.sent(),this.props.notFoundUser(),[3,6];case 6:return[2]}}))}))},t.prototype.render=function(){return this.state?c.createElement("div",{className:"user-center-exact"},c.createElement(an,{title:"".concat(this.state.userInfo.name," - 用户详情 - CC98论坛")}),c.createElement(ki,{userInfo:this.state.userInfo}),c.createElement(vl,{userInfo:this.state.userInfo}),c.createElement(yl,{id:this.state.userInfo.id})):c.createElement("div",{className:"user-center-loading"},c.createElement("p",{className:"fa fa-spinner fa-pulse fa-2x fa-fw"}))},t}(c.Component);var wl=Object(Ia.b)(null,(function(e){return{changePage:function(t,n){e(ee(t,n))},notFoundUser:function(){e(J())}}}))(Object(qo.a)(Cl)),Nl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return this.props.isError?c.createElement(vn,null):c.createElement("div",{className:"user-center"},c.createElement("div",{className:"user-center-content"},c.createElement("div",{className:"user-center-head"},c.createElement("p",null,"用户详情")),c.createElement("div",{className:"user-center-body"},c.createElement(ml,null),c.createElement(Il,null))))},t}(c.Component);var Ol=Object(Ia.b)((function(e){return{isError:!e.userInfo.currentVisitingUserIsExisted}}),null)(Nl),jl=function(e){function t(t){var n=e.call(this,t)||this;return n.state={loginName:"",loginPassword:"",loginMessage:"",isLoging:!1},n.handleNameChange=n.handleNameChange.bind(n),n.handlePasswordChange=n.handlePasswordChange.bind(n),n.handleLogin=n.handleLogin.bind(n),n}return Object(i.c)(t,e),t.prototype.shake=function(e){return e.classList.add("shake"),setTimeout((function(){e.classList.remove("shake")}),500),e},t.prototype.handleNameChange=function(e){this.setState({loginName:e.target.value})},t.prototype.handlePasswordChange=function(e){this.setState({loginPassword:e.target.value})},t.prototype.handleLogin=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u=this;return Object(i.d)(this,(function(i){switch(i.label){case 0:if(e.preventDefault(),this.state.isLoging)return[2,!1];if(!this.state.loginName)return this.setState({loginMessage:"请输入用户名"}),this.shake(document.getElementById("loginName")).focus(),[2,!1];if(!this.state.loginPassword)return this.setState({loginMessage:"请输入密码"}),this.shake(document.getElementById("loginPassword")).focus(),[2,!1];this.setState({loginMessage:"登录中",isLoging:!0}),this.props.logOff(),i.label=1;case 1:return i.trys.push([1,5,,6]),t=Kt.config.openIdUrl+"/connect/token",n={client_id:"9a1fd200-8687-44b1-4c20-08d50a96e5cd",client_secret:"8b53f727-08e2-4509-8857-e34bf92b27f2",grant_type:"password",username:this.state.loginName,password:this.state.loginPassword,scope:"cc98-api openid offline_access"},(a=new Headers).append("Content-Type","application/x-www-form-urlencoded"),[4,fetch(t,{method:"POST",headers:a,body:ve.param(n)})];case 2:if(200!==(r=i.sent()).status)throw new Error(r.status.toString());return[4,r.json()];case 3:return o=i.sent(),la("accessToken",o.token_type+" "+o.access_token,o.expires_in),la("refresh_token",o.refresh_token,2592e3),[4,yr()];case 4:if(i.sent(),1===(s=ua()).lockState||2===s.lockState)throw new Error("账号已锁定");return this.setState({loginMessage:"登录成功 正在返回"}),Eo(s.theme),this.props.logOn(),setTimeout((function(){if(1===u.props.history.length)proxyLoc(document.location).href="/";else{var e=localStorage.getItem("logOnRedirectUrl");proxyLoc(document.location).href=e}}),100),[3,6];case 5:switch(c=i.sent(),l=void 0,da("userInfo"),da("accessToken"),da("refresh_token"),c.message){case"400":l="密码错误";break;case"账号已锁定":l="账号已锁定";break;default:l="未知错误 "+c.message}return this.setState({loginMessage:"登录失败 ".concat(l),isLoging:!1}),this.props.logOff(),[3,6];case 6:return[2]}}))}))},t.prototype.render=function(){return c.createElement("div",null,c.createElement("div",{className:"login-announcement"},c.createElement("p",{className:"login-message"},c.createElement("span",null,"温馨提示：",c.createElement("br",null),"　　本论坛仅限校内交流使用，任何内容在未经允许的情况下禁止外传到公网。按照网络实名制的要求及学校和论坛的相关规定，本论坛账号禁止外借他人使用。违规用户将视情节轻重进行全站处罚。请全体用户共同珍惜和维护良好的讨论环境。"))),c.createElement("div",{className:"login"},c.createElement(an,{title:"登录 - CC98论坛"}),c.createElement("div",null,c.createElement("img",{src:"/static/images/login.png"}),c.createElement("div",null,c.createElement("img",{src:"/static/images/login_welcome.png"}),c.createElement("form",{onSubmit:this.handleLogin,autoComplete:"on"},c.createElement("div",{className:"login-form"},c.createElement("p",null,"用户名"),c.createElement("input",{name:"username",type:"text",id:"loginName",onChange:this.handleNameChange,value:this.state.loginName,autoComplete:"username"})),c.createElement("div",{className:"login-form"},c.createElement("p",null,"密码"),c.createElement("input",{name:"password",type:"password",id:"loginPassword",onChange:this.handlePasswordChange,autoComplete:"current-password"})),c.createElement("p",{className:"login-message",id:"loginMessage"},this.state.loginMessage),c.createElement("button",{type:"submit",disabled:this.state.isLoging},"登录账号")),c.createElement("p",{className:"login-message"},c.createElement("span",null,"还没账号？我要 ",c.createElement("a",{href:"//account.cc98.org/",target:"_blank"},"注册"))),c.createElement("p",{className:"login-message"},c.createElement("span",null,"密码错误？我要 ",c.createElement("a",{href:"//account.cc98.org/",target:"_blank"},"找回")))))))},t}(c.Component);var Tl=Object(Ia.b)((function(e){return{isLogOn:e.userInfo.isLogOn}}),(function(e){return{logOn:function(){e(W())},logOff:function(){e(Y())},changeUserInfo:function(t){e(Z(t))}}}))(jl),Sl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){this.props.tag1||$("#tag_".concat(this.props.id)).addClass("displaynone"),this.props.userId||($("#user_".concat(this.props.id)).removeAttr("href"),$("#user_".concat(this.props.id)).removeAttr("target"),$("#lastpost_".concat(this.props.id)).removeAttr("href"),$("#lastpost_".concat(this.props.id)).removeAttr("target"))},t.prototype.render=function(){var e="";this.props.tag1&&(e=this.props.tag2?"标签：".concat(this.props.tag1," / ").concat(this.props.tag2):"标签：".concat(this.props.tag1));var t="/topic/".concat(this.props.id),n="/user/id/".concat(this.props.userId),a="/board/".concat(this.props.boardId),r=this.props.floorCount/10+1,o=parseInt(r),s=this.props.floorCount+10-10*o,i="".concat(o,"#").concat(s);0===s&&(i="".concat(o-1,"#10"));"".concat(t,"/").concat(i);var l="/user/name/".concat(encodeURI(this.props.lastPostUser));return c.createElement("div",{className:"focus-topic"},c.createElement("a",{className:"focus-topic-left",href:n,target:"_blank",id:"user_".concat(this.props.id)},c.createElement("img",{className:"focus-topic-portraitUrl",src:this.props.portraitUrl}),c.createElement("div",{className:"focus-topic-userName"},this.props.userName)),c.createElement("div",{className:"focus-topic-middle"},c.createElement("a",{className:"focus-topic-title",href:t,target:"_blank"},this.props.title),c.createElement("div",{className:"focus-topic-info"},c.createElement("div",{id:"tag_".concat(this.props.id)},e),c.createElement("div",null,c.createElement("i",{className:"fa fa-clock-o fa-lg"}),this.props.time),c.createElement("div",null,c.createElement("i",{className:"fa fa-eye fa-lg"})," ",this.props.hitCount),c.createElement("div",null,"最后回复：",c.createElement("a",{href:l,target:"_blank",id:"lastpost_".concat(this.props.id)},this.props.lastPostUser)))),c.createElement("div",{className:"focus-topic-rightBar"}),c.createElement("a",{className:"focus-topic-right",href:a,target:"_blank"},c.createElement("div",{className:"focus-topic-board"},this.props.boardName)))},t}(c.Component),kl=function(e){function t(t){var n=e.call(this,t)||this;return n.isLoadable=!0,n.state={boardId:0,boardName:"全站",words:[],data:[],from:0},n.getMore=n.getMore.bind(n),n.handleScroll=n.handleScroll.bind(n),n}return Object(i.c)(t,e),t.prototype.getData=function(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r=this;return Object(i.d)(this,(function(o){switch(o.label){case 0:return[4,pr(e.boardId,e.words,t,this.context.router)];case 1:if((n=o.sent())&&0!==n.length)if(-1==n){if(0!==t)return this.isLoadable=!0,$("#focus-topic-getMore").css("display","flex"),$("#focus-topic-loading").addClass("displaynone"),[2];this.showError(),this.isLoadable=!1}else n.length<20?($("#focus-topic-getMore").css("display","none"),$("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),a=this.state.data.concat(n),this.setState({boardName:e.boardName,data:a,from:a.length},(function(){r.isLoadable=!1}))):(a=this.state.data.concat(n),this.setState({boardName:e.boardName,data:a,from:a.length},(function(){r.isLoadable=!0})),$("#focus-topic-getMore").css("display","flex"),$("#focus-topic-loading").addClass("displaynone"));else this.showNoResult(),this.isLoadable=!1;return[2]}}))}))},t.prototype.getNewData=function(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a=this;return Object(i.d)(this,(function(r){switch(r.label){case 0:return[4,pr(e.boardId,e.words,t,this.context.router)];case 1:if((n=r.sent())&&0!==n.length)if(-1==n){if(0!==t)return this.isLoadable=!0,$("#focus-topic-getMore").css("display","flex"),$("#focus-topic-loading").addClass("displaynone"),[2];this.showError(),this.isLoadable=!1}else n.length<20?($("#focus-topic-getMore").css("display","none"),$("#focus-topic-loading").addClass("displaynone"),$("#focus-topic-loaddone").removeClass("displaynone"),this.setState({boardName:e.boardName,data:n,from:n.length},(function(){a.isLoadable=!1}))):(this.setState({boardName:e.boardName,data:n,from:n.length},(function(){a.isLoadable=!0})),$("#focus-topic-getMore").css("display","flex"),$("#focus-topic-loading").addClass("displaynone"));else this.showNoResult(),this.isLoadable=!1;return[2]}}))}))},t.prototype.keyWordSearch=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:return e=proxyLoc(location).href.match(/\/search\?boardId=(\d+)&keyword=(.*)/),t={boardId:0,boardName:"全站",words:null},e?[3,1]:(this.showNoResult(),this.isLoadable=!1,[3,3]);case 1:return t.boardId=parseInt(e[1]),n=t,[4,$a(parseInt(e[1]))];case 2:n.boardName=o.sent(),a=decodeURI(decodeURI(e[2])),(r=a.split(" ")).length>5&&(r=r.splice(5)),t.words=r,o.label=3;case 3:return sa("searchInfo",t),this.setState({boardId:t.boardId,boardName:t.boardName,words:t.words}),$("#focus-topic-getMore").css("display","none"),$("#focus-topic-loading").removeClass("displaynone"),this.getNewData(t,0),document.addEventListener("scroll",this.handleScroll),[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return this.keyWordSearch(),[2]}))}))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return $("#focus-topic-area").removeClass("displaynone"),$("#noResult").addClass("displaynone"),$("#showError").addClass("displaynone"),this.keyWordSearch(),[2]}))}))},t.prototype.getMore=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){return this.isLoadable&&($("#focus-topic-getMore").css("display","none"),$("#focus-topic-loading").removeClass("displaynone"),this.isLoadable=!1,e=ia("searchInfo"),this.getData(e,this.state.from)),[2]}))}))},t.prototype.showNoResult=function(){$("#focus-topic-area").addClass("displaynone"),$("#noResult").removeClass("displaynone")},t.prototype.showError=function(){$("#focus-topic-area").addClass("displaynone"),$("#showError").removeClass("displaynone")},t.prototype.handleScroll=function(e){window.scrollY>234&&($("#scroll-to-top-button").removeClass("btn-disappear"),$("#scroll-to-top-button").addClass("btn-show")),window.scrollY<234&&($("#scroll-to-top-button").removeClass("btn-show"),$("#scroll-to-top-button").addClass("btn-disappear"))},t.prototype.scrollToTop=function(){$("body,html").animate({scrollTop:0},500)},t.prototype.render=function(){return c.createElement("div",{className:"focus-root"},c.createElement(an,{title:"搜索结果 - CC98论坛"}),c.createElement("div",{className:"focus"},c.createElement(Pl,null),c.createElement("div",{className:"focus-topic-area",id:"focus-topic-area"},c.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(xl)),c.createElement("div",{className:"focus-topic-getMore",onClick:this.getMore,id:"focus-topic-getMore"},c.createElement("div",null,"点击获取更多搜索结果~"),c.createElement("div",null,"······")),c.createElement("div",{className:"focus-topic-loading displaynone",id:"focus-topic-loading"},c.createElement("img",{src:"http://file.cc98.org/uploadfile/2017/12/20/6514723843.gif"})),c.createElement("div",{className:"focus-topic-loaddone displaynone",id:"focus-topic-loaddone"}," ","没有更多帖子啦~"),c.createElement("button",{type:"button",id:"scroll-to-top-button",className:"top-button",onClick:this.scrollToTop},c.createElement("div",{className:"top-button-text"},"回到顶部"))),c.createElement("div",{id:"noResult",className:"noResult displaynone"},c.createElement("img",{src:"/static/images/searchNone.png",className:"noResultPic"}),c.createElement("div",{className:"noResultText"},"-----------------------抱歉呢前辈，没有找到你想要的帖子哦~----------------------")),c.createElement("div",{id:"showError",className:"resultErr displaynone"},"查询出错了，请刷新重试")))},t}(c.Component);function xl(e){return c.createElement(Sl,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,lastPostUser:e.lastPostUser,lastPostTime:e.lastPostTime,tag1:e.tag1,tag2:e.tag2,floorCount:e.floorCount,contentType:e.contentType,mediaContent:e.mediaContent})}var Pl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"row",style:{alignItems:"baseline",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement("div",{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"}},"搜索主题"))},t}(c.Component),Ul=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:[]},n}return Object(i.c)(t,e),t.prototype.getData=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return e=proxyLoc(location).href.match(/\/searchBoard\?keyword=(.*)/),t=[],e?[3,1]:(this.showNoResult(),[3,3]);case 1:return[4,dr(decodeURI(decodeURI(e[1])),this.context.router)];case 2:(t=n.sent())?this.setState({data:t}):this.showNoResult(),n.label=3;case 3:return[2]}}))}))},t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return this.getData(),[2]}))}))},t.prototype.componentWillReceiveProps=function(e){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return this.getData(),[2]}))}))},t.prototype.showNoResult=function(){$("#noResultBoard").removeClass("displaynone")},t.prototype.render=function(){return c.createElement("div",{className:"focus-root"},c.createElement(an,{title:"搜索结果 - CC98论坛"}),c.createElement("div",{className:"focus"},c.createElement(_l,null),c.createElement("div",{className:"focus-board-area"},this.state.data.map(Ml))),c.createElement("div",{id:"noResultBoard",className:"noResult displaynone"},c.createElement("img",{src:"/static/images/searchNone.png",className:"noResultPic"}),c.createElement("div",{className:"noResultText"},"-----------------------抱歉呢前辈，没有找到你想要的版面哦~----------------------")))},t}(c.Component);function Ml(e){var t="/board/".concat(e.id);return c.createElement("a",{href:t,target:"_blank"},c.createElement("div",{className:"focus-board"},e.name))}var _l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"row",style:{alignItems:"baseline",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"},to:"/boardList"},"版面列表"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement("div",{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"}},"搜索版面"))},t}(c.Component),Rl=function(e){function t(t){var n=e.call(this,t)||this;return n.update=n.update.bind(n),n.signin=n.signin.bind(n),n.state={signinInfo:{lastSignInCount:0,lastSignInTime:0},content:""},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,Vr()];case 1:return e=t.sent(),this.setState({signinInfo:e}),[2]}}))}))},t.prototype.update=function(e){this.setState({content:e})},t.prototype.signin=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s,c;return Object(i.d)(this,(function(l){switch(l.label){case 0:return function(e){Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,fa()];case 1:return(t=n.sent()).append("Content-Type","application/json"),[4,ga("/me/signin",{method:"POST",headers:t,body:e})];case 2:return n.sent(),[2]}}))}))}(this.state.content),[4,Hr()];case 1:return e=l.sent(),[4,$r(t=e.signInTopicId)];case 2:return n=l.sent(),a=n.replyCount,r=Yr(a),0===(o=(a+1)%10)&&(o=10),this.props.history.push("/topic/".concat(t,"/").concat(r,"#").concat(o)),this.setState({content:""}),s=ua(),c=(new Date((new Date).setHours(0,0,0,0)).getTime()+864e5-(new Date).getTime())/1e3,la("signin_".concat(s.id),!0,c),[2]}}))}))},t.prototype.render=function(){var e;if(this.state.signinInfo.hasSignedInToday){var t=ua(),n=(new Date((new Date).setHours(0,0,0,0)).getTime()+864e5-(new Date).getTime())/1e3;la("signin_".concat(t.id),!0,n),e=c.createElement("div",null,c.createElement("div",{className:"row",style:{justifyContent:"center"}},"你上次的签到日期是",Rn(this.state.signinInfo.lastSignInTime).format("YYYY-MM-DD HH:mm:ss")),c.createElement("div",{className:"row",style:{justifyContent:"center"}},"你已经连续签到了",this.state.signinInfo.lastSignInCount,"天"))}else{t=ua();da("signin_".concat(t.id)),e=c.createElement("div",{className:"column"},c.createElement("div",{className:"row"},"你今天还未签到"),c.createElement("div",{style:{marginTop:"1.5rem"}},c.createElement(os,{update:this.update,value:this.state.content,option:{height:10}}),c.createElement("div",{className:"row",style:{justifyContent:"center",marginBottom:"1.25rem "}},c.createElement("div",{id:"post-topic-button",onClick:this.signin,className:"button blue",style:{marginTop:"1.25rem",width:"6rem",height:"2rem",lineHeight:"2rem",letterSpacing:"0.3125rem"}},"签到"))))}return c.createElement("div",{className:"sign-in"},c.createElement("div",{className:"row",style:{width:"100%",justifyContent:"center"}},"论坛签到"),c.createElement("div",{className:"row"},"签到功能是 CC98 论坛提供的一项娱乐功能。每个用户每天可以签到一次，并获得额外的论坛财富值奖励。如果连续多日签到，则奖励会不断增加。目前财富值的奖励情况如下表所示："),c.createElement("div",{className:"column",style:{marginLeft:"2rem"}},c.createElement("div",{className:"row"},"第 1 天： ",600," 到 ",1200," 论坛财富值"),c.createElement("div",{className:"row"},"第 2 天： ",700," 到 ",1400," 论坛财富值"),c.createElement("div",{className:"row"},"第 3 天： ",800," 到 ",1600," 论坛财富值"),c.createElement("div",{className:"row"},"第 4 天： ",900," 到 ",1800," 论坛财富值"),c.createElement("div",{className:"row"},"第 5 天及以后： ",1e3," 到 ",2e3," 论坛财富值")),e)},t}(c.Component),Dl=(Object(qo.a)(Rl),cs.a.TextArea),Ll=function(e){function t(t){var n=e.call(this,t)||this;return n.state={announcement:"加载中",info:""},n.changeSiteAnnouncement=n.changeSiteAnnouncement.bind(n),n.clearMainPageCache=n.clearMainPageCache.bind(n),n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return"/config/global",[4,ga("/config/global")];case 1:return[4,t.sent().json()];case 2:return e=t.sent(),this.setState({announcement:e.announcement}),[2]}}))}))},t.prototype.changeSiteAnnouncement=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s=this;return Object(i.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e="/config/global/announcement",[4,ha()];case 1:return t=i.sent(),n=this.state.announcement,(a=new Headers).append("Authorization",t),a.append("Content-Type","application/json"),[4,ga(e,{method:"PUT",headers:a,body:JSON.stringify({announcement:n})})];case 2:if(200!==(r=i.sent()).status)throw new Error(r.status.toString());return this.setState({info:"修改全站公告成功"}),setTimeout((function(){s.setState({info:""})}),1e3),[3,4];case 3:return o=i.sent(),this.setState({info:"修改失败".concat(o.message)}),[3,4];case 4:return[2]}}))}))},t.prototype.clearMainPageCache=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n=this;return Object(i.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,fa()];case 1:return[4,ga("/config/index/update",{method:"PUT",headers:a.sent()})];case 2:if(200!==(e=a.sent()).status)throw new Error(e.status.toString());return this.setState({info:"清除首页缓存成功"}),setTimeout((function(){n.setState({info:""})}),1e3),[3,4];case 3:return t=a.sent(),this.setState({info:"清除首页缓存失败 ".concat(t.message)}),[3,4];case 4:return[2]}}))}))},t.prototype.render=function(){var e=this;return c.createElement("div",{style:{marginLeft:"1rem",marginRight:"1rem"}},c.createElement("p",{style:{height:"2rem"}},this.state.info),c.createElement("div",null,c.createElement("div",{style:{display:"flex",fontSize:"20px",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},c.createElement("div",{style:{marginTop:"10px",marginLeft:"15px",marginRight:"15px"}},"全站公告"),c.createElement("div",{style:{marginLeft:"15px"}}," ",c.createElement(Bn.a,{type:"primary",onClick:this.changeSiteAnnouncement},"提交修改")," "),c.createElement("div",{style:{marginLeft:"15px"}}," ",c.createElement(Bn.a,{type:"primary",onClick:this.clearMainPageCache},"清除首页缓存")," ")),c.createElement(Dl,{spellCheck:!1,rows:8,onChange:function(t){e.setState({announcement:t.target.value})},value:this.state.announcement}),c.createElement("div",{className:"announcement"},c.createElement("div",{className:"mainPageTitle1"},c.createElement("div",{className:"mainPageTitleRow",style:{width:"100%"}},c.createElement("i",{className:"fa fa-volume-up"}),c.createElement("div",{style:{flexGrow:1},className:"mainPageTitleText"},"全站公告"))),c.createElement("div",{className:"announcementContent"},c.createElement(tn,{code:this.state.announcement})))))},t}(c.Component),Fl=n(543),Bl=["推荐阅读","推荐功能","校园新闻","广告"],Al=["/index/column/recommandationreading","/index/column/recommandationfunction","/index/column/schoolnews","/config/global/advertisement"],zl=function(){},Vl=function(e){function t(t){var n=e.call(this,t)||this;return n.onPageChange=function(e){n.setState({current:e.current})},n.state={info:"",data:[],type:0,current:1},n.getInfo=n.getInfo.bind(n),n.putCurData=n.putCurData.bind(n),n.handleTdChange=n.handleTdChange.bind(n),n.add=n.add.bind(n),n}return Object(i.c)(t,e),t.prototype.getInfo=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:this.setState({type:Al.indexOf(e)+1,data:[]}),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,ha()];case 2:return t=o.sent(),(n=new Headers).append("Authorization",t),[4,ga(e+"/all",{headers:n})];case 3:return[4,o.sent().json()];case 4:return a=o.sent(),this.setState({data:a}),[3,6];case 5:return r=o.sent(),this.setState({info:r.message}),[3,6];case 6:return[2]}}))}))},t.prototype.handleTdChange=function(e,t,n){var a=this;this.setState((function(r){var o,s=r.data;s[n]=Object(i.a)(Object(i.a)({},s[n]),((o={})[e]=t,o)),a.setState({data:s})}))},t.prototype.putCurData=function(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:this.state.data[e].isNew?(t="/index/column/",n="POST"):(t="/index/column/"+this.state.data[e].id,n="PUT"),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,ha()];case 2:return a=i.sent(),(r=new Headers).append("Authorization",a),r.append("Content-Type","application/json"),[4,ga(t,{method:n,headers:r,body:JSON.stringify(this.state.data[e])})];case 3:if(200!==(o=i.sent()).status)throw new Error(o.status.toString());return this.setState({info:"修改成功"}),[3,5];case 4:return s=i.sent(),this.setState({info:s.message}),[3,5];case 5:return[2]}}))}))},t.prototype.add=function(){this.setState((function(e){var t=new zl;return t.enable=!0,t.isNew=!0,t.type=e.type,t.id=e.data[0].id+1,{data:Object(i.e)([t],e.data,!0)}}))},t.prototype.render=function(){var e=this,t=this.state.current,n=[{title:"id",dataIndex:"id",key:"id",width:60},{title:"type",dataIndex:"type",key:"type",width:100,render:function(e){return Bl[e-1]}},{title:"title",dataIndex:"title",key:"title",width:200,render:function(n,a,r){return c.createElement(cs.a,{type:"text",onChange:function(n){return e.handleTdChange("title",n.target.value,10*(t-1)+r)},value:n})}},1===this.state.type?{title:"content",dataIndex:"content",key:"content",width:200,render:function(n,a,r){return c.createElement(cs.a,{type:"text",onChange:function(n){return e.handleTdChange("content",n.target.value,10*(t-1)+r)},value:n})}}:null,{title:"url",dataIndex:"url",key:"url",width:140,render:function(n,a,r){return c.createElement(cs.a,{type:"text",onChange:function(n){return e.handleTdChange("url",n.target.value,10*(t-1)+r)},value:n})}},3!==this.state.type?{title:"imageUrl",dataIndex:"imageUrl",key:"imageUrl",width:200,render:function(n,a,r){return c.createElement(cs.a,{type:"text",onChange:function(n){return e.handleTdChange("imageUrl",n.target.value,10*(t-1)+r)},value:n})}}:null,1===this.state.type||2===this.state.type?{title:"orderWeight",dataIndex:"orderWeight",key:"orderWeight",width:150,render:function(n,a,r){return c.createElement(cs.a,{type:"text",onChange:function(n){return e.handleTdChange("orderWeight",n.target.value,10*(t-1)+r)},value:n})}}:null,{title:"enable",dataIndex:"enable",key:"enable",width:80,render:function(n,a,r){return c.createElement(us.a,{checked:n,onChange:function(n){return e.handleTdChange("enable",n.target.checked,10*(t-1)+r)}})}},4===this.state.type?{title:"days",dataIndex:"days",key:"days",render:function(n,a,r){return c.createElement(cs.a,{type:"text",onChange:function(n){return e.handleTdChange("days",n.target.value,10*(t-1)+r)},value:n})}}:null,4===this.state.type?{title:"expiredTime",dataIndex:"expiredTime",key:"expiredTime",render:function(e){return Rn(e).format("YYYY-MM-DD HH:mm:ss")}}:null,{title:"save",dataIndex:"save",key:"save",width:100,render:function(n,a,r){return c.createElement(Bn.a,{type:"primary",onClick:function(n){return e.putCurData(10*(t-1)+r)}},"保存")}}].filter((function(e){if(e)return e}));return c.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:"1rem",borderTop:"#eaeaea solid thin",paddingTop:"1rem"}},c.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",width:"100%",marginBottom:"1rem"}},c.createElement("div",{style:{marginTop:"10px"}},"自定义栏目"),c.createElement("div",null,c.createElement(Bn.a,{type:"primary",disabled:1===this.state.type,onClick:function(){return e.getInfo(Al[0])}},"推荐阅读")),c.createElement("div",null,c.createElement(Bn.a,{type:"primary",disabled:2===this.state.type,onClick:function(){return e.getInfo(Al[1])}},"推荐功能")),c.createElement("div",null,c.createElement(Bn.a,{type:"primary",disabled:3===this.state.type,onClick:function(){return e.getInfo(Al[2])}},"校园新闻")),c.createElement("div",null,c.createElement(Bn.a,{type:"primary",disabled:4===this.state.type,onClick:function(){return e.getInfo(Al[3])}},"广告")),this.state.type>0?c.createElement("div",null,c.createElement(Bn.a,{type:"primary",onClick:function(){return e.add()}},"添加")):null),c.createElement("div",null,c.createElement(Fl.a,{bordered:!0,onChange:this.onPageChange,columns:n,dataSource:this.state.data}),c.createElement("p",null,this.state.info)))},t}(c.Component),Hl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{style:{backgroundColor:"white",width:"100%"}},c.createElement("div",{style:{display:"flex",justifyContent:"center",fontSize:"24px"}},"全站管理"),c.createElement(Ll,null),c.createElement(Vl,null))},t}(c.Component),$l=function(e){function t(t){var n=e.call(this,t)||this;return n.addVoteItem=n.addVoteItem.bind(n),n.removeItem=n.removeItem.bind(n),n.changeValue=n.changeValue.bind(n),n}return Object(i.c)(t,e),t.isFormIllegal=function(e){if(e.expiredDays>1e3||e.expiredDays<1)return"请输入合法的过期天数";if(e.maxVoteCount>e.voteItems.length||e.maxVoteCount<1)return"请输入合法的最大投票数";for(var t=0;t<e.voteItems.length;t++)if(!e.voteItems[t])return"投票选项不能为空";return!1},t.prototype.addVoteItem=function(){if(this.props.voteInfo.voteItems.length>19)return null;this.props.onVoteInfoChange(Object(i.a)(Object(i.a)({},this.props.voteInfo),{voteItems:Object(i.e)(Object(i.e)([],this.props.voteInfo.voteItems,!0),[""],!1)}))},t.prototype.removeItem=function(e){if(this.props.voteInfo.voteItems.length<3)return null;var t=Object(i.e)([],this.props.voteInfo.voteItems,!0);t.splice(e,1),this.props.onVoteInfoChange(Object(i.a)(Object(i.a)({},this.props.voteInfo),{voteItems:t}))},t.prototype.changeValue=function(e,t){var n;this.props.onVoteInfoChange(Object(i.a)(Object(i.a)({},this.props.voteInfo),((n={})[e]=t,n)))},t.prototype.changeItemValue=function(e,t){var n=Object(i.e)([],this.props.voteInfo.voteItems,!0);n[e]=t,this.props.onVoteInfoChange(Object(i.a)(Object(i.a)({},this.props.voteInfo),{voteItems:n}))},t.prototype.render=function(){var e=this,t=this.props.voteInfo,n=0===t.expiredDays?"":t.expiredDays,a=0===t.maxVoteCount?"":t.maxVoteCount;return c.createElement(c.Fragment,null,c.createElement("div",{className:"createTopicTitle"},c.createElement("span",{className:"createTopicListName"},"投票设置"),c.createElement("span",{style:{paddingLeft:"1rem"}},"有效天数（至少1天，最多1000天）"),c.createElement("input",{style:{width:"8.5rem",borderWidth:"0 1px 0 0",borderStyle:"solid",borderColor:"#e9e9e9",boxSizing:"border-box",margin:"1rem"},name:"expiredDays",type:"number",min:1,max:1e3,placeholder:"请输入有效天数",value:n,onChange:function(t){var n=parseInt(t.target.value||"0");if(n>1e3||n<0)return null;e.changeValue(t.target.name,n)}}),c.createElement("span",null,"最多可投数量（至少1项，最多不超过选项数）"),c.createElement("input",{style:{width:"10rem",borderWidth:"0 1px 0 0",borderStyle:"solid",borderColor:"#e9e9e9",boxSizing:"border-box",margin:"1rem"},name:"maxVoteCount",type:"number",min:1,max:this.props.voteInfo.voteItems.length,placeholder:"请输入最多可投数量",value:a,onChange:function(t){var n=parseInt(t.target.value||"0");if(n>e.props.voteInfo.voteItems.length||n<0)return null;e.changeValue(t.target.name,n)}}),c.createElement("input",{style:{width:"1rem"},id:"needVote",name:"needVote",type:"checkbox",checked:this.props.voteInfo.needVote,onChange:function(t){e.changeValue(t.target.name,t.target.checked)}}),c.createElement("label",{htmlFor:"needVote"},"投票后结果可见")),this.props.voteInfo.voteItems.map((function(t,n){return c.createElement("div",{className:"createTopicTitle"},c.createElement("span",{className:"createTopicListName"},"投票选项",n+1),c.createElement("input",{name:"voteItem",type:"text",value:t,placeholder:"请输入选项内容，不能为空，最多50个字符",maxLength:50,onChange:function(t){if(t.target.value.length>50)return null;e.changeItemValue(n,t.target.value)}}),e.props.voteInfo.voteItems.length>2?c.createElement("button",{type:"button",className:"fa fa-times",onClick:function(){return e.removeItem(n)}}):null)})),c.createElement("button",{type:"button",onClick:this.addVoteItem,className:"hiddenImage",style:{width:"16rem",margin:"0 auto 1rem"}},"添加选项（最少2项，最多20项）"))},t}(c.PureComponent),Wl="";function Yl(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return[4,sr(e)];case 1:return Wl=r.sent(),n=t.editor,a="\n\n![](".concat(Wl,")\n\n"),n.setValue(a),[2]}}))}))}var ql={buttonContentBuilder:function(e){e.iconProvider;return c.createElement("div",null,c.createElement("label",{id:"upload-label",style:{cursor:"pointer",paddingBottom:"0.5rem",paddingTop:"0,5rem",paddingLeft:"1rem",paddingRight:"1rem"},htmlFor:"upload-files"},c.createElement("i",{className:"fa fa-image"})),c.createElement("input",{type:"file",id:"upload-files",style:{display:"none "},onChange:function(e){return Object(i.b)(void 0,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return t=e.target,[4,Yl(e,ql)];case 1:return n.sent(),t.value="",[2]}}))}))}}))},buttonProps:{handleSubmit:function(e){}},editor:null},Jl=ql,Gl=n(1277),Ql=n(254),Kl=(Gl.a.MonthPicker,Gl.a.RangePicker),Xl=ls.a.Option,Zl=cs.a.TextArea,eu=function(e){function t(t){var n=e.call(this,t)||this;return n.handleValueChange=function(e){n.setState({mdeState:e})},n.sendMdTopic=function(e){return Object(i.b)(n,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v,y,E,I,C;return Object(i.d)(this,(function(w){switch(w.label){case 0:return t=e,(1!==this.state.tags.length||this.state.tag1)&&(2!==this.state.tags.length||this.state.tag1&&this.state.tag2)?"postVoteTopic"===this.match.params.mode&&(t=!1,n=$l.isFormIllegal(this.state.voteInfo))?(alert(n),[2,null]):""!=this.state.title?[3,1]:(alert("请输入标题!"),[3,13]):(alert("请选择标签"),[2]);case 1:return w.trys.push([1,12,,13]),a=void 0,r=void 0,o="/board/".concat(this.match.params.id,"/topic"),s=this.state.mdeState,c=void 0,this.state.type,[4,to(this.state.tag1)];case 2:return a=w.sent(),[4,to(this.state.tag2)];case 3:return r=w.sent(),c=a&&!r?{content:s,contentType:1,title:this.state.title,tag1:a,type:this.state.type,notifyPoster:this.state.notice,isAnonymous:t}:r?{content:s,contentType:1,title:this.state.title,tag1:a,tag2:r,type:this.state.type,notifyPoster:this.state.notice,isAnonymous:t}:{content:s,contentType:1,title:this.state.title,type:this.state.type,notifyPoster:this.state.notice,isAnonymous:t},"postVoteTopic"===this.match.params.mode&&(c=Object(i.a)(Object(i.a)({},c),{isVote:!0,voteInfo:this.state.voteInfo})),l=JSON.stringify(c),[4,ha()];case 4:return u=w.sent(),(m=new Headers).append("Authorization",u),m.append("Content-Type","application/json"),[4,ga(o,{method:"POST",headers:m,body:l})];case 5:return 402===(p=w.sent()).status&&alert("请输入内容"),400!==p.status?[3,7]:[4,p.text()];case 6:d=w.sent(),h=JSON.parse(d).errors.Content[0],alert("发帖失败，原因：".concat(h)),w.label=7;case 7:return[4,p.text()];case 8:return f=w.sent(),(g=po(s))?[4,Ra(Number(f),1)]:[3,11];case 9:return b=w.sent(),v=b[0],y=v.id,E=JSON.stringify(g),I="/notification/at?topicid=".concat(f,"&postid=").concat(y),(C=new Headers).append("Content-Type","application/json"),C.append("Authorization",u),[4,ga(I,{method:"POST",headers:C,body:E})];case 10:w.sent(),w.label=11;case 11:return da("contentCache"),this.props.history.push("/topic/".concat(f)),[3,13];case 12:return w.sent(),[3,13];case 13:return[2]}}))}))},n.sendUbbTopic=function(e){return Object(i.b)(n,void 0,void 0,(function(){var t,n,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v,y,E,I;return Object(i.d)(this,(function(C){switch(C.label){case 0:return t=e,this.state,(1!==this.state.tags.length||this.state.tag1)&&(2!==this.state.tags.length||this.state.tag1&&this.state.tag2)?"postVoteTopic"===this.match.params.mode&&(t=!1,n=$l.isFormIllegal(this.state.voteInfo))?(alert(n),[2,null]):""!=this.state.title?[3,1]:(alert("请输入标题！"),[3,13]):(alert("请选择标签"),[2]);case 1:return a="/board/".concat(this.match.params.id,"/topic"),r=void 0,o=void 0,s=void 0,[4,to(this.state.tag1)];case 2:return o=C.sent(),[4,to(this.state.tag2)];case 3:return s=C.sent(),r=o&&!s?{content:this.state.content,contentType:0,title:this.state.title,tag1:o,type:this.state.type,notifyPoster:this.state.notice,isAnonymous:t}:s?{content:this.state.content,contentType:0,title:this.state.title,tag1:o,tag2:s,type:this.state.type,notifyPoster:this.state.notice,isAnonymous:t}:{content:this.state.content,contentType:0,title:this.state.title,type:this.state.type,notifyPoster:this.state.notice,isAnonymous:t},"postVoteTopic"===this.match.params.mode&&(r=Object(i.a)(Object(i.a)({},r),{isVote:!0,voteInfo:this.state.voteInfo})),c=JSON.stringify(r),[4,ha()];case 4:return l=C.sent(),(u=new Headers).append("Authorization",l),u.append("Content-Type","application/json"),[4,ga(a,{method:"POST",headers:u,body:c})];case 5:return 402===(m=C.sent()).status&&alert("请输入内容"),400!==m.status?[3,7]:[4,m.text()];case 6:p=C.sent(),d=JSON.parse(p).errors.Content[0],alert("发帖失败，原因：".concat(d)),C.label=7;case 7:return[4,m.text()];case 8:return"cannot_post_in_this_board"!==(h=C.sent())?[3,9]:(Wo.dispatch(de("CannotPost")),[3,13]);case 9:return(f=po(this.state.content))?[4,Ra(Number(h),1)]:[3,12];case 10:return g=C.sent(),b=g[0],v=b.id,y=JSON.stringify(f),E="/notification/at?topicid=".concat(h,"&postid=").concat(v),(I=new Headers).append("Content-Type","application/json"),I.append("Authorization",l),[4,ga(E,{method:"POST",headers:I,body:y})];case 11:C.sent(),C.label=12;case 12:da("contentCache"),this.props.history.push("/topic/".concat(h)),C.label=13;case 13:return[2]}}))}))},n.sendOnymousUbbTopic=function(){n.sendUbbTopic(!1)},n.sendAnonymousUbbTopic=function(){n.sendUbbTopic(!0)},n.sendOnymousMdTopic=function(){n.sendMdTopic(!1)},n.sendAnonymousMdTopic=function(){n.sendMdTopic(!0)},n.setValue=function(e){n.setState({mdeState:n.state.mdeState+e},(function(){n.setState({mdeState:n.state.mdeState})}))},n.notNotice=function(){return Object(i.b)(n,void 0,void 0,(function(){return Object(i.d)(this,(function(e){return this.setState({notice:!this.state.notice}),[2]}))}))},n.showModal=function(){n.setState({houseTmpVisible:!0})},n.handleOk=function(e){n.setState({houseTmpVisible:!1})},n.handleCancel=function(e){n.setState({houseTmpVisible:!1})},n.handleTmpForm=function(e){e.validDate[0];var t="[table]\n    [tr][th]序号[/th][th]信息项[/th][th]描述[/th][/tr]\n    [tr][td]01[/td][td]有效日期[/td][td]".concat(Rn(e.validDate[0]).format("YYYY-MM-DD"),"-").concat(Rn(e.validDate[1]).format("YYYY-MM-DD"),"[/td][/tr]\n    [tr][td]02[/td][td]类型[/td][td]").concat(e.type||"","[/td][/tr]\n    [tr][td]03[/td][td]地区[/td][td]").concat(e.district||"","[/td][/tr]\n    [tr][td]04[/td][td]小区名称[/td][td]").concat(e.neighborhood||"","[/td][/tr]\n    [tr][td]05[/td][td]详细地址[/td][td]").concat(e.address||"","[/td][/tr]\n    [tr][td]06[/td][td]联系方式[/td][td]").concat(e.contact||"","[/td][/tr]\n    [tr][td]07[/td][td]价格[/td][td]").concat(e.price||"","[/td][/tr]\n    [tr][td]08[/td][td]租期[/td][td]").concat(e.rentDays||"","[/td][/tr]\n    [tr][td]09[/td][td]房户类型[/td][td]").concat(e.houseType||"","[/td][/tr]\n    [tr][td]10[/td][td]出租户型[/td][td]").concat(e.rentType||"","[/td][/tr]\n    [tr][td]11[/td][td]出租面积[/td][td]").concat(e.area||"","[/td][/tr]\n    [tr][td]12[/td][td]可租期限[/td][td]").concat(e.range||"","[/td][/tr]\n    [tr][td]13[/td][td]付款方式[/td][td]").concat(e.paymentType||"","[/td][/tr]\n    [tr][td]14[/td][td]是否为隔间[/td][td]").concat(e.isSingleRoom||"","[/td][/tr]\n    [tr][td]15[/td][td]独立电表[/td][td]").concat(e.isElectricIsolated||"","[/td][/tr]\n    [tr][td]16[/td][td]水电缴费[/td][td]").concat(e.waterElecValue||"","[/td][/tr]\n    [tr][td]17[/td][td]日常卫生[/td][td]").concat(e.cleaning||"","[/td][/tr]\n    [tr][td]18[/td][td]维修物业[/td][td]").concat(e.repairing||"","[/td][/tr]\n    [tr][td]19[/td][td]网络带宽[/td][td]").concat(e.networking||"","[/td][/tr]\n    [tr][td]20[/td][td]退租方式[/td][td]").concat(e.checkout||"","[/td][/tr]\n    [tr][td]21[/td][td]其他描述[/td][td]").concat(e.otherDescriptions||"","[/td][/tr]\n    [tr][td]22[/td][td]其他要求[/td][td]").concat(e.otherDemands||"","[/td][/tr]\n    [/table]");n.setState({content:t+"\n\n"+n.state.content,houseTmpVisible:!1})},n.update=n.update.bind(n),n.changeEditor=n.changeEditor.bind(n),n.editUBB=n.editUBB.bind(n),n.changeAcademicType=n.changeAcademicType.bind(n),n.changeActivityType=n.changeActivityType.bind(n),n.changeNormalType=n.changeNormalType.bind(n),n.onVoteInfoChange=n.onVoteInfoChange.bind(n),n.converter=new Os.Converter({tables:!0,simplifiedAutoLink:!0}),n.state={masters:[],tags:[],boardName:"",ready:!1,mode:0,content:"",title:"",postInfo:{floor:0,title:"",content:"",contentType:0},tag1:"",tag2:"",fetchState:"ok",boardId:1,type:0,topicInfo:{},voteInfo:{voteItems:["",""],expiredDays:0,maxVoteCount:0,needVote:!1},mdeState:"",commands:[],notice:!0,houseTmpVisible:!1,anonymousState:0,isAnonymous:!1,wealth:""},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s,c,l,u,m,p,d,h,f,g,b,v,y;return Object(i.d)(this,(function(i){switch(i.label){case 0:return e=this.match.params.mode,t=this.match.params.id,[4,ha()];case 1:switch(n=i.sent(),(a=new Headers).append("Authorization",n),Jl.editor=this,c=function(){return[{commands:[Jl]}]},l=ws.ReactMdeCommands.getDefaultCommands(),(u=l.concat(c()))[1].commands.length=3,this.setState({commands:u}),e){case"postTopic":case"postVoteTopic":return[3,2];case"edit":return[3,6]}return[3,16];case 2:return[4,ga("/Board/".concat(t),{headers:a})];case 3:case 13:return[4,(r=i.sent()).json()];case 4:return o=i.sent(),m=o.name,p=o.anonymousState,[4,Jr(t)];case 5:return s=i.sent(),this.setState({boardName:m,tags:s,boardId:t,masters:o.boardMasters,anonymousState:p}),[3,16];case 6:return[4,ga("/post/".concat(t,"/original"),{headers:a})];case 7:return 403===(r=i.sent()).status&&this.setState({fetchState:"not allowed"}),[4,r.json()];case 8:return[4,$r((o=i.sent()).topicId)];case 9:return[4,no((d=i.sent()).tag1)];case 10:return(h=i.sent())||(h=""),[4,no(d.tag2)];case 11:return(f=i.sent())||(f=""),g=d.type,[4,Jr(o.boardId)];case 12:return s=i.sent(),la("contentCache",o.content),pa("contentCache"),[4,ga("/Board/".concat(o.boardId),{headers:a})];case 14:return b=i.sent().boardMasters,ua()&&!qr(b)&&-1===(ua().userTitleIds||[]).indexOf(91)&&1===g&&(g=0),[4,$a(o.boardId)];case 15:return v=i.sent(),0===o.contentType?this.setState({masters:b,postInfo:o,content:o.content,title:o.title,boardName:v,boardId:o.boardId,type:g,tags:s,topicInfo:d,tag1:h,tag2:f,mode:0,notice:d.notifyPoster,isAnonymous:o.isAnonymous}):this.setState({masters:b,postInfo:o,content:o.content,title:o.title,boardName:v,boardId:o.boardId,type:g,tags:s,topicInfo:d,tag1:h,tag2:f,mode:1,mdeState:o.content,notice:d.notifyPoster,isAnonymous:o.isAnonymous}),[3,16];case 16:return i.trys.push([16,18,,19]),[4,Uo()];case 17:return y=i.sent(),[3,19];case 18:return i.sent(),y="查询财富值余额失败，请前往个人中心查看",[3,19];case 19:return this.setState({wealth:y}),[2]}}))}))},t.prototype.changeNormalType=function(){this.setState({type:0})},t.prototype.changeAcademicType=function(){this.setState({type:2})},t.prototype.changeActivityType=function(){this.setState({type:1})},t.prototype.ready=function(){this.setState({ready:!0})},t.prototype.changeEditor=function(){confirm("切换编辑器会丢失您之前的编辑内容，确定要切换吗？")&&(0===this.state.mode?this.setState({mode:1}):this.setState({mode:0}))},t.prototype.update=function(e){this.setState({content:e})},t.prototype.editUBB=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s,c,l,u;return Object(i.d)(this,(function(i){switch(i.label){case 0:return e="/post/".concat(this.match.params.id),[4,to(this.state.tag1)];case 1:return t=i.sent(),[4,to(this.state.tag2)];case 2:return n=i.sent(),a=t&&!n?{content:this.state.content,contentType:0,title:this.state.title,tag1:t,type:this.state.type,notifyPoster:this.state.notice}:n?{content:this.state.content,contentType:0,title:this.state.title,tag1:t,tag2:n,type:this.state.type,notifyPoster:this.state.notice}:{content:this.state.content,contentType:0,title:this.state.title,type:this.state.type,notifyPoster:this.state.notice},r=JSON.stringify(a),[4,ha()];case 3:return i.sent(),[4,fa()];case 4:return(o=i.sent()).append("Content-Type","application/json"),[4,ga(e,{method:"PUT",headers:o,body:r})];case 5:return i.sent(),s=this.state.postInfo.floor,c=s%10==0?10:s%10,l=s%10==0?s/10:(s-s%10)/10+1,da("contentCache"),u="/topic/".concat(this.state.postInfo.topicId,"/").concat(l,"#").concat(c),this.props.history.push(u),[2]}}))}))},t.prototype.editMd=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n,a,r,o,s,c,l,u,m;return Object(i.d)(this,(function(i){switch(i.label){case 0:return e="/post/".concat(this.match.params.id),t=this.state.mdeState,[4,to(this.state.tag1)];case 1:return a=i.sent(),[4,to(this.state.tag2)];case 2:return r=i.sent(),!a||r?[3,4]:[4,to(this.state.tag1)];case 3:return a=i.sent(),n={content:t,contentType:1,title:this.state.title,tag1:a,type:this.state.type,notifyPoster:this.state.notice},[3,5];case 4:n=r?{content:t,contentType:1,title:this.state.title,tag1:a,tag2:r,type:this.state.type,notifyPoster:this.state.notice}:{content:t,contentType:1,title:this.state.title,type:this.state.type,notifyPoster:this.state.notice},i.label=5;case 5:return o=JSON.stringify(n),[4,ha()];case 6:return i.sent(),[4,fa()];case 7:return(s=i.sent()).append("Content-Type","application/json"),[4,ga(e,{method:"PUT",headers:s,body:o})];case 8:return i.sent(),c=this.state.postInfo.floor,l=c%10==0?10:c%10,u=c%10==0?c/10:(c-c%10)/10+1,m="/topic/".concat(this.state.postInfo.topicId,"/").concat(u,"#").concat(l),da("contentCache"),this.props.history.push(m),[2]}}))}))},t.prototype.onTitleChange=function(e,t,n){""!=e?this.setState({title:e,tag1:t,tag2:n}):this.setState({tag1:t,tag2:n})},t.prototype.onUbbChange=function(e){this.setState({content:e})},t.prototype.onVoteInfoChange=function(e){this.setState({voteInfo:e})},t.prototype.render=function(){var e,t=this,n=(pa("contentCache"),this.match.params.mode),a=this.match.params.id,r="/board/".concat(this.state.boardId),o=null;if("postTopic"===n||"postVoteTopic"===n){o=c.createElement(nu,{boardId:a,tags:this.state.tags,onChange:this.onTitleChange.bind(this),title:this.state.postInfo.title,tag1:0,tag2:0});var s=void 0,i=void 0;0===this.state.anonymousState||"postVoteTopic"===n?(s=c.createElement("div",{className:"row",style:{justifyContent:"center"}},c.createElement("button",{id:"post-topic-button",onClick:this.sendOnymousUbbTopic,className:"button blue"},"发帖")),i=c.createElement("div",{className:"row",style:{justifyContent:"center"}},c.createElement("button",{id:"post-topic-button",onClick:this.sendOnymousMdTopic,className:"button blue"},"发帖"))):1===this.state.anonymousState?(s=c.createElement("div",{className:"row",style:{justifyContent:"center"}},c.createElement("button",{id:"post-topic-button-anonymous",onClick:this.sendAnonymousUbbTopic,className:"button grey"},"匿名发帖")),i=c.createElement("div",{className:"row",style:{justifyContent:"center"}},c.createElement("button",{id:"post-topic-button-anonymous",onClick:this.sendAnonymousMdTopic,className:"button grey"},"匿名发帖"))):2===this.state.anonymousState&&(s=c.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},c.createElement("div",null,c.createElement("button",{id:"post-topic-button",onClick:this.sendOnymousUbbTopic,className:"button blue"},"发帖"),c.createElement("button",{id:"post-topic-button-anonymous",onClick:this.sendAnonymousUbbTopic,className:"button grey"},"匿名发帖")),c.createElement("p",null,"在本版面匿名发主题每次需消耗10000财富值。你当前的财富值余额为：",this.state.wealth)),i=c.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},c.createElement("div",null,c.createElement("button",{id:"post-topic-button",onClick:this.sendOnymousMdTopic,className:"button blue"},"发帖"),c.createElement("button",{id:"post-topic-button-anonymous",onClick:this.sendAnonymousMdTopic,className:"button grey"},"匿名发帖")),c.createElement("p",null,"在本版面匿名发主题每次需消耗10000财富值。你当前的财富值余额为：",this.state.wealth))),e=0===this.state.mode?c.createElement("div",null,c.createElement("div",{className:"createTopicContent"},c.createElement("div",{className:"createTopicListName"},"主题内容"),c.createElement("div",{id:"post-topic-changeMode",onClick:this.changeEditor,className:"hiddenImage",style:{width:"12rem",marginTop:"0rem"}},"切换到Markdown编辑器")),c.createElement(os,{update:this.update,value:this.state.content,option:{height:20,submit:this.sendOnymousUbbTopic}}),s):c.createElement("div",{style:{display:"flex",flexDirection:"column"}},c.createElement("div",{className:"createTopicContent"},c.createElement("div",{className:"createTopicListName"},"主题内容"),c.createElement("div",{id:"post-topic-changeMode",onClick:this.changeEditor,className:"hiddenImage",style:{width:"12rem",marginTop:"0rem"}},"切换到UBB编辑器")),c.createElement(Ns.a,{value:this.state.mdeState,onChange:this.handleValueChange,generateMarkdownPreview:function(e){return Promise.resolve(t.converter.makeHtml(e))},commands:this.state.commands,minEditorHeight:330,maxEditorHeight:500,buttonContentOptions:{iconProvider:function(e){return"heading"===e?c.createElement("i",{className:"fa fa-header"}):c.createElement("i",{className:"fa fa-".concat(e)})}}}),i)}else"edit"===n&&(0===this.state.mode?e=c.createElement("div",null,c.createElement("div",{className:"createTopicContent"},c.createElement("div",{className:"createTopicListName"},"主题内容"),c.createElement("div",{id:"post-topic-changeMode",onClick:this.changeEditor,className:"hiddenImage",style:{width:"12rem",marginTop:"0rem"}},"切换到Markdown编辑器")),c.createElement(os,{update:this.update,value:this.state.content,option:{submit:this.editUBB.bind(this)}}),c.createElement("div",{className:"row",style:{justifyContent:"center"}},c.createElement("button",{id:"post-topic-button",onClick:this.editUBB,className:"button blue"},"编辑"))):1===this.state.mode&&(e=c.createElement("div",{style:{display:"flex",flexDirection:"column"}},c.createElement("div",{className:"createTopicContent"},c.createElement("div",{className:"createTopicListName"},"主题内容"),c.createElement("div",{id:"post-topic-changeMode",onClick:this.changeEditor,className:"hiddenImage",style:{width:"12rem",marginTop:"0rem"}},"切换到UBB编辑器")),c.createElement(Ns.a,{value:this.state.mdeState,onChange:this.handleValueChange,generateMarkdownPreview:function(e){return Promise.resolve(t.converter.makeHtml(e))},commands:this.state.commands,minEditorHeight:330,maxEditorHeight:500,buttonContentOptions:{iconProvider:function(e){return"heading"===e?c.createElement("i",{className:"fa fa-header"}):c.createElement("i",{className:"fa fa-".concat(e)})}}}),c.createElement("button",{id:"post-topic-button",onClick:this.editMd.bind(this),className:"button blue"},"编辑"))),1===this.state.postInfo.floor&&(o=c.createElement(nu,{boardId:a,tags:this.state.tags,onChange:this.onTitleChange.bind(this),title:this.state.postInfo.title,tag1:this.state.topicInfo.tag1,tag2:this.state.topicInfo.tag2})));this.state.type;var l=c.createElement("div",{className:"createTopicType"},c.createElement("div",{className:"createTopicListName"},"发帖类型"),c.createElement("input",{type:"radio",name:"type",value:"普通",onClick:this.changeNormalType,checked:0===this.state.type})," ","普通",c.createElement("input",{type:"radio",name:"type",value:"学术通知",onClick:this.changeAcademicType,checked:2===this.state.type})," ","学术通知",c.createElement("div",{style:{color:"rgb(255,0,0)"}},"（活动帖和学术帖请选择正确的发帖类型)"));qr(this.state.masters),ua()&&(qr(this.state.masters)||-1!==(ua().userTitleIds||[]).indexOf(91))&&(l=c.createElement("div",{className:"createTopicType"},c.createElement("div",{className:"createTopicListName"},"发帖类型"),c.createElement("input",{type:"radio",name:"type",value:"普通",onClick:this.changeNormalType,checked:0===this.state.type})," ","普通",c.createElement("input",{type:"radio",name:"type",value:"学术通知",onClick:this.changeAcademicType,checked:2===this.state.type})," ","学术通知",c.createElement("input",{type:"radio",name:"type",value:"校园活动",onClick:this.changeActivityType,checked:1===this.state.type})," ","校园活动",c.createElement("div",{style:{color:"rgb(255,0,0)"}},"（活动帖和学术帖请选择正确的发帖类型)")));var u=c.createElement("div",{className:"createTopicType"},c.createElement("div",{className:"createTopicListName"},"高级选项"),c.createElement("input",{style:{marginLeft:"5px"},type:"checkbox",name:"option",value:"notNotice",onClick:this.notNotice,checked:this.state.notice})," ","接收消息提醒");1!==this.state.postInfo.floor&&"edit"===n&&(l=null,u=null);var m=null;return 515===Number(this.state.boardId)&&(m=c.createElement(c.Fragment,null,c.createElement("div",{style:{marginBottom:"15px"}},c.createElement(Bn.a,{style:{width:"150px"},type:"primary",size:"default",onClick:this.showModal},"住房信息模板"),c.createElement("span",{style:{color:"red",marginLeft:"10px"}},"(出租、合租、转租、出售等已有房源必填)z")),c.createElement(ru,{visible:this.state.houseTmpVisible,submit:this.handleTmpForm}))),c.createElement("div",{className:"createTopic"},c.createElement(tu,{url:r,boardName:this.state.boardName,mode:n}),o,l,u,m,"postVoteTopic"===n?c.createElement($l,{voteInfo:this.state.voteInfo,onVoteInfoChange:this.onVoteInfoChange}):null,e)},t}(Jo),tu=function(e){function t(t){var n=e.call(this,t)||this;return n.state={url:"",boardName:""},n}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({url:e.url,boardName:e.boardName})},t.prototype.render=function(){var e;return"postTopic"===this.props.mode?e="发表主题":"edit"===this.props.mode?e="编辑主题":"postVoteTopic"===this.props.mode&&(e="发表投票主题"),c.createElement("div",{className:"row",style:{alignItems:"baseline",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"},to:this.state.url},this.state.boardName),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement("div",{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"}},e))},t}(c.Component),nu=(function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",null)}}(c.Component),function(e){function t(t){var n=e.call(this,t)||this;return n.bindEvent=function(){return Object(i.b)(n,void 0,void 0,(function(){var e,t,n,a,r,o,s,c,l,u;return Object(i.d)(this,(function(i){switch(i.label){case 0:return 0===(e=ve(".tagBoxSelect")).length?[2]:(this.setState({hasEvent:!0}),t=ve(".downArrow"),n=ve(".tagBoxSub"),a=n.find("li"),ve(document).click((function(){n.css("display","none")})),e.click((function(){return"block"===n.css("display")?n.css("display","none"):n.css("display","block"),!1})),t.click((function(){return"block"===n.css("display")?n.css("display","none"):n.css("display","block"),!1})),a.click((function(){e.text(ve(this).text())})),a.mouseover((function(){this.className="hover"})),a.mouseout((function(){this.className=""})),r=ve(".tagBoxSelect1"),o=ve(".downArrow1"),s=ve(".tagBoxSub1"),c=s.find("li"),ve(document).click((function(){s.css("display","none")})),r.click((function(){return"block"===s.css("display")?s.css("display","none"):s.css("display","block"),!1})),o.click((function(){return"block"===s.css("display")?s.css("display","none"):s.css("display","block"),!1})),c.click((function(){r.text(ve(this).text())})),c.mouseover((function(){this.className="hover"})),c.mouseout((function(){this.className=""})),l="",u="",0===this.props.tag1?[3,2]:[4,no(this.props.tag1)]);case 1:l=i.sent(),i.label=2;case 2:return 0===this.props.tag2?[3,4]:[4,no(this.props.tag2)];case 3:u=i.sent(),i.label=4;case 4:return this.props.title&&!this.state.title?this.setState({title:this.props.title,tags:this.props.tags,tag1:l,tag2:u}):this.setState({tags:this.props.tags,tag1:l,tag2:u}),[2]}}))}))},n.handleTagChange=n.handleTagChange.bind(n),n.handleTitleChange=n.handleTitleChange.bind(n),n.generateTagOption=n.generateTagOption.bind(n),n.state={title:n.props.title,tags:n.props.tags,tag1:"",tag2:"",hasEvent:!1},n}return Object(i.c)(t,e),t.prototype.handleTitleChange=function(e){var t,n;0===this.state.tags.length?(this.props.onChange(e.target.value,"",""),this.setState({title:e.target.value})):1===this.state.tags.length?(t=ve(".tagBoxSelect").text(),this.props.onChange(e.target.value,t,""),this.setState({title:e.target.value})):(t=ve(".tagBoxSelect").text(),n=ve(".tagBoxSelect1").text(),this.props.onChange(e.target.value,t,n),this.setState({title:e.target.value}))},t.prototype.handleTagChange=function(){var e=ve(".tagBoxSelect").text(),t=ve(".tagBoxSelect1").text();this.props.onChange("",e,t)},t.prototype.componentWillReceiveProps=function(e){e.title&&!this.state.title?this.setState({title:e.title,tags:e.tags}):this.setState({tags:e.tags})},t.prototype.componentDidMount=function(){this.state.tags.length>0&&this.bindEvent()},t.prototype.componentDidUpdate=function(){this.state.hasEvent||this.bindEvent()},t.prototype.generateTagOption=function(e){return c.createElement("li",{onClick:this.handleTagChange},e.name)},t.prototype.render=function(){var e=null,t=null;this.state.tags.length>0&&(e=c.createElement("ul",{className:"tagBoxSub"},this.state.tags[0].tags.map(this.generateTagOption))),2===this.state.tags.length&&(t=c.createElement("ul",{className:"tagBoxSub1"},this.state.tags[1].tags.map(this.generateTagOption)));var n=null;if(2===this.state.tags.length){var a="",r="";this.state.tag1&&(a=this.state.tag1),this.state.tag2&&(r=this.state.tag2),n=c.createElement("div",{className:"row"},c.createElement("div",{className:"row"},c.createElement("div",{className:"tagBoxSelect"},a),c.createElement("div",{className:"downArrow"},c.createElement("img",{src:"/static/images/downArrow.png",width:"12",height:"12"})),e),c.createElement("div",{className:"row"},c.createElement("div",{className:"tagBoxSelect1"},r),c.createElement("div",{className:"downArrow1"},c.createElement("img",{src:"/static/images/downArrow.png",width:"12",height:"12"})),t))}else if(1==this.state.tags.length){a="";this.state.tag1&&(a=this.state.tag1),n=c.createElement("div",{className:"row"},c.createElement("div",{className:"tagBoxSelect"},a),c.createElement("div",{className:"downArrow"},c.createElement("img",{src:"/static/images/downArrow.png",width:"12",height:"12"})),e)}return c.createElement("div",{className:"createTopicTitle"},c.createElement("div",{className:"createTopicListName"},"主题标题"),n,c.createElement("input",{value:this.state.title,placeholder:"请输入新主题的标题",onChange:this.handleTitleChange.bind(this)}))},t}(c.Component)),au=(function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"createTopicOption"},c.createElement("div",{className:"createTopicListName"},"选项"),c.createElement("input",{type:"radio",checked:!0,name:"option",value:"all"}),"回复所有人可见",c.createElement("input",{type:"radio",name:"option",value:"host"}),"回复仅楼主可见",c.createElement("input",{type:"radio",name:"option",value:"special"}),"回复仅特定用户可见")}}(c.Component),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={elecRadio:"",waterElecRadio:"",elecValue:"",waterElecValue:"",visible:t.props.visible},t.onWaterElecChange=function(e){t.setState({waterElecRadio:e.target.value})},t.onElecChange=function(e){t.setState({elecRadio:e.target.value})},t.onHandleSubmit=function(e){e.preventDefault();t.refs.tmpForm;t.props.form.validateFields((function(e,n){e||("其他"===t.state.elecRadio&&(n.isElectricIsolated=t.state.elecValue),"其他"===t.state.waterElecRadio&&(n.waterElecValue=t.state.waterElecValue),t.props.submit(n),t.setState({visible:!1}))}))},t.onCancel=function(){t.setState({visible:!1})},t}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){this.setState({visible:e.visible})},t.prototype.render=function(){var e=this,t=this.props.form.getFieldDecorator;return c.createElement(Ln.a,{title:"住房信息模板",visible:this.state.visible,onOk:this.onHandleSubmit,onCancel:this.onCancel},c.createElement(ss.a,Object(i.a)({ref:"tmpForm",style:{maxHeight:"500px",overflowY:"scroll"}},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.onHandleSubmit}),c.createElement(ss.a.Item,{label:"有效时间"},t("validDate",{rules:[{type:"array",required:!0,message:"Please select time!"}]})(c.createElement(Kl,{renderExtraFooter:function(){return"不能大于2周，到期可编辑"}}))),c.createElement(ss.a.Item,{label:"类型",hasFeedback:!0},t("type",{rules:[{required:!0,message:"请选择类型!"}]})(c.createElement(ls.a,{placeholder:"请选择类型"},c.createElement(Xl,{value:"整租"},"整租"),c.createElement(Xl,{value:"合租"},"合租"),c.createElement(Xl,{value:"转租"},"转租"),c.createElement(Xl,{value:"出售"},"出售"),c.createElement(Xl,{value:"其他"},"其他")))),c.createElement(ss.a.Item,{label:"地区"},t("district",{rules:[{required:!0,message:"请输入地区!"}]})(c.createElement(cs.a,{placeholder:"例如：紫金港 / 玉泉 / 文一西路xx路交叉口处 / 上海的xx路附近"}))),c.createElement(ss.a.Item,{label:"小区名称"},t("neighborhood",{rules:[{required:!0,message:"请输入小区名称!"}]})(c.createElement(cs.a,{placeholder:"例如：港湾家园"}))),c.createElement(ss.a.Item,{label:"详细地址"},t("address",{rules:[{required:!0,message:"请输入详细地址!"}]})(c.createElement(cs.a,{placeholder:"例如：余杭塘路866号港湾家园X幢X单元X号"}))),c.createElement(ss.a.Item,{label:"联系方式"},t("contact",{rules:[{required:!0,message:"请输入联系方式!"}]})(c.createElement(cs.a,{placeholder:"例如：张房东 电话18888888888 / 李女士 微信1234abc"}))),c.createElement(ss.a.Item,{label:"价格"},t("price",{rules:[{required:!0,message:"请输入价格!"}]})(c.createElement(cs.a,{placeholder:"例如：2000元/月"}))),c.createElement(ss.a.Item,{label:"租期"},t("rentDays",{rules:[{required:!0,message:"请输入租期!"}]})(c.createElement(cs.a,{placeholder:"例如：6个月起租"}))),c.createElement(ss.a.Item,{label:"房户类型"},t("houseType",{rules:[{required:!0,message:"请输入房户类型!"}]})(c.createElement(cs.a,{placeholder:"例如：4室0厅1阳1卫1厨（指包括要出租的房间数量，加上公用的区域，私用的不算入）"}))),c.createElement(ss.a.Item,{label:"出租类型"},t("rentType",{rules:[{required:!0,message:"请输入出租类型!"}]})(c.createElement(cs.a,{placeholder:"（指本次出租的房间）例如： 单间（独卫带阳台）/ 单间（独卫）/  单间 "}))),c.createElement(ss.a.Item,{label:"出租面积"},t("area",{rules:[{required:!0,message:"请输入出租面积!"}]})(c.createElement(cs.a,{placeholder:"（指本次出租的房间）例如：20平米"}))),c.createElement(ss.a.Item,{label:"可租期限"},t("range",{rules:[{required:!0,message:"请输入可租期限!"}]})(c.createElement(cs.a,{placeholder:"例如：到2017年11月7日 / 长期 （指合约可以签到什么时候）"}))),c.createElement(ss.a.Item,{label:"付款方式"},t("paymentType",{rules:[{required:!0,message:"请输入付款方式!"}]})(c.createElement(cs.a,{placeholder:" 例如：押1付1  /  押1付2"}))),c.createElement(ss.a.Item,{label:"是否为隔间"},t("isSingleRoom",{rules:[{required:!0,message:"请输入是否为隔间!"}]})(c.createElement(Ql.a.Group,null,c.createElement(Ql.a,{value:"是"},"是"),c.createElement(Ql.a,{value:"否"},"否")))),c.createElement(ss.a.Item,{label:"独立电表"},t("isElectricIsolated",{rules:[{required:!0,message:"请输入电表方式!"}]})(c.createElement(Ql.a.Group,{onChange:this.onElecChange},c.createElement(Ql.a,{value:"是"},"是"),c.createElement(Ql.a,{value:"否"},"否"),c.createElement(Ql.a,{value:"空调独立电表"},"空调独立电表"),c.createElement(Ql.a,{value:"其他"},"其他","其他"===this.state.elecRadio?c.createElement(cs.a,{onChange:function(t){return e.setState({elecValue:t.target.value})},style:{width:100,marginLeft:10}}):null)))),c.createElement(ss.a.Item,{label:"水电缴费"},t("waterElecValue",{rules:[{required:!0,message:"请输入水电缴费!"}]})(c.createElement(Ql.a.Group,{onChange:this.onWaterElecChange},c.createElement(Ql.a,{value:"每月一付"},"每月一付"),c.createElement(Ql.a,{value:"每季一付"},"每季一付"),c.createElement(Ql.a,{value:"退租结算"},"退租结算"),c.createElement(Ql.a,{value:"其他"},"其他","其他"===this.state.elecRadio?c.createElement(cs.a,{onChange:function(t){return e.setState({waterElecValue:t.target.value})},style:{width:100,marginLeft:10}}):null)))),c.createElement(ss.a.Item,{label:"日常卫生"},t("cleaning",{})(c.createElement(cs.a,{placeholder:"例如：自理 / 每周1次"}))),c.createElement(ss.a.Item,{label:"维修物业"},t("repairing",{})(c.createElement(cs.a,{placeholder:"例如：合租统一由房东承担、整租自行商议"}))),c.createElement(ss.a.Item,{label:"网络带宽"},t("networking",{})(c.createElement(cs.a,{placeholder:"例如：有，电信20M宽带 / 无，自理"}))),c.createElement(ss.a.Item,{label:"退租方式"},t("checkout",{})(c.createElement(cs.a,{placeholder:"例如：合同到期，退还钥匙取回全额押金"}))),c.createElement(ss.a.Item,{label:"其他描述"},t("otherDescriptions",{rules:[{required:!1}]})(c.createElement(Zl,{rows:4,placeholder:"此处添加任何合适的描述，可以包括家具设备、地理优势、水电网物业详细、入住情况、朝向等相关信息描述"}))),c.createElement(ss.a.Item,{label:"其他要求"},t("otherDemands",{rules:[{required:!1}]})(c.createElement(Zl,{rows:4,placeholder:"例如：无 / 由于XXX原因，希望找一个男生/女生/上班族/不接受情侣/……"}))),c.createElement(ss.a.Item,null,"图片请点击下方编辑器的图片上传按钮上传，其他未尽内容请在下方编辑器输入。")))},t}(c.Component)),ru=ss.a.create()(au),ou=Object(qo.a)(eu),su=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"row",style:{alignItems:"baseline",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement("div",{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"}},"30日热门话题"))},t}(c.Component);function iu(e){return c.createElement(kc,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,lastPostUser:e.lastPostUser,lastPostTime:e.lastPostTime,tag1:e.tag1,tag2:e.tag2,floorCount:e.floorCount,contentType:e.contentType,mediaContent:e.mediaContent})}var cu=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:[],from:0},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,jo("monthly")];case 1:return e=t.sent(),this.setState({data:e}),[2]}}))}))},t.prototype.render=function(){return c.createElement("div",{className:"focus-root"},c.createElement(an,{title:"30日热门话题 - CC98论坛"}),c.createElement("div",{className:"focus"},c.createElement(su,null),c.createElement("div",{className:"focus-topic-area"},c.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(iu)))))},t}(c.Component),lu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"row",style:{alignItems:"baseline",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement("div",{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"}},"7日热门话题"))},t}(c.Component);function uu(e){return c.createElement(kc,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,lastPostUser:e.lastPostUser,lastPostTime:e.lastPostTime,tag1:e.tag1,tag2:e.tag2,floorCount:e.floorCount,contentType:e.contentType,mediaContent:e.mediaContent})}var mu=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:[],from:0},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,jo("weekly")];case 1:return e=t.sent(),this.setState({data:e}),[2]}}))}))},t.prototype.render=function(){return c.createElement("div",{className:"focus-root"},c.createElement(an,{title:"7日热门话题 - CC98论坛"}),c.createElement("div",{className:"focus"},c.createElement(lu,null),c.createElement("div",{className:"focus-topic-area"},c.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(uu)))))},t}(c.Component),pu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement("div",{className:"row",style:{alignItems:"baseline",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement("div",{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem",marginRight:"0.5rem"}},"历史上的今天"))},t}(c.Component);function du(e){return c.createElement(kc,{title:e.title,hitCount:e.hitCount,id:e.id,boardId:e.boardId,boardName:e.boardName,replyCount:e.replyCount,userId:e.userId,userName:e.userName,portraitUrl:e.portraitUrl,time:e.time,likeCount:e.likeCount,dislikeCount:e.dislikeCount,lastPostUser:e.lastPostUser,lastPostTime:e.lastPostTime,tag1:e.tag1,tag2:e.tag2,floorCount:e.floorCount,contentType:e.contentType,mediaContent:e.mediaContent})}var hu=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:[],from:0},n}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,jo("history")];case 1:return e=t.sent(),this.setState({data:e}),[2]}}))}))},t.prototype.render=function(){return c.createElement("div",{className:"focus-root"},c.createElement(an,{title:"历史上的今天 - CC98论坛"}),c.createElement("div",{className:"focus"},c.createElement(pu,null),c.createElement("div",{className:"focus-topic-area"},c.createElement("div",{className:"focus-topic-topicArea"},this.state.data.map(du)))))},t}(c.Component),fu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.location.pathname!==e.location.pathname&&this.props.solveError()},t.prototype.render=function(){return null},t}(c.Component);var gu=Object(Ia.b)((function(e){return{isError:e.error.isError}}),(function(e){return{solveError:function(){e(he())}}}))(fu),bu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props.data;return l.a.createElement("div",{className:"annual-review-page annual-review-page-bg-cat",style:{lineHeight:1.25}},l.a.createElement("div",{style:{fontWeight:"bolder",marginTop:"2rem"}},"亲爱的CC98用户 ",e.userInfo.name,"："),l.a.createElement("img",{style:{borderRadius:"50%",marginTop:"0.5rem"},width:"60px",src:"".concat(e.userInfo.portraitUrl)}),l.a.createElement("div",null,"在过去的2022年里，你有",l.a.createElement("span",{className:"annual-review-page2-topicCount"},e.postDay),"天"),l.a.createElement("div",null,"在CC98论坛上留下了痕迹。"),l.a.createElement("div",{style:{marginTop:"1rem"}},"你发表了",l.a.createElement("span",{className:"annual-review-page2-topicCount"},e.topicCount),"个主题帖，"),l.a.createElement("div",null,"进行了",l.a.createElement("span",{className:"annual-review-page2-replyCount"},e.replyCount),"次回复，"),0!==e.hotTopicCount&&l.a.createElement("div",null,"上了",l.a.createElement("span",{className:"annual-review-page2-hotTopicCount"},e.hotTopicCount),"次十大热门话题。"),0===e.hotTopicCount&&l.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"1rem"}},l.a.createElement("div",null,"很遗憾，"),l.a.createElement("div",null,"你的主题帖没上过十大热门话题。")))},t}(l.a.Component),vu=bu,yu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props.data;return l.a.createElement("div",{className:"annual-review-page annual-review-page-bg-rabbit"},l.a.createElement("div",{style:{marginTop:"1rem"}},"你送出了",l.a.createElement("span",{className:"annual-review-page2-topicCount"},e.sendLikeCount),"个赞，"),l.a.createElement("div",null,"收到他人给你的",l.a.createElement("span",{className:"annual-review-page2-replyCount"},e.receiveLikeCount),"个赞。"),l.a.createElement("div",{style:{marginTop:"1.5rem"}},"你给他人评分",l.a.createElement("span",{className:"annual-review-page2-topicCount"},e.sendRateCount),"次，"),l.a.createElement("div",null,"收到了他人给你的",l.a.createElement("span",{className:"annual-review-page2-replyCount"},e.receiveRateCount),"次评分。"),e.sofaCount>20&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{marginTop:"1.5rem"}},"你眼疾手快，"),l.a.createElement("div",null,"抢到了",l.a.createElement("span",{className:"annual-review-page2-replyCount"},e.sofaCount),"次沙发。")),e.sofaCount<=20&&e.sofaCount>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{marginTop:"1.5rem"}},"你手速尚可，"),l.a.createElement("div",null,"抢到了",l.a.createElement("span",{className:"annual-review-page2-replyCount"},e.sofaCount),"次沙发。")),0===e.sofaCount&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{marginTop:"1.5rem"}},"你佛系水帖，"),l.a.createElement("div",null,"从未抢到过沙发。")))},t}(l.a.Component),Eu=yu,Iu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props.data;return e.mostReplyTopicCount||e.mostViewTopicCount?l.a.createElement("div",{className:"annual-review-page annual-review-page-bg-cat"},l.a.createElement("div",null,"在你一年发表的主题帖中，"),0!==e.mostReplyTopicCount&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,"收到最多回复的一次，"),l.a.createElement("div",null,"共有",l.a.createElement("span",{className:"annual-review-page2-topicCount"},e.mostReplyTopicCount),"个回复；")),0!==e.mostViewTopicCount&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,"点击量最多的一次，"),l.a.createElement("div",null,"共有",l.a.createElement("span",{className:"annual-review-page2-replyCount"},e.mostViewTopicCount),"次点击。")),0!==e.mostReceiveLikePostCount&&l.a.createElement("div",{style:{marginTop:"2rem"}},"你收获他人点赞最多的一个发言，"),0!==e.mostReceiveLikePostCount&&l.a.createElement("div",null,"共收到了",l.a.createElement("span",{className:"annual-review-page2-hotTopicCount"},e.mostReceiveLikePostCount),"个赞。")):l.a.createElement("div",{className:"annual-review-page annual-review-page-bg-cat"},"在过去的一年里，你还没有发过主题帖...")},t}(l.a.Component),Cu=Iu;n(1259);Dn.a.locale("zh-cn");var wu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.getBoardUrlById=function(e){return"/board/"+e},t.prototype.render=function(){var e=this.props.data,t=null;return t=e.board1||e.board2||e.board3?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{marginTop:"2rem"}},"你最爱发言的版面是："),l.a.createElement("div",null,l.a.createElement("a",{href:this.getBoardUrlById(e.board1)},l.a.createElement("span",{className:"annual-review-page2-topicCount"},Ha(e.board1)))),l.a.createElement("div",null,e.board2&&l.a.createElement("a",{href:this.getBoardUrlById(e.board2)},l.a.createElement("span",{className:"annual-review-page2-replyCount"},Ha(e.board2)))),l.a.createElement("div",null,e.board3&&l.a.createElement("a",{href:this.getBoardUrlById(e.board3)},l.a.createElement("span",{className:"annual-review-page2-hotTopicCount"},Ha(e.board3))))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,"你在过去的一年中没有发言，"),l.a.createElement("div",null,"新的一年要加油哦~")),l.a.createElement("div",{className:"annual-review-page annual-review-page-bg-rabbit"},t,e.latestPostTime&&l.a.createElement("div",{style:{marginTop:"1rem"}},"在"," ",l.a.createElement("span",{className:"annual-review-page2-hotTopicCount"},Dn()(e.latestPostTime).format("LL")),"这天，"),e.latestPostTime&&l.a.createElement("div",null,"你熬夜得最晚，"),e.latestPostTime&&l.a.createElement("div",null," ",l.a.createElement("span",{className:"annual-review-page2-topicCount"},Dn()(e.latestPostTime).format("a hh [:] mm")),"还在98发言。"))},t}(l.a.Component),Nu=wu,Ou=n(174),ju=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.getBoardUrlById=function(e){return"/board/"+e},t.prototype.render=function(){var e=this.props.data,t=null;e.postCount06>0&&(t="深夜"),e.postCount612>e.postCount06&&e.postCount612>e.postCount1218&&e.postCount612>e.postCount1824&&(t="上午"),e.postCount1218>e.postCount06&&e.postCount1218>e.postCount612&&e.postCount1218>e.postCount1824&&(t="下午"),e.postCount1824>e.postCount06&&e.postCount1824>e.postCount1218&&e.postCount1824>e.postCount612&&(t="晚上");var n=[{time:"上午",posts:e.postCount612},{time:"下午",posts:e.postCount1218},{time:"晚上",posts:e.postCount1824},{time:"深夜",posts:e.postCount06}];return l.a.createElement("div",{className:"annual-review-page annual-review-page-bg-cat"},t&&l.a.createElement("div",{style:{marginTop:"7rem",marginBottom:"-2rem"}},"你最喜欢在",l.a.createElement("span",{className:"annual-review-page1-during"},t),"水98。"),l.a.createElement("div",{style:{marginTop:"3rem"}},"你发言的时间段统计如下："),l.a.createElement("div",{style:{marginTop:"1rem",marginRight:"2rem"}},l.a.createElement(Ou.Chart,{width:.5*document.body.clientHeight,height:.35*document.body.clientHeight,data:n,scale:{posts:{alias:"帖数"}},forceFit:!0},l.a.createElement(Ou.Axis,{name:"time"}),l.a.createElement(Ou.Axis,{name:"posts"}),l.a.createElement(Ou.Tooltip,{crosshairs:{type:"y"}}),l.a.createElement(Ou.Geom,{type:"interval",position:"time*posts"}))))},t}(l.a.Component),Tu=ju,Su=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props.data.achievement.split("|"),t=["magenta","volcano","gold","lime"];return l.a.createElement("div",{className:"annual-review-page annual-review-page-bg-rabbit"},l.a.createElement("div",null,"你获得了以下成就："),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginTop:"0.5rem",marginLeft:"1rem",marginRight:"1rem",flexWrap:"wrap"}},e.map((function(e,n){return l.a.createElement(As.a,{style:{fontSize:"2vh",height:"3vh",lineHeight:"2.5vh",marginBottom:"0.5rem"},color:t[n%4]},e)}))),l.a.createElement("div",{style:{marginTop:"2rem"}},"在新春佳节到来之际，"),l.a.createElement("div",null,"CC98论坛祝你："),l.a.createElement("div",null,l.a.createElement("span",{className:"annual-review-page6-congratulation"},"身体健康")),l.a.createElement("div",null,l.a.createElement("span",{className:"annual-review-page6-congratulation"},"学习生活顺利")),l.a.createElement("div",null,l.a.createElement("span",{className:"annual-review-page6-congratulation"},"幸福2023")))},t}(l.a.Component),ku=Su,xu=function(){return l.a.createElement("div",{className:"annual-review-page",style:{backgroundImage:"url('/static/images/annual-review/cover.jpg')"}})},Pu=n(15),Uu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={data:null,page:0},t.previousPage=function(){t.state.page>0&&t.setState({page:t.state.page-1})},t.nextPage=function(){t.state.page<6&&t.setState({page:t.state.page+1})},t.handleWheel=function(e){e.deltaY>0?t.nextPage():e.deltaY<0&&t.previousPage()},t}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,xo()];case 1:return e=t.sent(),this.setState({data:e}),[2]}}))}))},t.prototype.render=function(){var e=this,t=this.state,n=t.data,a=t.page;navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i);return n?(ua()&&(n.userInfo=ua()),l.a.createElement("div",{className:"annual-review-body"},0!==a?l.a.createElement(Pu.a,{type:"up",onClick:this.previousPage,style:{fontSize:"2rem",cursor:"pointer",zIndex:99}}):l.a.createElement("div",{style:{height:"2rem"}}),0===a&&l.a.createElement("div",{onWheel:function(t){return e.handleWheel(t)}},l.a.createElement(xu,null)),1===a&&l.a.createElement("div",{onWheel:function(t){return e.handleWheel(t)},onMouseDown:this.nextPage},l.a.createElement(vu,{data:n})),2===a&&l.a.createElement("div",{onWheel:function(t){return e.handleWheel(t)},onMouseDown:this.nextPage},l.a.createElement(Eu,{data:n})),3===a&&l.a.createElement("div",{onWheel:function(t){return e.handleWheel(t)},onMouseDown:this.nextPage},l.a.createElement(Cu,{data:n})),4===a&&l.a.createElement("div",{onWheel:function(t){return e.handleWheel(t)},onMouseDown:this.nextPage},l.a.createElement(Nu,{data:n})),5===a&&l.a.createElement("div",{onWheel:function(t){return e.handleWheel(t)},onMouseDown:this.nextPage},l.a.createElement(Tu,{data:n})),6===a&&l.a.createElement("div",{onWheel:function(t){return e.handleWheel(t)}},l.a.createElement(ku,{data:n})),6!==a&&l.a.createElement(Pu.a,{type:"down",onClick:this.nextPage,style:{fontSize:"2rem",cursor:"pointer",zIndex:99}}))):l.a.createElement(An.a,null)},t}(l.a.Component),Mu=Uu,_u={announcement:"",hotTopic:[{id:0,title:"",boardId:0,boardName:"",participantCount:0,replyCount:0,hitCount:0,authorName:"",createTime:"",type:0}],recommendationReading:[{id:0,type:0,title:"",content:"",url:"",imageUrl:"",enable:!1,time:"",orderWeight:0,expiredTime:null}],recommendationFunction:[{id:0,type:0,title:"",content:null,url:"",imageUrl:"",enable:!1,time:"",orderWeight:0,expiredTime:null}],schoolNews:[{id:0,type:0,title:"",content:null,url:"",imageUrl:null,enable:!1,time:"",orderWeight:0,expiredTime:null}],schoolEvent:[{id:0,boardId:0,title:"",state:0,type:0,isInternalOnly:!1,isVote:!1}],academics:[{id:0,boardId:0,title:"",state:0,type:0,isInternalOnly:!1,isVote:!1}],study:[{id:0,boardId:0,title:"",state:0,type:0,isInternalOnly:!1,isVote:!1}],emotion:[{id:0,boardId:0,title:"",state:0,type:0,isInternalOnly:!1,isVote:!1}],fleaMarket:[{id:0,boardId:0,title:"",state:0,type:0,isInternalOnly:!1,isVote:!1}],partTimeJob:[{id:0,boardId:0,title:"",state:0,type:0,isInternalOnly:!1,isVote:!1}],fullTimeJob:[{id:0,boardId:0,title:"",state:0,type:0,isInternalOnly:!1,isVote:!1}],todayCount:0,topicCount:0,postCount:0,userCount:0,lastUserName:"",onlineUserCount:0,lastUpdateTime:""},Ru=function(e){function t(t){var n=e.call(this,t)||this;return n.state={data:_u},n}return Object(i.c)(t,e),t.prototype.render=function(){return c.createElement(c.Fragment,null,c.createElement(an,{title:"CC98论坛"}))},t}(c.Component);function Du(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return[4,fa()];case 1:return t=r.sent(),[4,ga("/board/".concat(e),{headers:t})];case 2:switch((n=r.sent()).status){case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,n.json()];case 3:return!1===(a=r.sent()).canEntry?[2,"unauthorized"]:[2,a]}}))}))}function Lu(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return n=20*(parseInt(t)-1),[4,Hu("/board/".concat(e,"/topic?from=").concat(n,"&size=20"))];case 1:return[2,a.sent()]}}))}))}function Fu(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return n=20*(parseInt(t)-1),[4,Hu("/topic/best/board/".concat(e,"?from=").concat(n,"&size=20"))];case 1:return[2,a.sent()]}}))}))}function Bu(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return n=20*(parseInt(t)-1),[4,Hu("/topic/save/board/".concat(e,"?from=").concat(n,"&size=20"))];case 1:return[2,a.sent()]}}))}))}function Au(e,t,n,a){return Object(i.b)(this,void 0,void 0,(function(){var r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return r=20*(parseInt(t)-1),o="",-1!==n&&(o+="tag1=".concat(n,"&")),-1!==a&&(o+="tag2=".concat(a,"&")),[4,Hu("/topic/search/board/".concat(e,"/tag?").concat(o,"from=").concat(r,"&size=20"))];case 1:return[2,s.sent()]}}))}))}function zu(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,fa()];case 1:return t=a.sent(),[4,ga("/topic/toptopics?boardid=".concat(e),{headers:t})];case 2:switch((n=a.sent()).status){case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,n.json()];case 3:return[2,a.sent()]}}))}))}function Vu(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,fa()];case 1:return t=a.sent(),[4,ga("/topic/".concat(e,"/post?from=0&size=10"),{headers:t})];case 2:switch((n=a.sent()).status){case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,n.json()];case 3:return[2,a.sent()]}}))}))}function Hu(e){return Object(i.b)(this,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,fa()];case 1:return t=a.sent(),[4,ga(e,{headers:t})];case 2:switch((n=a.sent()).status){case 404:return[2,"not found"];case 500:return[2,"server error"]}return[4,n.json()];case 3:return[2,a.sent()]}}))}))}function $u(e){return Object(i.b)(this,void 0,void 0,(function(){var t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,fa()];case 1:return t=n.sent(),[4,ga("/board/".concat(e,"/tag"),{headers:t})];case 2:return[4,n.sent().json()];case 3:return[2,n.sent()]}}))}))}function Wu(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r,o;return Object(i.d)(this,(function(s){switch(s.label){case 0:return[4,fa()];case 1:return(n=s.sent()).append("Content-Type","application/json"),a="id=",a+=e.join("&id="),r="/topic/multi-delete?".concat(a),o=JSON.stringify({reason:t}),[4,ga(r,{method:"PUT",headers:n,body:o})];case 2:return[2,s.sent()]}}))}))}function Yu(e,t,n){return Object(i.b)(this,void 0,void 0,(function(){var a,r,o,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,fa()];case 1:return a=i.sent(),r="id=",r+=e.join("&id="),o="/topic/multi-lock?".concat(r),s=JSON.stringify({reason:t,value:n}),a.append("Content-Type","application/json"),[4,ga(o,{method:"PUT",headers:a,body:s})];case 2:return[2,i.sent()]}}))}))}function qu(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return n="/board/".concat(e,"/events?from=").concat(t,"&size=7"),[4,fa()];case 1:return a=r.sent(),[4,ga(n,{headers:a})];case 2:return[4,r.sent().json()];case 3:return[2,r.sent()]}}))}))}function Ju(e,t){return Object(i.b)(this,void 0,void 0,(function(){var n,a,r;return Object(i.d)(this,(function(o){switch(o.label){case 0:return n="/board/".concat(e,"/big-paper"),[4,fa()];case 1:return(a=o.sent()).append("Content-Type","application/json"),r=JSON.stringify({content:t}),[4,ga(n,{method:"PUT",headers:a,body:r})];case 2:return[2,o.sent()]}}))}))}var Gu=n(1274),Qu=xs.a.Panel,Ku=cs.a.TextArea,Xu={background:"#f7f7f7",borderRadius:4,marginBottom:24,border:0,overflow:"hidden",width:"100%"},Zu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isFollow:br(t.props.data.id),loading:!1,editVisible:!1,content:t.props.data.bigPaper},t}return Object(i.c)(t,e),t.prototype.onError=function(e){e.preventDefault(),e.target.src="/static/images/_CC98.png"},t.prototype.generateMasters=function(e){var t=e.toString(),n=encodeURIComponent(e.toString()),a="/user/name/".concat(n);return c.createElement("div",{style:{marginRight:"10px",fontSize:"0.75rem"}},c.createElement("a",{href:a},t))},t.prototype.follow=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return this.setState({loading:!0}),[4,vr(this.props.data.id)];case 1:return e.sent(),this.setState({isFollow:!0,loading:!1}),[2]}}))}))},t.prototype.unfollow=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return this.setState({loading:!0}),[4,Er(this.props.data.id)];case 1:return e.sent(),this.setState({isFollow:!1,loading:!1}),[2]}}))}))},t.prototype.editBigPaper=function(){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return[4,Ju(this.props.data.id.toString(),this.state.content)];case 1:return e.sent(),this.setState({editVisible:!1}),[2]}}))}))},t.prototype.render=function(){var e=this,t=this.props,n=t.data,a=t.isFirstPage,r=this.state,o=r.isFollow,s=r.loading,l=r.editVisible,u=r.content,m="/static/images/_".concat(n.name,".png"),p=qr(n.boardMasters),d=c.createElement("div",{className:"row",style:{height:"4rem"}},c.createElement("div",null,c.createElement("img",{className:"board-avatar",onError:this.onError,src:m})),c.createElement("div",{className:"board-head-name"},n.name),c.createElement(Gu.a,{type:"vertical"}),c.createElement("div",{className:"column",style:{marginLeft:"1rem",marginRight:"1rem"}},c.createElement("div",null,"版面简介：",n.description),c.createElement("div",{className:"row"},"版主：",n.boardMasters.map(this.generateMasters))),c.createElement("div",{className:"row",style:{marginRight:"1rem",flexGrow:2,justifyContent:"flex-end",height:"100%"}},c.createElement("div",{className:"column",style:{marginLeft:"1rem",marginRight:"1rem",height:"100%",justifyContent:"space-around"}},c.createElement("div",{className:"row"},c.createElement(As.a,{color:"grey",style:{width:"5rem",textAlign:"center",marginRight:0,borderTopRightRadius:0,borderBottomRightRadius:0}},"今日贴数"),c.createElement(As.a,{className:"board-head-information",style:{width:"5rem",textAlign:"center",marginRight:0,borderLeft:0,borderTopLeftRadius:0,borderBottomLeftRadius:0}},n.todayCount)),c.createElement("div",{className:"row"},c.createElement(As.a,{color:"grey",style:{width:"5rem",textAlign:"center",marginRight:0,borderTopRightRadius:0,borderBottomRightRadius:0}},"总主题数"),c.createElement(As.a,{className:"board-head-information",style:{width:"5rem",textAlign:"center",marginRight:0,borderLeft:0,borderTopLeftRadius:0,borderBottomLeftRadius:0}},n.topicCount))),c.createElement(Bn.a,{loading:s,onClick:o?function(){return e.unfollow()}:function(){return e.follow()}},o?"取关":"关注"),p&&c.createElement(Bn.a,{style:{marginLeft:"0.5rem"},onClick:function(){return e.setState({editVisible:!0})}},"编辑")));return c.createElement("div",{style:{width:"100%"}},c.createElement(Ln.a,{title:"编辑大字报",visible:l,onOk:function(){return e.editBigPaper()},onCancel:function(){return e.setState({editVisible:!1})},width:"50rem"},"支持UBB代码",c.createElement(Ku,{rows:6,defaultValue:n.bigPaper,onChange:function(t){return e.setState({content:t.target.value})}}),c.createElement(tn,{code:u,options:Object(i.a)(Object(i.a)({},new Ie),{allowToolbox:!1})})),c.createElement(xs.a,{className:"board-bigpaper",bordered:!1,defaultActiveKey:a?["1"]:[]},c.createElement(Qu,{key:"1",showArrow:!1,header:d,style:Xu},n.bigPaper&&c.createElement(c.Fragment,null," ",c.createElement(Gu.a,null),c.createElement(tn,{code:n.bigPaper,options:Object(i.a)(Object(i.a)({},new Ie),{allowToolbox:!1})})))))},t}(c.Component),em=Zu,tm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.data,n=e.page,a=null,r=!1,o=!1,s=!0;return ua()?(r=!0,ua().isVerified?o=!0:(o=!1,a=c.createElement("div",{style:{marginLeft:"1rem",color:"red"}},"您的帐号未认证，无法发言，请先前往",c.createElement("a",{href:"https://account.cc98.org"},"https://account.cc98.org"),"认证激活。")),0!==ua().lockState?(s=!0,a=c.createElement("div",{style:{marginLeft:"1rem",color:"red"}},"您被全站禁言。")):s=!1):a=c.createElement("div",{style:{marginLeft:"1rem",color:"red"}},"您还未登录，不能发帖，请先登录"),c.createElement("div",{className:"board-head-body"},c.createElement(am,{data:t}),c.createElement(em,{key:n,data:t,isFirstPage:"1"===n}),c.createElement("div",{className:"board-head-bar"},r&&o&&!s?c.createElement("div",{className:"row"},c.createElement(vt.a,{to:"/editor/postTopic/".concat(t.id)},c.createElement(Bn.a,{className:"board-head-button"},"发主题")),t.canVote&&c.createElement(vt.a,{to:"/editor/postVoteTopic/".concat(t.id)},c.createElement(Bn.a,{className:"board-head-button",style:{marginLeft:"1rem"}},"发投票"))):a,c.createElement(xn,null)))},t}(c.Component),nm=tm,am=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e="/board/".concat(this.props.data.id);return c.createElement("div",{className:"row",style:{alignItems:"baseline",width:"100% ",justifyContent:"flex-start",color:"grey",fontSize:"0.75rem",marginBottom:"1rem"}},c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem"},to:"/"},"首页"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginRight:"0.5rem",marginLeft:"0.5rem"},to:"/boardlist"},"版面列表"),c.createElement("i",{className:"fa fa-chevron-right"}),c.createElement(vt.a,{style:{color:"grey",fontSize:"1rem",marginLeft:"0.5rem"},to:e},this.props.data.name))},t}(c.Component),rm=n(252),om=n(1275),sm=n(253);var im=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={posts:[]},t}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,Vu(this.props.data.id)];case 1:return e=t.sent(),this.setState({posts:e}),[2]}}))}))},t.prototype.render=function(){var e=this.state.posts;return 0===e.length?c.createElement(An.a,{size:"large"}):c.createElement("div",{className:"board-postItem-cards"},e.map((function(e){return c.createElement(cm,{key:e.id,item:e})})))},t}(c.Component),cm=function(e){var t=e.item;return c.createElement("div",{className:"board-postItem-card-body"},c.createElement("div",{className:"board-postItem-card-information"},c.createElement("div",null,t.floor,"L"),c.createElement(vt.a,{to:"/user/id/".concat(t.userId)},c.createElement("div",{className:"board-postItem-card-username"},t.userName))),c.createElement("div",{className:"board-postItem-card-content"},c.createElement(tn,{code:t.content,options:Object(i.a)(Object(i.a)({},new Ie),{allowToolbox:!1})})))},lm=function(e){var t,n=e.data,a=e.order,r="normal",o="普通帖子";switch(ua()&&(t=ua().name),n.userName===t&&(r="my",o="我的帖子"),n.replyCount>100&&(r="hot",o="热帖"),1===n.state&&(r="lock",o="已被锁定"),1===n.bestState&&(r="star",o="精华"),n.topState){case 4:r="top-red",o="全站置顶";break;case 2:r="top-orange",o="版面置顶"}var s="/static/images/icon/".concat(r,".png"),i="";i=a%2==0?"board-postItem-body board-postItem-body-even":"board-postItem-body board-postItem-body-odd";var l=c.createElement(im,{key:n.id,data:n}),u="#000",m="normal",p="normal";n.highlightInfo&&(n.highlightInfo.isBold&&(m="bold"),n.highlightInfo.isItalic&&(p="italic"),n.highlightInfo.color&&(u=n.highlightInfo.color));var d=n.replyCount+1,h=d%10==0?d/10:(d-d%10)/10+1,f=[];if(1===h);else if(h<=7)for(var g=1;g<=h;g++)f.push(g);else f.push(1,2,3,4,-1,h-2,h-1,h);for(var b="",v="",y=0,E=JSON.parse(localStorage.getItem("tagInfo").slice(4));y<E.length;y++){var I=E[y];I.id===n.tag1&&(b="[".concat(I.name,"]")),I.id===n.tag2&&(v="[".concat(I.name,"]"))}return c.createElement(om.a,{title:c.createElement(vt.a,{style:{lineHeight:"1rem"},to:"/topic/".concat(n.id)},n.title),content:l,mouseEnterDelay:1.5},c.createElement("div",{className:i},c.createElement(sm.a,{title:o},c.createElement("div",{className:"board-postItem-icon"},c.createElement("img",{src:s}))),c.createElement("div",{className:"board-postItem-title",style:{display:"flex"}},c.createElement(vt.a,{to:"/topic/".concat(n.id),style:{color:u,fontWeight:m,fontStyle:p,marginRight:"0.3rem",fontSize:"1rem"}},"".concat(b).concat(v).concat(n.title)),f.map((function(e){return function(e,t){var n="/topic/".concat(t,"/").concat(e);return-1!=e?c.createElement("div",{style:{marginRight:"0.3rem"}},c.createElement(vt.a,{style:{color:"#79b8ca"},to:n},e)):c.createElement("div",{style:{marginRight:"0.3rem"}},"...")}(e,n.id)}))),c.createElement("div",{className:"board-postItem-right"},n.userName?c.createElement(vt.a,{className:"board-postItem-userName",to:"/user/id/".concat(n.userId)},n.userName):c.createElement("div",{className:"board-postItem-userName"},"匿名"),c.createElement("div",{className:"board-postItem-tags"},c.createElement("div",{className:"board-postItem-tag"},c.createElement(As.a,{style:{width:60,textAlign:"center"},color:"blue"},n.hitCount>1e4?"".concat((n.hitCount/1e4).toFixed(0),"万"):n.hitCount)),c.createElement("div",{className:"board-postItem-tag"},c.createElement(As.a,{style:{width:60,textAlign:"center"},color:"cyan"},n.replyCount))),c.createElement(vt.a,{to:"/topic/".concat(n.id,"/").concat(Math.ceil((n.replyCount+1)/10))},c.createElement("div",{className:"board-postItem-lastReply"},c.createElement("span",null,n.lastPostUser),"/",c.createElement("span",null,Dn()(n.lastPostTime).format("YY-MM-DD HH:mm")))))))},um=function(e){var t=e.list;return c.createElement("div",{className:"board-list-body"},t.map((function(e,t){return c.createElement(lm,{key:t,order:t,data:e})})))},mm=ls.a.Option,pm=function(e){var t=e.onChange,n=e.tags,a=e.handleTag1Change,r=e.handleTag2Change;return c.createElement("div",{className:"board-postItem-head"},c.createElement("div",{className:"board-postItem-head-left"},c.createElement("div",{className:"board-postItem-head-left-part"},c.createElement("div",{className:"board-postItem-head-option",onClick:function(){return t(0)}},"全部"),c.createElement("div",{className:"board-postItem-head-option",onClick:function(){return t(1)}},"精华"),c.createElement("div",{className:"board-postItem-head-option",onClick:function(){return t(2)}},"保存")),c.createElement("div",{className:"board-postItem-head-left-part"},n.length>0?c.createElement(ls.a,{defaultValue:-1,style:{width:120},onChange:a},c.createElement(mm,{value:-1},"全部"),n[0].tags.map((function(e){return c.createElement(mm,{value:e.id},e.name)}))):null,n.length>1?c.createElement(ls.a,{defaultValue:-1,style:{width:120,marginLeft:20},onChange:r},c.createElement(mm,{value:-1},"全部"),n[1].tags.map((function(e){return c.createElement(mm,{value:e.id},e.name)}))):null)),c.createElement("div",{className:"board-postItem-head-right"},c.createElement("div",{className:"board-postItem-head-userName"},"作者"),c.createElement("div",{className:"board-postItem-head-hitcount"},"点击"),c.createElement("div",{className:"board-postItem-head-reply"},"回复"),c.createElement("div",{className:"board-postItem-head-lastReply"},"最后回复")))},dm=n(1280),hm=n(1279),fm=ls.a.Option,gm=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={visible:!1,tpList:[],loading:!1,hasMore:!0,manageVisible:!1,recordVisible:!1},t.showModal=function(){return Object(i.b)(t,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,ko(this.props.data.id,0,6)];case 1:return e=n.sent(),t=!0,e.length<21?t=!1:e.pop(),this.setState({visible:!0,tpList:e,hasMore:t}),[2]}}))}))},t.handleOk=function(){t.setState({manageVisible:!1})},t.handleCancel=function(){t.setState({visible:!1})},t.cancelTp=function(e){return Object(i.b)(t,void 0,void 0,(function(){var t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,xr(e.userId,this.props.data.id)];case 1:return"ok"!==(t=a.sent())?[3,3]:[4,ko(this.props.data.id,0,5)];case 2:return n=a.sent(),this.setState({tpList:n}),[3,4];case 3:alert("操作失败,原因："+t),a.label=4;case 4:return[2]}}))}))},t.openRecord=function(){return t.setState({recordVisible:!0})},t}return Object(i.c)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.data,a=t.list,r=n.id,o=qr(n.boardMasters);return c.createElement(c.Fragment,null,c.createElement("div",{className:"row",style:{width:"100%",justifyContent:"flex-end"}},c.createElement(Bn.a,{onClick:this.openRecord},"查看版面事件"),c.createElement(Bn.a,{onClick:this.showModal},"小黑屋"),o&&c.createElement(Bn.a,{onClick:function(){return e.setState({manageVisible:!0})}},"批量管理")),c.createElement(vm,{key:this.state.manageVisible.toString(),data:n,list:a,visible:this.state.manageVisible,onClose:this.handleOk}),c.createElement(Ln.a,{title:"小黑屋",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,width:o?"60rem":"45rem"},c.createElement(Fn.a,{dataSource:this.state.tpList,pagination:{onChange:function(t){return Object(i.b)(e,void 0,void 0,(function(){var e,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return[4,ko(r,5*(t-1),6)];case 1:return(e=a.sent()).length>0&&(this.state.tpList.pop(),n=this.state.tpList.concat(e),this.setState({tpList:n})),[2]}}))}))},pageSize:5,simple:!0},renderItem:function(t){return c.createElement(Fn.a.Item,{key:t.userId},c.createElement(Fn.a.Item.Meta,{title:t.userName?c.createElement("a",{href:"https://www.cc98.org/user/".concat(t.userId)},t.userName):c.createElement("div",null,"匿名"),description:c.createElement("div",null,c.createElement("span",null,"天数:",t.days),c.createElement("span",{style:{marginLeft:"2rem",marginRight:"2rem"}},"到期时间:",Dn()(t.expiredTime).format("YYYY-MM-DD HH:mm:ss")),c.createElement(Bn.a,{onClick:e.cancelTp.bind(e,t),type:"primary",style:{display:o?"":"none"}},"解除tp"))}),c.createElement("div",null,"操作人:",t.operatorUserName))}},this.state.loading&&this.state.hasMore&&c.createElement("div",{className:"demo-loading-container"},c.createElement(An.a,null)))),c.createElement(Ln.a,{title:"版面事件",visible:this.state.recordVisible,onOk:function(){return e.setState({recordVisible:!1})},onCancel:function(){return e.setState({recordVisible:!1})},width:"60rem"},c.createElement(ym,{id:r.toString()})))},t}(c.Component),bm=gm,vm=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={targetKeys:[],selectedKeys:[],lockVisible:!1,deleteVisible:!1,reason:"",value:7},t.handleChange=function(e){t.setState({targetKeys:e})},t.handleSelectChange=function(e,n){t.setState({selectedKeys:Object(i.e)(Object(i.e)([],e,!0),n,!0)})},t.handleScroll=function(e,t){t.target},t.openNotification=function(){var e={message:"操作错误",description:"请至少选择一个帖子",duration:4.5,icon:c.createElement(Pu.a,{type:"close-circle",style:{color:"red"}})};dm.a.open(e)},t.multiDelete=function(){return Object(i.b)(t,void 0,void 0,(function(){var e,t,n;return Object(i.d)(this,(function(a){switch(a.label){case 0:return e=this.state,t=e.targetKeys,n=e.reason,0===t.length?(this.openNotification(),[2]):[4,Wu(t,n)];case 1:return a.sent(),this.setState({deleteVisible:!1}),[2]}}))}))},t.multiLock=function(){return Object(i.b)(t,void 0,void 0,(function(){var e,t,n,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return e=this.state,t=e.targetKeys,n=e.reason,a=e.value,0===t.length?(this.openNotification(),[2]):[4,Yu(t,n,a)];case 1:return r.sent(),this.setState({lockVisible:!1}),[2]}}))}))},t}return Object(i.c)(t,e),t.prototype.render=function(){for(var e=this,t=this.props,n=(t.data,t.list),a=t.visible,r=this.state,o=r.targetKeys,s=r.selectedKeys,i=r.lockVisible,l=r.deleteVisible,u=[],m=0,p=n;m<p.length;m++){var d=p[m];u.push({key:d.id.toString(),title:d.title})}return c.createElement(c.Fragment,null,c.createElement(Ln.a,{title:"批量管理",visible:a,onOk:function(){return e.props.onClose()},onCancel:function(){return e.props.onClose()},maskClosable:!1,width:"50rem",footer:[c.createElement(Bn.a,{onClick:function(){return e.props.onClose()}},"取消"),c.createElement(Bn.a,{type:"primary",onClick:function(){return e.setState({lockVisible:!0})}},"锁沉"),c.createElement(Bn.a,{type:"primary",onClick:function(){return e.setState({deleteVisible:!0})}},"删除")]},c.createElement(hm.a,{dataSource:u,titles:["Source","Target"],targetKeys:o,selectedKeys:s,onChange:this.handleChange,onSelectChange:this.handleSelectChange,render:function(e){return e.title},listStyle:{width:"20rem",height:"40rem"}})),c.createElement(Ln.a,{title:"批量删除",visible:l,onOk:function(){return e.multiDelete()},onCancel:function(){return e.setState({deleteVisible:!1})}},c.createElement("div",null,"理由"),c.createElement(ls.a,{style:{width:120},mode:"tags",onSelect:function(t){e.setState({reason:t.toString()})}},c.createElement(fm,{value:"重复发帖"},"重复发帖"),c.createElement(fm,{value:"管理要求"},"管理要求"),c.createElement(fm,{value:"已解决"},"已解决"),c.createElement(fm,{value:"内容不符"},"内容不符"),c.createElement(fm,{value:"违反版规"},"违反版规"))),c.createElement(Ln.a,{title:"批量锁沉",visible:i,onOk:function(){return e.multiLock()},onCancel:function(){return e.setState({lockVisible:!1})}},c.createElement("div",null,"理由"),c.createElement(ls.a,{style:{width:120},mode:"tags",onSelect:function(t){return e.setState({reason:t.toString()})}},c.createElement(fm,{value:"重复发帖"},"重复发帖"),c.createElement(fm,{value:"管理要求"},"管理要求"),c.createElement(fm,{value:"已解决"},"已解决"),c.createElement(fm,{value:"内容不符"},"内容不符"),c.createElement(fm,{value:"违反版规"},"违反版规")),c.createElement("div",null,"天数"),c.createElement(ls.a,{style:{width:120},defaultValue:"7",onSelect:function(t){return e.setState({value:parseInt(t.toString())})}},c.createElement(fm,{value:"7"},"7"),c.createElement(fm,{value:"30"},"30"),c.createElement(fm,{value:"98"},"98"),c.createElement(fm,{value:"1000"},"1000"))))},t}(c.Component),ym=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={current:1,data:null,loading:!1},t}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return this.setState({loading:!0}),[4,qu(this.props.id,0)];case 1:return e=t.sent(),this.setState({data:e,loading:!1}),[2]}}))}))},t.prototype.render=function(){var e=this,t=this.props.id,n=this.state,a=n.loading,r=n.data;return r&&c.createElement(Fn.a,{dataSource:r?r.boardEvents:[],pagination:{onChange:function(n){return Object(i.b)(e,void 0,void 0,(function(){var e,a;return Object(i.d)(this,(function(r){switch(r.label){case 0:return this.setState({loading:!0}),[4,qu(t,7*(n-1))];case 1:return e=r.sent(),a=e.boardEvents,e.boardEvents=a,this.setState({data:e,loading:!1}),[2]}}))}))},pageSize:7,total:r.count},renderItem:function(e){return c.createElement(Fn.a.Item,{key:e.id},c.createElement(Fn.a.Item.Meta,{title:c.createElement("a",{href:"https://www.cc98.org/topic/".concat(e.topicId)},e.content),description:c.createElement("div",null,c.createElement("span",null,"对象:",e.targetUserName||"匿名"),c.createElement("span",{style:{marginLeft:"2rem",marginRight:"2rem"}},"时间:",Dn()(e.time).format("YYYY-MM-DD HH:mm:ss")))}),c.createElement("div",null,"操作人:",e.operatorUserName))}},a&&c.createElement("div",{className:"demo-loading-container"},c.createElement(An.a,null)))},t}(c.Component),Em=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={list:[],topList:[],type:0,topicCount:0,tags:[],tag1:-1,tag2:-1},t.getBoardTags=function(){return Object(i.b)(t,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,$u(this.props.data.id)];case 1:return e=t.sent(),this.setState({tags:e}),[2]}}))}))},t.getTopics=function(e){return Object(i.b)(t,void 0,void 0,(function(){var t,n,a,r,o,s,c;return Object(i.d)(this,(function(i){switch(i.label){case 0:return t=this.props.data,n=this.state,a=n.type,r=n.tag1,o=n.tag2,s=[],c=null,-1!==r||-1!==o?[3,7]:0!==a?[3,2]:[4,Lu(t.id,e)];case 1:return s=i.sent(),this.setState({list:s}),[3,6];case 2:return 1!==a?[3,4]:[4,Fu(t.id,e)];case 3:return c=i.sent(),s=c.topics,this.setState({list:s,topicCount:c.count}),[3,6];case 4:return[4,Bu(t.id,e)];case 5:c=i.sent(),s=c.topics,this.setState({list:s,topicCount:c.count}),i.label=6;case 6:return[3,9];case 7:return[4,Au(t.id,e,r,o)];case 8:c=i.sent(),s=c.topics,this.setState({list:s,topicCount:c.count}),i.label=9;case 9:return[2]}}))}))},t.getTopTopics=function(){return Object(i.b)(t,void 0,void 0,(function(){var e;return Object(i.d)(this,(function(t){switch(t.label){case 0:return[4,zu(this.props.data.id)];case 1:return e=t.sent(),this.setState({topList:e}),[2]}}))}))},t.onChange=function(e){t.getTopics(e);var n=window.location.pathname;"1"===t.props.page?"1"===n.substr(n.lastIndexOf("/")+1)?t.props.history.push("".concat(n.substr(0,n.lastIndexOf("/")),"/").concat(e)):t.props.history.push("".concat(n,"/").concat(e)):t.props.history.push("".concat(n.substr(0,n.lastIndexOf("/")),"/").concat(e))},t.changeType=function(e){var n=t.props,a=(n.data,n.page);t.setState({type:e},(function(){return t.getTopics(a)}))},t.handleTag1Change=function(e){t.setState({tag1:e},(function(){return t.getTopics(t.props.page)}))},t.handleTag2Change=function(e){t.setState({tag2:e},(function(){return t.getTopics(t.props.page)}))},t}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t,n;return Object(i.d)(this,(function(a){return e=this.props,t=e.page,n=e.data,this.setState({topicCount:n.topicCount}),this.getTopTopics(),this.getTopics(t),this.getBoardTags(),[2]}))}))},t.prototype.render=function(){var e=this,t=this.props.data,n=this.state,a=n.list,r=n.topList,o=n.topicCount,s=n.tags,i=parseInt(this.props.page),l=1===i?[].concat(r).concat(a):[].concat(a);return 0===l.length?c.createElement(An.a,{size:"large"}):c.createElement(c.Fragment,null,c.createElement("div",{className:"board-list-bar"},c.createElement(rm.a,{className:"board-pagination",showQuickJumper:!0,current:i,total:o,pageSize:20,onChange:this.onChange})),c.createElement(pm,{onChange:function(t){return e.changeType(t)},tags:s,handleTag1Change:this.handleTag1Change,handleTag2Change:this.handleTag2Change}),c.createElement(um,{list:l}),c.createElement("div",{className:"board-list-bar"},c.createElement(rm.a,{className:"board-pagination",showQuickJumper:!0,current:i,pageSize:20,total:o,onChange:this.onChange})),c.createElement(bm,{data:t,list:a}))},t}(Jo),Im=Object(qo.a)(Em),Cm=Object(qo.a)(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={data:null},t}return Object(i.c)(t,e),t.prototype.componentDidMount=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,t;return Object(i.d)(this,(function(n){switch(n.label){case 0:return[4,Zr()];case 1:return n.sent(),e=this.match.params,[4,Du(e.id)];case 2:return"not found"===(t=n.sent())?this.props.history.push("/error/404"):"unauthorized"===t?this.props.history.push("/error/401"):"server error"===t?this.props.history.push("/error/500"):this.setState({data:t}),[2]}}))}))},t.prototype.render=function(){var e=this.state.data,t=this.match.params.page;return e?c.createElement("div",{className:"board-body"},c.createElement(nm,{data:e,page:t||"1"}),c.createElement(Im,{data:e,page:t||"1"})):null},t}(Jo)),wm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.render=function(){var e=c.createElement(rn.a,null,c.createElement(on.a,{exact:!0,path:"/",component:_n}),c.createElement(on.a,{exact:!0,path:"/topic/hot-monthly",component:cu}),c.createElement(on.a,{exact:!0,path:"/topic/hot-weekly",component:mu}),c.createElement(on.a,{exact:!0,path:"/topic/hot-history",component:hu}),c.createElement(on.a,{exact:!0,path:"/topic/:topicid/:page?",component:ui}),c.createElement(on.a,{exact:!0,path:"/topic/:topicId/postid/:postId/:page?",component:ri}),c.createElement(on.a,{path:"/list/:boardId/:type?/:page?",component:Vn}),c.createElement(on.a,{exact:!0,path:"/boardlist",component:mi}),c.createElement(on.a,{path:"/usercenter",component:pc}),c.createElement(on.a,{path:"/message",component:Sc}),c.createElement(on.a,{path:"/focus",component:al}),c.createElement(on.a,{path:"/newtopics",component:Vc}),c.createElement(on.a,{path:"/recommendedtopics",component:Jc}),c.createElement(on.a,{path:"/user/:method/:id",component:Ol}),c.createElement(on.a,{path:"/logon",exact:!0,component:Tl}),c.createElement(on.a,{path:"/search",component:kl}),c.createElement(on.a,{path:"/searchBoard",component:Ul}),c.createElement(on.a,{path:"/signin",component:Rl}),c.createElement(on.a,{path:"/sitemanage",component:Hl}),c.createElement(on.a,{path:"/editor/:mode/:id?",component:ou}),c.createElement(on.a,{path:"/board/:id/:page?",component:Cm}),c.createElement(on.a,{path:"/annual-review-2022",component:Mu}),c.createElement(on.a,{path:"/error/401",component:pn}),c.createElement(on.a,{path:"/index",component:Ru}),c.createElement(on.a,{component:Cn}));return c.createElement(c.Fragment,null,c.createElement(d.a,{history:Ho},c.createElement("div",{className:"main-container"},c.createElement(cl,null),c.createElement(on.a,{component:gu}),this.props.isError?c.createElement(on.a,{component:s[this.props.errorMessage]}):e,c.createElement(ll,null))))},t}(c.Component);var Nm=Object(Ia.b)((function(e){return{isError:e.error.isError,errorMessage:e.error.errorMessage}}))(wm),Om=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.c)(t,e),t.prototype.componentDidMount=function(){throw new Error("Test Error")},t.prototype.render=function(){return null}}(c.PureComponent),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t}return Object(i.c)(t,e),t.prototype.componentDidCatch=function(e,t){this.setState({error:e,errorInfo:t})},t.prototype.componentDidUpdate=function(e,t){var n;if(this.state.error&&!t.error){window.errorInfo={event:this.state.error.message,source:((null===(n=this.state.errorInfo)||void 0===n?void 0:n.componentStack)||"").trim(),line:0,col:0,error:this.state.error};var a=document.getElementById("error-template");document.getElementById("root").replaceWith(a.content.cloneNode(!0))}},t.prototype.render=function(){return!this.state.error&&this.props.children},t}(c.PureComponent)),jm=Om,Tm=n(541),Sm=n.n(Tm),km=n(1276);Dn.a.locale("zh-cn");var xm=[];function Pm(){for(var e=0,t=xm;e<t.length;e++){(0,t[e])()}}function Um(e){xm.push(e)}!function(){Object(i.b)(this,void 0,void 0,(function(){return Object(i.d)(this,(function(e){switch(e.label){case 0:return[4,Kt.loadConfig()];case 1:return e.sent(),ba?[4,Zt.start()]:[3,3];case 2:e.sent(),e.label=3;case 3:return console.info("%cCC98 Durian","font-size: 80px; fontFamily: Big"),u.render(c.createElement(jm,null,c.createElement(Ia.a,{store:Wo},c.createElement(km.a,{locale:Sm.a},c.createElement(Nm,null)))),document.getElementById("root")),Object(Yo.a)(),window.setInterval(Pm,1e3),Um(Io),[2]}}))}))}()},987:function(e){e.exports=JSON.parse('[{"tagName":"b","tagIcon":"fa-bold","title":"加粗","type":"text"},{"tagName":"i","tagIcon":"fa-italic","title":"斜体","type":"text"},{"tagName":"u","tagIcon":"fa-underline","title":"下划线","type":"text"},{"tagName":"del","tagIcon":"fa-strikethrough","title":"删除线","type":"text"},{"tagName":"align","tagIcon":"fa-align-left","title":"左对齐","type":"text","mainValue":"left"},{"tagName":"align","tagIcon":"fa-align-center","title":"居中","type":"text","mainValue":"center"},{"tagName":"align","tagIcon":"fa-align-right","title":"右对齐","type":"text","mainValue":"right"},{"tagName":"replyview","tagIcon":"fa-eye-slash","title":"回复后可见","type":"text"},{"tagName":"size","tagIcon":"fa-text-height","title":"选择字号","type":"fontSize","fontSize":[0,1,2,3,4,5,6,7]},{"tagIcon":"fa-eyedropper","type":"color"},{"tagName":"emoji","tagIcon":"fa-smile-o","title":"插入表情","type":"emoji"},{"tagName":"url","tagIcon":"fa-link","tagDescription":"","title":"插入url","type":"extend","contentValueInfo":"在此输入连接地址"},{"tagName":"img","tagIcon":"fa-picture-o","tagDescription":"","title":"插入图片","type":"extend","contentValueInfo":"在此输入图片文件地址","allowUpload":true,"hasCompassOption":true},{"tagName":"video","tagIcon":"fa-film","title":"插入视频","type":"extend","contentValueInfo":"在此输入视频文件地址","allowUpload":true},{"tagName":"bili","tagDescription":"Bili","title":"插入Bilibili视频","type":"extend","contentValueInfo":"在此输入AV号（纯数字）或者BV号（以BV开头的字符串）","propertiesInfos":[{"key":"","title":"在此输入要显示的分P序号（默认为1）","defaultValue":"1"}]},{"tagName":"audio","tagIcon":"fa-music","title":"插入音频","type":"extend","contentValueInfo":"在此输入音频文件地址","allowUpload":true},{"tagName":"upload","tagIcon":"fa-file","type":"upload","title":"上传文件"}]')},988:function(e){e.exports=JSON.parse('{"fileExtendedNames":{"video":[],"audio":[],"image":[]},"shouldNotSelect":["img","video","audio","upload","bili"]}')}});